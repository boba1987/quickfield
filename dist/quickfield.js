var slice=[].slice;
(function(ra){return function(){var E;E=function(E,I,N,Q){Q=function(f){return N[f]?I[f]:(N[f]=1,I[f]={},I[f]=E[f](I[f]))};E[3]=function(f){var p={exports:f},m=[].slice;(function(){var f;f=function(f){return function(f){var h,p,v,d,r;p=function(d){var f,F,h;f=function(d){return Array.isArray(d)};F=function(d){return d&&"[object Object]"===Object.prototype.toString.call(d)||f(d)};h=function(d,f){return f.notDeep?-1!==f.notDeep.indexOf(d):!1};return d=p=function(d,m,G){var n,b,a,c,e,k;if(!m||"object"!==
typeof m&&"function"!==typeof m)m={};n=0;for(a=G.length;n<a;n++)if(c=G[n],null!=c)for(b in c)if(e=c[b],k=m[b],!(e===m||void 0===e||null===e&&!d.allowNull||d.keys&&-1===d.keys.indexOf(b)||d.notKeys&&-1!==d.notKeys.indexOf(b)||d.own&&!c.hasOwnProperty(b)||d.globalFilter&&!d.globalFilter(e,b,c)||d.filters&&d.filters[b]&&!d.filters[b](e,b,c)))switch(d.globalTransform&&(e=d.globalTransform(e,b,c)),d.transforms&&d.transforms[b]&&(e=d.transforms[b](e,b,c)),!1){case !(d.concat&&f(e)&&f(k)):m[b]=k.concat(e);
break;case !(d.deep&&F(e)&&!h(b,d)):k=F(k)?k:f(e)?[]:{};m[b]=p(d,k,[e]);break;default:m[b]=e}return m}}({});r=function(d){var f,m,F;m={};for(f in d)F=d[f],m[f]=F;return m};d=function(d){if(d)return"object"!==typeof d||Array.isArray(d)?[].concat(d):Object.keys(d)};h=function(d){var f;f=d.target?function(){var d;d=1<=arguments.length?m.call(arguments,0):[];return p(f.options,f.options.target,d)}:function(){var d,h;h=arguments[0];d=2<=arguments.length?m.call(arguments,1):[];return p(f.options,h,d)};
f.options=d;Object.defineProperties(f,v);return f};v={deep:{get:function(){var d;d=r(this.options);d.deep=!0;return h(d)}},own:{get:function(){var d;d=r(this.options);d.own=!0;return h(d)}},allowNull:{get:function(){var d;d=r(this.options);d.allowNull=!0;return h(d)}},concat:{get:function(){var d;d=r(this.options);d.concat=!0;return h(d)}},clone:{get:function(){var d;d=r(this.options);d.target={};return h(d)}},notDeep:{get:function(){var f;f=r(this.options);return function(m){f.notDeep=d(m);return h(f)}}},
keys:{get:function(){var f;f=r(this.options);return function(m){f.keys=d(m);return h(f)}}},notKeys:{get:function(){var f;f=r(this.options);return function(m){f.notKeys=d(m);return h(f)}}},transform:{get:function(){var d;d=r(this.options);return function(f){"function"===typeof f?d.globalTransform=f:f&&"object"===typeof f&&(d.transforms=f);return h(d)}}},filter:{get:function(){var d;d=r(this.options);return function(f){"function"===typeof f?d.globalFilter=f:f&&"object"===typeof f&&(d.filters=f);return h(d)}}}};
return f=h({})}}(this)({});null!=("undefined"!==typeof p&&null!==p?p.exports:void 0)?p.exports=f:"function"===typeof define&&define.amd?define(["smart-extend"],function(){return f}):window.extend=f})();return p.exports};E[4]=function(f){var p;return p=f={defined:function(f){return void 0!==f},array:function(f){return f instanceof Array},object:function(f){return"object"===typeof f&&f},objectPlain:function(f){return p.object(f)&&"[object Object]"===Object.prototype.toString.call(f)},string:function(f){return"string"===
typeof f},number:function(f){return"number"===typeof f},"function":function(f){return"function"===typeof f},iterable:function(f){return p.object(f)&&p.number(f.length)}}};return Q};E=E({},{},{});return function(){var W,I,N,Q,f,p,m,h,O,y,S,x,v,d,r,F,G,X,A,n,T,J,L;f=function(b){return function(a){var b={exports:a};(function(){var a,c,d,f,g,h,n,m,p,w,r,v,x,z,A,F,D,y,I,G,K;a=function(a){var b={exports:a};(function(){var a,c,l,u,e,d,f,k;u=["webkit","moz","ms","o"];d="backgroundPositionX backgroundPositionY blockSize borderWidth columnRuleWidth cx cy fontSize gridColumnGap gridRowGap height inlineSize lineHeight minBlockSize minHeight minInlineSize minWidth maxHeight maxWidth outlineOffset outlineWidth perspective shapeMargin strokeDashoffset strokeWidth textIndent width wordSpacing top bottom left right x y".split(" ");
["margin","padding","border","borderRadius"].forEach(function(a){var b,c,l,u,e;d.push(a);u=["Top","Bottom","Left","Right"];e=[];c=0;for(l=u.length;c<l;c++)b=u[c],e.push(d.push(a+b));return e});k=document.createElement("div").style;a=/^\d+(?:[a-z]|\%)+$/i;c=/\d+$/;l=/\s/;f={includes:function(a,b){return a&&-1!==a.indexOf(b)},isIterable:function(a){return a&&"object"===typeof a&&"number"===typeof a.length&&!a.nodeType},isPropSupported:function(a){return"undefined"!==typeof k[a]},toTitleCase:function(a){return a[0].toUpperCase()+
a.slice(1)},normalizeProperty:function(a){var b,c,l;if(this.isPropSupported(a))return a;l=this.toTitleCase(a);a=0;for(b=u.length;a<b;a++)if(c=u[a],c=""+c+l,this.isPropSupported(c))return c},normalizeValue:function(b,u){this.includes(d,b)&&null!==u&&(u=""+u,!c.test(u)||a.test(u)||l.test(u)||(u+="px"));return u}};e=function(a,b,c){var l,u,d;if(f.isIterable(a))for(l=0,u=a.length;l<u;l++)d=a[l],e(d,b,c);else if("object"===typeof b)for(l in b)c=b[l],e(a,l,c);else{b=f.normalizeProperty(b);if("undefined"===
typeof c)return getComputedStyle(a)[b];b&&(a.style[b]=f.normalizeValue(b,c))}};e.version="1.0.5";return null!=("undefined"!==typeof b&&null!==b?b.exports:void 0)?b.exports=e:"function"===typeof define&&define.amd?define(["quickdom"],function(){return e}):this.Css=e})();return b.exports}.call(this,{});w=E(3);m="className href selected type name id checked".split(" ");z={includes:function(a,b){return a&&-1!==a.indexOf(b)},removeItem:function(a,b){var c;c=a.indexOf(b);-1!==c&&a.splice(c,1);return a},
normalizeGivenEl:function(a){switch(!1){case !c.domNode(a):return f(a);case !c.string(a):return f.text(a);default:return a}}};c=E(4);c=w.clone(c,{domDoc:function(a){return a&&9===a.nodeType},domEl:function(a){return a&&1===a.nodeType},domText:function(a){return a&&3===a.nodeType},domNode:function(a){return c.domEl(a)||c.domText(a)},quickDomEl:function(a){return a instanceof g},template:function(a){return a instanceof h}});g=function(a,b){this.type=a;this.options=b;this.el=this.options.existing||("text"===
this.type?document.createTextNode(this.options.text):"*"===this.type[0]?document.createElementNS("http://www.w3.org/2000/svg",this.type.slice(1)):document.createElement(this.type));"text"===this.type&&(this.append=this.prepend=this.attr=function(){});this._parent=null;this._state=[];this._children=[];this._childRefs={};this._insertedCallbacks=[];this._eventCallbacks={__refs:{}};this._normalizeOptions();this._applyOptions();this._attachStateEvents();return this.el._quickElement=this};Object.defineProperties(g.prototype,
{raw:{get:function(){return this.el}},0:{get:function(){return this.el}},css:{get:function(){return this.style}},replaceWith:{get:function(){return this.replace}}});g.prototype.parentsUntil=function(a){return x(this,a)};g.prototype.parentMatching=function(a){var b;if(c["function"](a))for(b=this.parent;b;){if(a(b))return b;b=b.parent}};Object.defineProperties(g.prototype,{children:{get:function(){var a,b,c,e;if(this.el.childNodes.length!==this._children.length)for(this._children.length=0,e=this.el.childNodes,
b=0,c=e.length;b<c;b++)a=e[b],4>a.nodeType&&this._children.push(f(a));return this._children}},parent:{get:function(){this._parent&&this._parent.el===this.el.parentNode||c.domDoc(this.el.parentNode)||(this._parent=f(this.el.parentNode));return this._parent}},parents:{get:function(){return x(this)}},next:{get:function(){return f(this.el.nextSibling)}},prev:{get:function(){return f(this.el.previousSibling)}},nextAll:{get:function(){var a,b;b=[];for(a=f(this.el.nextSibling);a;)b.push(a),a=a.next;return b}},
prevAll:{get:function(){var a,b;b=[];for(a=f(this.el.previousSibling);a;)b.push(a),a=a.prev;return b}},siblings:{get:function(){return this.prevAll.reverse().concat(this.nextAll)}}});x=function(a,b){var l,e;c["function"](b)||(b=void 0);e=[];for(l=a.parent;l;)e.push(l),l=l.parent,b&&b(l)&&(l=null);return e};g.prototype._normalizeOptions=function(){var a;null==(a=this.options).style&&(a.style={});this.options.styleShared={};this.options["class"]&&(this.options.className=this.options["class"]);this.options.url&&
(this.options.href=this.options.url);null==(a=this.options).relatedInstance&&(a.relatedInstance=this);null==(a=this.options).unpassableStates&&(a.unpassableStates=[]);null==(a=this.options).passStateToChildren&&(a.passStateToChildren=!0);this.options.stateTriggers=w.deep({hover:{on:"mouseenter",off:"mouseleave"},focus:{on:"focus",off:"blur"}},this.options.stateTriggers);this._normalizeStyle();return this};g.prototype._normalizeStyle=function(){var a,b,c,e,d;b=Object.keys(this.options.style);c=b.filter(function(a){return"$"===
a[0]});e=z.removeItem(c.slice(),"$base");this.providedStates=c.map(function(a){return a.slice(1)});!z.includes(c,"$base")&&b.length&&(c.length?(b=b.filter(function(a){return"$"!==a[0]}),this.options.style.$base=w.clone.keys(b)(this.options.style)):this.options.style={$base:this.options.style});a=function(b){return function(c,l){var e,d,u,f,k,t,g;u=Object.keys(c).filter(function(a){return"$"===a[0]});if(u.length){b.hasSharedStateStyle=!0;null==b._stateShared&&(b._stateShared=[]);k=[];e=0;for(f=u.length;e<
f;e++)d=u[e],t=l.concat(d.slice(1)),g=t.join("+"),b.options.styleShared[g]=b.options.style["$"+g]=c[d],a(c[d],t),k.push(delete c[d]);return k}}}(this);b=0;for(c=e.length;b<c;b++)d=e[b],a(this.options.style[d],[d.slice(1)]);return this};g.prototype._applyOptions=function(){var a,b,c,e;(c=this.options.id||this.options.ref)&&this.attr("data-ref",this.ref=c);this.options.id&&(this.el.id=this.options.id);this.options.className&&(this.el.className=this.options.className);this.options.href&&(this.el.href=
this.options.href);this.options.type&&(this.el.type=this.options.type);this.options.name&&(this.el.name=this.options.name);this.options.value&&(this.el.value=this.options.value);this.options.selected&&(this.el.selected=this.options.selected);this.options.checked&&(this.el.checked=this.options.checked);if(this.options.props)for(b in e=this.options.props,e)c=e[b],this.prop(b,c);if(this.options.attrs)for(b in e=this.options.attrs,e)c=e[b],this.attr(b,c);if(this.options.styleAfterInsert)this.onInserted(a=
function(b){return function(){var c;c=b.parents.slice(-1)[0];return c.raw===document.documentElement?b.style(w.clone.apply(w,[b.options.style.$base].concat(slice.call(b._getStateStyles(b._getActiveStates()))))):c.onInserted(a)}}(this));else this.style(this.options.style.$base);Object.defineProperty(this,"_parent",{set:function(a){var b,c,l;if(a)for(delete this._parent,this._parent=a,l=this._insertedCallbacks,b=0,c=l.length;b<c;b++)a=l[b],a(this)}});return this};g.prototype._attachStateEvents=function(){var a,
b,e,d;b=this.options.stateTriggers;a=function(a){return function(b,l){var e,d;d=c.string(l)?l:l.on;c.object(l)&&(e=l.off);a._listenTo(d,function(){return a.state(b,!0)});if(e)return a._listenTo(e,function(){return a.state(b,!1)})}}(this);for(e in b)d=b[e],a(e,d);return this};I=/\s+/;g.prototype.on=function(a,b){var l,e;c.string(a)&&c["function"](b)&&(e=a.split("."),l=e[1],a=e[0],a.split(I).forEach(function(a){return function(c){a._eventCallbacks[c]||(a._eventCallbacks[c]=[],a._listenTo(c,function(b){var l,
e,d,u;u=a._eventCallbacks[c];e=0;for(d=u.length;e<d;e++)l=u[e],l.call(a.el,b)}));l&&(a._eventCallbacks.__refs[l]=b);return a._eventCallbacks[c].push(b)}}(this)));return this};g.prototype.off=function(a,b){var l,e;if(c.string(a))e=a.split("."),l=e[1],a=e[0],a.split(I).forEach(function(a){return function(e){if(a._eventCallbacks[e]){null==b&&(b=a._eventCallbacks.__refs[l]);if(c["function"](b))return z.removeItem(a._eventCallbacks[e],b);if(!l)return a._eventCallbacks[e].length=0}}}(this));else for(e in this._eventCallbacks)this.off(e);
return this};g.prototype.emit=function(a,b,e){var l;null==b&&(b=!0);null==e&&(e=!0);a&&c.string(a)&&(l=document.createEvent("Event"),l.initEvent(a,b,e),this.el.dispatchEvent(l));return this};g.prototype.onInserted=function(a,b){null==b&&(b=!0);if(c["function"](a))return this._parent?b&&a(this):this._insertedCallbacks.push(a),this};g.prototype._listenTo=function(a,b){this.el[this.el.addEventListener?"addEventListener":"attachEvent"](this.el.addEventListener?a:"on"+a,b);return this};g.prototype.updateOptions=
function(a){c.object(a)&&(this.options=a,this._normalizeOptions(),this._applyOptions(this.options));return this};g.prototype.state=function(a,b,e){var l,d,f,u,k,g,B,M,h;if(1===arguments.length)return z.includes(this._state,a);if(this._statePipeTarget&&e!==this)return this._statePipeTarget.state(a,b,this),this;if(c.string(a)){"$"===a[0]&&(a=a.slice(1));f=!!b;if("base"===a)return this;d=this._getActiveStates(a,!1);l=this._getStateStyles(d);this.state(a)!==f&&(this.options.style["$"+a]&&(k=this.options.style["$"+
a],h=this.providedStates.indexOf(a),d=d.filter(function(a){return function(b){return a.providedStates.indexOf(b)>h}}(this)),g=this._getStateStyles(d)),f?(this._state.push(a),k&&this.style(w.clone.keys(k).apply(null,[k].concat(slice.call(g))))):(z.removeItem(this._state,a),k&&(u=w.clone.keys(k).apply(null,[this.options.style.$base].concat(slice.call(l))),k=w.transform(function(){return null}).clone(k),this.style(w(k,u)))));if(this.hasSharedStateStyle)for(B=Object.keys(this.options.styleShared),B=B.filter(function(b){return z.includes(b,
a)}),d=0,g=B.length;d<g;d++)if(M=B[d],u=M.split("+"),k=u.length===u.filter(function(b){return function(c){return c===a||b.state(c)}}(this)).length)k=this.options.styleShared[M],f?(z.includes(this._stateShared,M)||this._stateShared.push(M),u=this.options.styleShared[z.removeItem(u,a).join("+")],this.style(w.clone(u,k))):(z.removeItem(this._stateShared,M),u=w.clone.keys(k).apply(null,[this.options.style.$base].concat(slice.call(l))),k=w.transform(function(){return null}).clone(k),this.style(w(k,u)));
if(this.options.passStateToChildren&&!z.includes(this.options.unpassableStates,a))for(d=this._children,f=0,k=d.length;f<k;f++)l=d[f],l.state(a,b,e||this);return this}};g.prototype.resetState=function(){var a,b,c,e;e=this._state.slice();b=0;for(c=e.length;b<c;b++)a=e[b],this.state(a,!1);return this};g.prototype.pipeState=function(a){var b,l,e,d;if(a){if(a=z.normalizeGivenEl(a),c.quickDomEl(a)&&a!==this)for(this._statePipeTarget=a,d=this._state,l=0,e=d.length;l<e;l++)b=d[l],a.state(b,!0)}else!1===a&&
delete this._statePipeTarget;return this};g.prototype.style=function(){var b,e;if("text"!==this.type){b=arguments;if(c.string(b[0])){if(e=a(this.el,b[0],b[1]),!c.defined(b[1]))return e}else c.object(b[0])&&a(this.el,w.allowNull.transform(function(a){return function(b){return"function"===typeof b?b.call(a,a.options.relatedInstance):b}}(this)).clone(b[0]));return this}};g.prototype.styleSafe=function(a,b){var l,e;if("text"!==this.type)return l=arguments,e=this.style(a),c.string(e)?(b&&(e=0),e||this.el.style[l[0]]||
this.options.style.$base[l[0]]||""):this};g.prototype._getActiveStates=function(a,b){var c;null==b&&(b=!0);c=this.providedStates.filter(function(b){return function(c){return z.includes(b._state,c)&&c!==a}}(this));return b&&this.hasSharedStateStyle?c.concat(this._stateShared):c};g.prototype._getStateStyles=function(a){return a.map(function(a){return function(b){return a.options.style["$"+b]}}(this))};Object.defineProperty(g.prototype,"rect",{get:function(){return this.el.getBoundingClientRect()}});
g.prototype.attr=function(a,b){switch(b){case void 0:return this.el.getAttribute(a);case null:return this.el.removeAttribute(a);default:return this.el.setAttribute(a,b),this}};g.prototype.prop=function(a,b){switch(b){case void 0:return this.el[a];default:return this.el[a]=b,this}};g.prototype.toTemplate=function(){return f.template(this)};g.prototype.clone=function(){var a,b,c,e,d,f,k;c=this.el.cloneNode(!1);c=w.clone(this.options,{existing:c});c=new g(this.type,c);f=this._state;b=0;for(d=f.length;b<
d;b++)a=f[b],c.state(a,!0);f=this.children;b=0;for(d=f.length;b<d;b++)a=f[b],c.append(a.clone());k=this._eventCallbacks;for(e in k)for(b=k[e],d=0,f=b.length;d<f;d++)a=b[d],c.on(e,a);return c};g.prototype.append=function(a){var b;a&&(a=z.normalizeGivenEl(a),c.quickDomEl(a)&&((b=a.parent)&&b._removeChild(a),this._children.push(a),this.el.appendChild(a.el),a.parent));return this};g.prototype.appendTo=function(a){a&&(a=z.normalizeGivenEl(a),c.quickDomEl(a)&&a.append(this));return this};g.prototype.prepend=
function(a){var b;a&&(a=z.normalizeGivenEl(a),c.quickDomEl(a)&&((b=a.parent)&&b._removeChild(a),this._children.unshift(a),this.el.insertBefore(a.el,this.el.firstChild),a.parent));return this};g.prototype.prependTo=function(a){a&&(a=z.normalizeGivenEl(a),c.quickDomEl(a)&&a.prepend(this));return this};g.prototype.html=function(a){if(!c.defined(a))return this.el.innerHTML;this.el.innerHTML=a;return this};g.prototype.text=function(a){if(!c.defined(a))return this.el.textContent;this.el.textContent=a;return this};
g.prototype.after=function(a){var b;a&&this.parent&&(a=z.normalizeGivenEl(a),c.quickDomEl(a)&&(b=this.parent._children.indexOf(this),this.parent._children.splice(b+1,0,a),this.el.parentNode.insertBefore(a.el,this.el.nextSibling),a.parent));return this};g.prototype.insertAfter=function(a){a&&(a=z.normalizeGivenEl(a),c.quickDomEl(a)&&a.after(this));return this};g.prototype.before=function(a){var b;a&&this.parent&&(a=z.normalizeGivenEl(a),c.quickDomEl(a)&&(b=this.parent._children.indexOf(this),this.parent._children.splice(b,
0,a),this.el.parentNode.insertBefore(a.el,this.el),a.parent));return this};g.prototype.insertBefore=function(a){a&&(a=z.normalizeGivenEl(a),c.quickDomEl(a)&&a.before(this));return this};g.prototype.detach=function(){var a;null!=(a=this.parent)&&a._removeChild(this);return this};g.prototype.remove=function(){var a;this.detach();this.resetState();for(a in this._eventCallbacks)this._eventCallbacks[a].length=0;return this};g.prototype.empty=function(){var a,b,c,e;e=this.children.slice();b=0;for(c=e.length;b<
c;b++)a=e[b],this._removeChild(a);return this};g.prototype.wrap=function(a){var b;a&&(a=z.normalizeGivenEl(a),b=this.parent,c.quickDomEl(a)&&a!==this&&a!==this.parent&&(b&&b._removeChild(this,a.parent?void 0:a),a.append(this)));return this};g.prototype.unwrap=function(){var a,b,c,e;if(b=this.parent)if(c=f.batch(b.children),e=b.next,a=b.parent)b.detach(),e?c.insertBefore(e):c.appendTo(a);return this};g.prototype.replace=function(a){var b;a&&(a=z.normalizeGivenEl(a),c.quickDomEl(a)&&a!==this&&(a.detach(),
null!=(b=this.parent)&&b._removeChild(this,a)));return this};g.prototype._removeChild=function(a,b){var c;c=this._children.indexOf(a);-1!==c&&(b?(this.el.replaceChild(b.el,a.el),this._children.splice(c,1,b)):(this.el.removeChild(a.el),this._children.splice(c,1)));return this};n={type:"window",el:window,raw:window,_eventCallbacks:{__refs:{}}};n.on=g.prototype.on;n.off=g.prototype.off;n.emit=g.prototype.emit;n._listenTo=g.prototype._listenTo;f=function(){var a,b,e,d,k;a=1<=arguments.length?slice.call(arguments,
0):[];switch(!1){case !c.template(a[0]):return a[0].spawn();case !c.quickDomEl(a[0]):return a[1]?a[0].updateOptions(a[1]):a[0];case !(c.domNode(a[0])||c.domDoc(a[0])):if(a[0]._quickElement)return a[0]._quickElement;e=a[0].nodeName.toLowerCase().replace("#","");b=a[1]||{};b.existing=a[0];return new g(e,b);case a[0]!==window:return n;case !c.string(a[0]):e=a[0].toLowerCase();b="text"===e?c.object(a[1])?a[1]:{text:a[1]||""}:c.object(a[1])?a[1]:{};a=a.slice(2);e=new g(e,b);d=0;for(k=a.length;d<k;d++)b=
a[d],c.string(b)&&(b=f.text(b)),c.template(b)&&(b=f(b)),c.quickDomEl(b)&&b.appendTo(e);return e}};f.template=function(a){return new h(a,!0)};d=function(a,b){this.elements=a;this.returnResults=b;this.elements=this.elements.map(function(a){return f(a)});return this};d.prototype.reverse=function(){this.elements=this.elements.reverse();return this};d.prototype["return"]=function(a){return a?(this.returnResults=!0,this):this.lastResults};Object.keys(g.prototype).concat("css","replaceWith").forEach(function(a){return d.prototype[a]=
function(){var b,c;c=this.lastResults=function(){var c,e,d,f;d=this.elements;f=[];c=0;for(e=d.length;c<e;c++)b=d[c],f.push(b[a].apply(b,arguments));return f}.apply(this,arguments);return this.returnResults?c:this}});f.batch=function(a,b){if(!c.iterable(a))throw Error("Batch: expected an iterable, got "+String(a));if(!a.length)throw Error("Batch: expected a non-empty element collection");return new d(a,b)};p={type:"div",options:{},children:[]};h=function(a,b){this._config=b?y(a):a;return this};Object.keys(p).forEach(function(a){return Object.defineProperty(h.prototype,
a,{get:function(){return this._config[a]}})});h.prototype.spawn=function(a,b){var c;c=r(this._config,a,b);return f.apply(null,[c.type,c.options].concat(slice.call(c.children)))};h.prototype.extend=function(a,b){return new h(r(this._config,a,b))};r=function(a,b,e){var d,f,k,g,l;e&&(d={options:function(a){return w(a,e)}});c.array(b)&&(b=y(b,!1));d=w.deep.notKeys("children").notDeep("relatedInstance").transform(d).clone(a,b);a=a.children||[];g=(null!=b?b.children:void 0)||[];d.children=[];k=f=0;for(l=
Math.max(a.length,g.length);0<=l?f<l:f>l;k=0<=l?++f:--f)b=a[k],k=g[k],c.array(k)&&(k=y(k,!1)),c.string(k)&&(k={type:"text",options:{text:k}}),b?d.children.push(b.extend(k,e)):d.children.push(new h(w.deep.clone(p,k)));return d};y=function(a,b){var e;switch(!1){case !c.array(a):e={};if(c.string(a[0]))e.type=a[0];else throw Error(D+" string for 'type', got '"+String(a[0])+"'");if(1<a.length&&!c.object(a[1])&&null!==a[1])throw Error(D+" object for 'options', got '"+String(a[1])+"'");e.options=a[1]?w.deep.clone(a[1]):
null;e.children=a.slice(2);!1!==b&&(e.children=e.children.map(f.template));return e;case !(c.string(a)||c.domText(a)):return{type:"text",options:{text:a.textContent||a}};case !c.domEl(a):return{type:a.nodeName.toLowerCase(),options:w.clone.keys(m)(a),children:[].map.call(a.childNodes,f.template)};case !c.quickDomEl(a):return{type:a.type,options:w.clone.deep.notKeys("relatedInstance")(a.options),children:a.children.map(f.template)};case !c.template(a):return r(a._config);default:throw Error(D+" (array || string || domEl || quickDomEl || template), got "+
String(a));}};D="Template Parse Error: expected";K="link:a anchor:a a text div span h1 h2 h3 h4 h5 h6 header footer section button br ul ol li fieldset input textarea select option form frame hr iframe img picture main nav meta object pre style table tbody th tr td tfoot video".split(" ");v=function(a){var b,c;b=c=a;z.includes(a,":")&&(a=a.split(":"),b=a[0],c=a[1]);return f[b]=function(){return f.apply(null,[c].concat(slice.call(arguments)))}};A=0;for(F=K.length;A<F;A++)G=K[A],v(G);f.version="1.0.17";
return null!=("undefined"!==typeof b&&null!==b?b.exports:void 0)?b.exports=f:"function"===typeof define&&define.amd?define(["quickdom"],function(){return f}):this.Dom=f})();return b.exports}}(this)({});T=function(b){"use strict";var a=[],c=[];return b=function(b,d){if(b===d)return 0;var e=b.length,f=d.length;if(0===e)return f;if(0===f)return e;for(var k,h,n,m,p=0,w=0;p<e;)c[p]=b.charCodeAt(p),a[p]=++p;for(;w<f;)for(k=d.charCodeAt(w),n=w++,h=w,p=0;p<e;p++)m=k===c[p]?n:n+1,n=a[p],h=a[p]=n>h?m>h?h+1:
m:m>n?n+1:m;return h}}.call(this,{});A=E(3);h=E(4);d=function(b){var a={exports:b};(function(){var b,e,d,f,h,g,n,m,p,r,w,x,v,A,z,y,F,D,E,I,G,K,l,u,M,t,O,J,N,Q,L,U,S,T,da,W,aa,ea,X,P,Y,ka,fa,la,ba,ca,ga,ha,ma,ia,ja,na,R,C,Z,oa,V,pa;Q=0;G="push pop shift unshift splice reverse sort".split(" ");S={};K={};ga=["{{","}}"];R=Object.create({silent:!1},{placeholder:{get:function(){return ga},set:function(a){t.isArray(a)&&2===a.length&&(ga=a,ja())}}});L={delay:!1,throttle:!1,simpleSelector:!1,promiseTransforms:!1,
dispatchEvents:!1,sendArrayCopies:!1,updateEvenIfSame:!1,updateOnBind:!0};U=Object.defineProperty;fa=Object.getOwnPropertyDescriptor;u=null;M=function(){var a;u||(a=u=document.createEvent("Event"),a.initEvent("change",!0,!1),a._sb=!0);return u};ma=!("className"in Element.prototype)||!fa(Element.prototype,"className").get;pa="innerWidth innerHeight outerWidth outerHeight scrollX scrollY pageXOffset pageYOffset screenX screenY screenLeft screenTop".split(" ");na=function(a,b){return this.updateAllSubs(b||
this)};X=function(){return""+ ++Q};P=function(){return Object.create(null)};Y=function(a,b){return function(c,q,e){return D(c,q,e,a,b)}};ka=function(a,c){return a.selfUpdater||(a.selfUpdater=new b(function(){return c?a.setValue(a.fetchDirectValue(),a,!0):a.updateAllSubs(a)},"Func",{}))};C=function(a,b){return a&&-1!==a.indexOf(b)};t={isDefined:function(a){return void 0!==a},isArray:function(a){return a instanceof Array},isObject:function(a){return"object"===typeof a&&a},isString:function(a){return"string"===
typeof a},isNumber:function(a){return"number"===typeof a},isFunction:function(a){return"function"===typeof a},isBindingInterface:function(a){return a instanceof e},isBinding:function(a){return a instanceof b},isIterable:function(a){return t.isObject(a)&&t.isNumber(a.length)},isDom:function(a){return a.nodeName&&1===a.nodeType},isDomInput:function(a){a=a.nodeName;return"INPUT"===a||"TEXTAREA"===a||"SELECT"===a},isDomRadio:function(a){return"radio"===a.type},isDomCheckbox:function(a){return"checkbox"===
a.type},isElCollection:function(a){return a instanceof NodeList||a instanceof HTMLCollection||t.isDefined(jQuery)&&a instanceof jQuery},domElsAreSame:function(a){var b;b=a[0].type;return[].filter.call(a,function(a){return a.type===b}).length===a.length}};ea=function(a,b,c){var q;if(q=fa(a,b))return c&&(q.configurable=!0),q;if(a=Object.getPrototypeOf(a))return ea(a,b,!0)};J=function(a,b,c){var q,e,d,f,H,qa;a.origDescriptor||(a.origDescriptor=ea(b,a.property));c?G.forEach(function(c){return U(b,c,{configurable:!0,
value:function(){var q;q=Array.prototype[c].apply(b,arguments);a.updateAllSubs(a);return q}})}):"Proxy"===a.type?(e=a.origFn=a.value,a.value={result:null,args:null},t.isFunction(e)&&(qa=[].slice,q=d=function(){var c;c=qa.call(arguments);a.value.args=c=a.selfTransform?a.selfTransform(c):c;a.value.result=c=e.apply(b,c);a.updateAllSubs(a);return c},U(b,a.property,{configurable:a.isLiveProp=!0,get:function(){return q},set:function(b){t.isFunction(b)?b!==e&&(b!==d&&(e=a.origFn=b),q!==d&&(q=d)):q=b}}))):
C(a.type,"DOM")||a.object===window&&C(pa,a.property)||(c=a.origDescriptor||S,c.get&&(a.origGetter=c.get.bind(b)),c.set&&(a.origSetter=c.set.bind(b)),H=(H=c.configurable)&&b.constructor!==CSSStyleDeclaration,ma&&a.isDom&&a.property in b.cloneNode(!1)&&(a.origDescriptor=H=!1,a.isLiveProp=!0,a.origGetter=function(){return a.object[a.property]},a.origSetter=function(b){return a.object[a.property]=b}),H&&(H="Array"===a.type,f=!a.origSetter&&!H,U(b,a.property,{configurable:a.isLiveProp=!0,enumerable:c.enumerable,
get:a.origGetter||function(){return a.value},set:function(b){a.setValue(b,a,f)}}),H&&J(a,b[a.property],!0)))};N=function(a,b,c){var q,e;if(c){e=[];a=0;for(c=G.length;a<c;a++)q=G[a],e.push(delete b[q]);return e}c=a.origDescriptor;c.set||c.get||(c.value=a.origFn||a.value);return U(b,a.property,c)};O=function(a){var b,c;b=P();for(c in a)b[c]=a[c];return b};aa=function(a,b){var c,q,e,d;d=Object.keys(b);c=0;for(e=d.length;c<e;c++)q=d[c],a[q]=b[q]};l={get:function(a,b,c,e){if(b)return K[a._sb_ID];if(e&&
a[0]._sb_map&&(b=K[a[0]._sb_map[c]],b.groupBinding))return b.groupBinding;if(a._sb_map&&a._sb_map[c])return K[a._sb_map[c]]},set:function(a,b){var c,q;b?U(a.object,"_sb_ID",{configurable:!0,value:a.ID}):(q=a.selector,a.object._sb_map?a.object._sb_map[q]=a.ID:(c={},c[q]=a.ID,U(a.object,"_sb_map",{configurable:!0,value:c})))}};da=/[.*+?^${}()|[\]\\]/g;ba=ca=null;ja=function(){var a,b,c;c=R.placeholder[0].replace(da,"\\$&");a=R.placeholder[1].replace(da,"\\$&");b="[^"+a+"]+";ba=new RegExp(c+"("+b+")"+
a,"g");ca=new RegExp(""+c+b+a,"g")};ja();I=function(a,b,c){var q,e,d,f,H;H="";e=d=0;for(f=a.length;d<f;e=++d)q=a[e],H+=q,c[e]&&(H+=b[c[e]]);return H};E=function(a,b,c){null==a[c]&&(a[c]=[]);a[c].push(b)};ia=function(a,b){var c,q,e,d,f,H,k,g,B,h,l;c=Array.prototype.slice.call(a.childNodes);e=0;for(f=c.length;e<f;e++)if(B=c[e],3!==B.nodeType)ia(B,b);else if(B.textContent.match(ca))if(l=B.textContent.split(ba),3===l.length&&""===l[0]+l[2])E(b,B,l[1]);else{k=document.createDocumentFragment();q=d=0;for(H=
l.length;d<H;q=++d)h=l[q],g=k.appendChild(document.createTextNode(h)),q%2&&E(b,g,h);B.parentNode.replaceChild(k,B)}};Z=function(a){throw Error("SimplyBind: "+(T[a]||a));};V=function(a,b){var c,q;R.silent||(c=la(b),q=T[a],console.warn("SimplyBind: "+(q+("\n\n"+c))))};oa=function(a){Z("Invalid argument/s ("+a+")",!0)};la=function(a){return(Error().stack||"").split("\n").slice(a+3).join("\n")};T={invalidParamName:"SimplyBind() and .to() only accept a function, an array, a bound object, a string, or a number.",
fnOnly:"Only functions are allowed for .transform/.condition/All()",badEventArg:"Invalid argument number in .ofEvent()",emptyList:"Empty collection provided",onlyOneDOMElement:"You can only pass a single DOM element to a binding",mixedElList:"'checked' of Mixed list of element cannot be bound"};D=function(a,b,c,d,f){if(!a&&0!==a||!(t.isString(a)||t.isNumber(a)||t.isFunction(a)||a instanceof Array))t.isBindingInterface(a)||Z("invalidParamName");!t.isObject(a)||a instanceof Array?(b=new e(b),b.saveOptions=
c,b.isSub=d,b.completeCallback=f,a=t.isFunction(a)?b.setObject(a,!0):b.setProperty(a)):a=f?f(a):a.selfClone();return a};D.version="1.14.4";D.settings=R;D.defaultOptions=L;D.unBindAll=function(a,b){var c,e,q;if(a&&(t.isObject(a)||t.isFunction(a))&&(t.isIterable(a)&&!a._sb_ID&&a[0]&&t.isDom(a[0])&&(a=a[0]),q=a._sb_map,a._sb_ID&&K[a._sb_ID].removeAllSubs(b),q))for(e in q)c=q[e],K[c].removeAllSubs(b)};b=function(a,b,c){aa(this,c);this.optionsDefault=this.saveOptions?this.options:L;this.type=b;this.object=
a;this.ID=X();this.subs=[];this.subsMeta=P();this.pubsMap=P();this.attachedEvents=[];"Proxy"===this.type&&(this.setValue=na);this.isMultiChoice&&(this.choices=P(),this.object.forEach(function(a){return function(b){var c;c=a.choices[b.value]=D("checked").of(b)._;c.addSub(a);c.subsMeta[a.ID].transformFn=function(){return c};c.groupBinding=a}}(this)));"Event"===this.type||"Func"===this.type&&this.isSub||("Pholder"===this.type?(b=this.descriptor&&!C(this.descriptor,"multi")?this.descriptor+":"+this.property:
this.property,a=this.parentBinding=D(b).of(a)._,a.scanForPholders(),this.value=a.pholderValues[this.pholder],a.textNodes&&(this.textNodes=a.textNodes[this.pholder])):(this.value=a=this.fetchDirectValue(),"ObjectProp"!==this.type||t.isDefined(a)||(this.object[this.property]=a),J(this,this.object)));this.attachEvents();return K[this.ID]=this};b.prototype={addSub:function(a,b,c,e){var q,d,f,k;if(a.isMulti)for(f=a.bindings,a=0,d=f.length;a<d;a++)k=f[a],this.addSub(k,b,c,e);else if(this.subsMeta[a.ID])q=
!0;else{a.pubsMap[this.ID]=this;this.subs.unshift(a);d=this.subsMeta[a.ID]=P();d.updateOnce=c;d.opts=O(b);if(e||"Event"===this.type||"Proxy"===this.type||"Array"===this.type)d.opts.updateEvenIfSame=!0;d.valueRef="Func"===a.type?"valuePassed":"value"}return q},removeSub:function(a,b){var c,e,d,q;if(a.isMulti)for(d=a.bindings,c=0,e=d.length;c<e;c++)q=d[c],this.removeSub(q,b);else this.subsMeta[a.ID]&&(this.subs.splice(this.subs.indexOf(a),1),delete this.subsMeta[a.ID],delete a.pubsMap[this.ID]),b&&
(a.removeSub(this),delete this.pubsMap[a.ID]);0===this.subs.length&&0===Object.keys(this.pubsMap).length&&this.destroy()},removeAllSubs:function(a){var b,c,e,d;e=this.subs.slice();b=0;for(c=e.length;b<c;b++)d=e[b],this.removeSub(d,a)},destroy:function(){var a,b,c,e;delete K[this.ID];this.removePollInterval();if("Event"===this.type)for(e=this.attachedEvents,b=0,c=e.length;b<c;b++)a=e[b],this.unRegisterEvent(a,this.customEventMethod.listen);else"Func"===this.type&&delete this.object._sb_ID;this.isLiveProp&&
this.origDescriptor&&N(this,this.object);"Array"===this.type&&N(this,this.value,!0);this.object._sb_map&&(delete this.object._sb_map[this.selector],0===Object.keys(this.object._sb_map).length&&delete this.object._sb_map)},fetchDirectValue:function(){var a,b,c,e,d;d=this.type;switch(!1){case "Func"!==d:return this.object();case "DOMAttr"!==d:return this.object.getAttribute(this.property)||"";case !this.isMultiChoice:e=[];c=this.choices;for(b in c)if(a=c[b],a.object.checked){if("DOMRadio"===d)return b;
e.push(b)}return e;default:return this.object[this.property]}},setValue:function(a,b,c,e){var d,q,f,k;b||(b=this);this.selfTransform&&(a=this.selfTransform(a));if(!c)switch(this.type){case "ObjectProp":this.isLiveProp?this.isDomInput?e?a!==this.origGetter()&&(d=this.object.selectionStart,this.origSetter(a),d&&this.object.setSelectionRange(d,d)):(this.origSetter(a),R.dispatchEvents&&this.object.dispatchEvent(M())):this.origSetter&&this.origSetter(a):a!==this.value&&(this.object[this.property]=a);break;
case "Pholder":e=this.parentBinding;e.pholderValues[this.pholder]=a;d=I(e.pholderContexts,e.pholderValues,e.pholderIndexMap);if(this.textNodes&&a!==this.value)for(f=this.textNodes,q=0,c=f.length;q<c;q++)k=f[q],k.textContent=a;"textContent"!==this.property&&e.setValue(d,b);break;case "Array":a!==this.value&&(t.isArray(a)||(a=Array.prototype.concat(a)),N(this,this.value,!0),J(this,a=a.slice(),!0));break;case "Func":d=this.valuePassed;this.valuePassed=a;a=this.object(a,d);break;case "Event":this.isEmitter=
!0;this.emitEvent(a);this.isEmitter=!1;break;case "DOMRadio":if(this.isMultiChoice)if(e=t.isBinding(a)?a:this.choices[a])for(q in a=e.object.value,d=this.choices,d)c=d[q],c.setValue(c.ID===e.ID,b);else a=this.value;else{a=!!a;if(a===this.value)return;this.object.checked!==a&&(this.object.checked=a);a&&R.dispatchEvents&&this.object.dispatchEvent(M())}break;case "DOMCheckbox":if(this.isMultiChoice){q=!t.isBinding(a);a=[].concat(a);c=e=0;for(f=a.length;e<f;c=++e)k=a[c],a[c]=t.isBinding(k)?k:this.choices[k];
f=[];k=this.choices;for(d in k)c=k[d],e=q?C(a,c):c.value,c.setValue(e,b),e&&f.push(d);a=f}else{a=!!a;if(a===this.value)return;this.object.checked!==a&&(this.object.checked=a,R.dispatchEvents&&this.object.dispatchEvent(M()))}break;case "DOMAttr":this.object.setAttribute(this.property,a)}this.value=a;this.updateAllSubs(b)},updateAllSubs:function(a){var b,c;if(c=(b=this.subs).length)for(;c--;)this.updateSub(b[c],a)},updateSub:function(a,b,c){var e,d,f;if(!(b===a||b!==this&&b.subsMeta[a.ID])){e=this.subsMeta[a.ID];
if(e.opts.throttle){c=+new Date;d=c-e.lastUpdate;if(d<e.opts.throttle)return clearTimeout(e.updateTimer),e.updateTimer=setTimeout(function(c){return function(){return c.updateSub(a,b)}}(this),e.opts.throttle-d);e.lastUpdate=c}else if(e.opts.delay&&!c)return setTimeout(function(c){return function(){return c.updateSub(a,b,!0)}}(this),e.opts.delay);c="Array"===this.type&&e.opts.sendArrayCopies?this.value.slice():this.value;d=a[e.valueRef];c=(f=e.transformFn)?f(c,d,a.object):c;c===d&&!e.opts.updateEvenIfSame||
e.conditionFn&&!e.conditionFn(c,d,a.object)||(e.opts.promiseTransforms&&c&&t.isFunction(c.then)?c.then(function(c){a.setValue(c,b)}):a.setValue(c,b),e.updateOnce&&this.removeSub(a))}},addModifierFn:function(a,b,c,e){var d,f,q,k,g;if(t.isFunction(c)){f=0;for(q=b.length;f<q;f++)k=b[f],g=k._||k,g.isMulti?this.addModifierFn(a,g.bindings,c,e):(k=this.subsMeta[g.ID],k[a]=c,e=e&&!k.updateOnce,this.pubsMap[g.ID]&&((d=g.subsMeta[this.ID])[a]||(d[a]=c)),!e&&"Func"!==this.type||"transformFn"!==a||this.updateSub(g,
this));return!0}return V("fnOnly",2)},setSelfTransform:function(a,b){this.selfTransform=a;b&&this.setValue(this.value)},scanForPholders:function(){var a;this.pholderValues||(this.pholderValues=P(),this.pholderIndexMap=P(),this.pholderContexts=[],t.isString(this.value)&&(this.pholderContexts=this.value.split(ca),a=0,this.value=this.value.replace(ba,function(b){return function(c,e){b.pholderIndexMap[a++]=e;return b.pholderValues[e]=e}}(this))),this.isDom&&"textContent"===this.property&&ia(this.object,
this.textNodes=P()))},addPollInterval:function(a){if("Event"!==this.type)return this.removePollInterval(),this.pollInterval=setInterval(function(a){return function(){var b;b=a.fetchDirectValue();return a.setValue(b)}}(this),a)},removePollInterval:function(){clearInterval(this.pollInterval);return this.pollInterval=null},addUpdateListener:function(a,b){this.object.addEventListener(a,function(a){return function(c){c._sb||(c=a.selfTransform&&a.isDomInput,a.setValue(a.object[b],null,!c,!0))}}(this),!1)},
attachEvents:function(){this.eventName?this.registerEvent(this.eventName,this.customEventMethod.listen):this.isDomInput?(this.addUpdateListener("input","value"),this.addUpdateListener("change","value")):this.isMultiChoice||"DOMRadio"!==this.type&&"DOMCheckbox"!==this.type||this.addUpdateListener("change","checked")},registerEvent:function(a,b){this.attachedEvents.push(a);this.invokeEventMethod(a,b||"addEventListener","addEventListener")},unRegisterEvent:function(a,b){this.attachedEvents.splice(this.attachedEvents.indexOf(a),
1);this.invokeEventMethod(a,b||"removeEventListener","removeEventListener")},invokeEventMethod:function(a,b,c){var e;e=this.object;if(this.isDom&&t.isDefined(jQuery)&&"on"===b||"off"===b)e=jQuery(this.object);e[b]||(b=c);this.eventHandler||(this.eventHandler=W.bind(this));if("function"===typeof e[b])e[b](a,this.eventHandler)},emitEvent:function(a){var b,c;c=this.object;b=this.customEventMethod.emit||"dispatchEvent";this.isDom&&t.isDefined(jQuery)&&"trigger"===b&&(c=jQuery(this.object));c[b]||(b="dispatchEvent");
if("dispatchEvent"===b)return this.eventObject||(this.eventObject=document.createEvent("Event"),this.eventObject.initEvent(this.eventName,!0,!0)),this.eventObject.bindingData=a,c[b](this.eventObject);c[b](this.eventName,a)}};W=function(){this.isEmitter||this.setValue(arguments[this.property],null,!0)};e=function(a,b){var c;if(b)aa(this,b),this.stage=1;else for(c in this.stage=0,this.subs=[],this.optionsPassed=a||(a={}),this.options={},L)this.options[c]=null!=a[c]?a[c]:L[c];return this};d={selfClone:function(){return new e(null,
this)},defineMainProps:function(a){this._=a;return Object.defineProperties(this,{value:{get:function(){return a.value}},original:{get:function(){return a.objects||a.object}},subscribers:{get:function(){return a.subs.slice().map(function(a){return a.object})}}})},createBinding:function(a,c,e,d){var f;this.object=a;if(f=l.get(a,d,this.selector,this.isMultiChoice))return this.patchCachedBinding(f);a=new b(a,c,e);l.set(a,d);return a},patchCachedBinding:function(a){var b,c,e,d;"ObjectProp"!==a.type||this.property in
this.object||J(a,this.object);if(this.saveOptions)for(c in e=this.optionsPassed,e)d=e[c],a.optionsDefault[c]=d;c=a.optionsDefault;for(b in c)d=c[b],this.options[b]=t.isDefined(this.optionsPassed[b])?this.optionsPassed[b]:d;return a},setProperty:function(a){var b;t.isNumber(a)&&(a=a.toString());this.selector=this.property=a;this.options.simpleSelector||(C(a,":")&&(b=a.split(":"),this.descriptor=b.slice(0,-1).join(":"),this.property=b[b.length-1]),C(a,".")&&(b=this.property.split("."),this.property=
b[0],this.pholder=b.slice(1).join(".")),C(this.descriptor,"event")&&(C(a,"#")?(b=this.property.split("#"),this.eventName=b[0],this.property=b[1]):(this.eventName=this.property,this.property=0),isNaN(parseInt(this.property))&&V("badEventArg",1),this.customEventMethod={listen:this.optionsPassed.listenMethod,emit:this.optionsPassed.emitMethod}));return this},setObject:function(a,b){var c,e,d,k;this.stage=1;k=(d=a!==window&&t.isIterable(a)&&!a.nodeType)?a[0]:a;if(!k)d&&t.isElCollection(a)&&Z("emptyList");
else if(this.isDom=t.isDom(k))if("checked"===this.property?(e=k&&t.isDomRadio(k),c=!e&&k&&t.isDomCheckbox(k)):"value"===this.property&&(this.isDomInput=t.isDomInput(k)),d&&!C(this.descriptor,"multi"))if(1===a.length)a=a[0];else if(!e&&!c||t.domElsAreSame(a))e||c?(this.isMultiChoice=!0,a=[].slice.call(a)):(a=a[0],V("onlyOneDOMElement",3));else return V("mixedElList",3);switch(!1){case !b:c="Func";break;case !this.pholder:c="Pholder";break;case !(C(this.descriptor,"array")&&t.isArray(a[this.property])):c=
"Array";break;case !C(this.descriptor,"event"):c="Event";break;case !C(this.descriptor,"func"):c="Proxy";break;case !e:c="DOMRadio";break;case !c:c="DOMCheckbox";break;case !C(this.descriptor,"attr"):c="DOMAttr";break;default:c="ObjectProp"}C(this.descriptor,"multi")?(a.length||Z("emptyList"),this.defineMainProps(new f(this,a,c))):this.defineMainProps(this.createBinding(a,c,this,b));C(this._.type,"Event")||C(this._.type,"Proxy")?this.options.updateOnBind=!1:C(this._.type,"Func")&&(this.options.updateOnBind=
!0);return this.completeCallback?this.completeCallback(this):this},addToPublisher:function(a){var b,c,e,d;a.stage=2;a.subs.push(this);b=a._.addSub(this._,a.options,a.updateOnce);if(a.updateOnce)delete a.updateOnce;else if(a.options.updateOnBind&&!b)if(this._.isMulti)for(d=this._.bindings,c=0,e=d.length;c<e;c++)b=d[c],a._.updateSub(b,a._);else a._.updateSub(this._,a._)}};e.prototype=Object.create(d,{of:{get:function(){if(!this.stage)return p}},set:{get:function(){if(this.stage)return w}},chainTo:{get:function(){if(2===
this.stage)return g}},transformSelf:{get:function(){if(1===this.stage)return y}},transform:{get:function(){if(2===this.stage)return A}},transformAll:{get:function(){if(2===this.stage)return z}},condition:{get:function(){if(2===this.stage)return n}},conditionAll:{get:function(){if(2===this.stage)return m}},bothWays:{get:function(){if(2===this.stage)return h}},unBind:{get:function(){if(2===this.stage)return F}},pollEvery:{get:function(){if(this.stage)return r}},stopPolling:{get:function(){if(this.stage)return v}},
setOption:{get:function(){if(2===this.stage)return x}},updateOn:{get:function(){var a;if(this.stage&&(a=this))return Y(!1,function(b){b._!==a._&&(a._.pubsMap[b._.ID]=b._,b._.addSub(ka(a._,!0),b.options,!1,!0));return a})}},removeUpdater:{get:function(){var a,b;if(this.stage&&(b=this)&&(a=this._.selfUpdater))return Y(!1,function(c){c._.subsMeta[a.ID]&&(delete b._.pubsMap[c._.ID],c._.removeSub(a))})}},to:{get:function(){var a;if(1===this.stage&&(a=this))return Y(!0,function(b){b._!==a._&&b.addToPublisher(a);
return a})}},and:{get:function(){var a,b;b=this.selfClone();if(2===this.stage)return b;if(1===this.stage)return b._.isMulti||(a=b._,b._=b._=new f(b),b._.addBinding(a)),Y(!1,function(a){b._.addBinding(a._);return b})}},once:{get:function(){var a;if(1===this.stage)return a=this.selfClone(),a.updateOnce=!0,a}},update:{get:function(){return this.set}},twoWay:{get:function(){return this.bothWays}},pipe:{get:function(){return this.chainTo}}});p=function(a){t.isObject(a)||t.isFunction(a)||oa(a);t.isBindingInterface(a)&&
(a=a.object);this.stage=1;return this.setObject(a)};g=function(a,b,c){return D(this.subs[this.subs.length-1]).to(a,b,c)};w=function(a){this._.setValue(a);return this};y=function(a){t.isFunction(a)?this._.setSelfTransform(a,this.options.updateOnBind):V("fnOnly",1);return this};A=function(a){this._.addModifierFn("transformFn",this.subs.slice(-1),a,this.options.updateOnBind);return this};z=function(a){this._.addModifierFn("transformFn",this.subs,a,this.options.updateOnBind);return this};n=function(a){this._.addModifierFn("conditionFn",
this.subs.slice(-1),a);return this};m=function(a){this._.addModifierFn("conditionFn",this.subs,a);return this};h=function(a){var b,c,e,d,f,k;e=this.subs[this.subs.length-1];k=e._;c=this._.isMulti?this._.bindings:[this._];k.addSub(this._,e.options);e=0;for(d=c.length;e<d;e++)b=c[e],f=b.subsMeta[k.ID].transformFn,b=b.subsMeta[k.ID].conditionFn,(f||a)&&(f=t.isFunction(a)?a:f)&&!1!==a&&(k.subsMeta[this._.ID].transformFn=f),b&&(k.subsMeta[this._.ID].conditionFn=b);return this};F=function(a){var b,c,e,
d;e=this.subs;b=0;for(c=e.length;b<c;b++)d=e[b],this._.removeSub(d._,a);return this};r=function(a){this._.addPollInterval(a);return this};v=function(){this._.removePollInterval();return this};x=function(a,b){this._.subsMeta[this.subs[this.subs.length-1]._.ID].opts[a]=b;return this};f=function(a,b,c){var e,d,f;a.selector=a.selector.slice(6);aa(this,this["interface"]=a);this.isMulti=!0;this.bindings=e=[];if(b)for(a=0,d=b.length;a<d;a++)f=b[a],this.addBinding(f,c);return Object.defineProperties(this,
{type:{get:function(){return e.map(function(a){return a.type})}},value:{get:function(){return e.map(function(a){return a.value})}}})};ha=f.prototype=Object.create(d);Object.keys(b.prototype).forEach(function(a){return ha[a]=function(b,c,e,d){var f,k,g,B;B=this.bindings;k=0;for(g=B.length;k<g;k++)f=B[k],"updateSub"===a&&(c=f),f[a](b,c,e,d)}});ha.addBinding=function(a,b){this.bindings.push(b?this.createBinding(a,b,this["interface"]):a)};return null!=("undefined"!==typeof a&&null!==a?a.exports:void 0)?
a.exports=D:"function"===typeof define&&define.amd?define(["simplybind"],function(){return D}):this.SimplyBind=D})();return a.exports}.call(this,{});y=function(b){var a;h.object(b)||(b={});null==b.type&&(b.type="text");G.appended||G();a=Object.create(m[b.type].prototype);return m.call(a,b)};y.registerField=function(b,a){var c,e,d,f;if(h.string(b)&&h.object(a)){d=Object.create(m.prototype);for(e in a)c=a[e],e="_"===e[0]?e.slice(1):e,n.includes(S,e)&&"validate"!==e&&(e="_"+e),d[e]=c;c=0;for(e=S.length;c<
e;c++)if(f=S[c],!d["_"+f]||d[f])throw Error("Field Registration: '"+f+"' is required in order to register the field");return m[b]=d}};Object.defineProperty(y,"fields",{get:function(){return A.clone.own.notKeys("instances")(m)}});null==this.console&&(this.console={});null==console.log&&(console.log=function(){});null==console.warn&&(console.warn=console.log);S=["_construct","_createElements","_attachBindings","_validate"];x=null!=document.createElement("div").style.animation?"":"-webkit-";F="@"+x+
"keyframes checkmarkAnimateSuccessTip { 0%, 54% { width: 0; left: 0px; top: 3px } 70% { width: 14px; left: -2px; top: 8px } 84% { width: 5px; left: 5px; top: 10px } 100% { width: 8px; left: 3px; top: 10px } } @"+x+"keyframes checkmarkAnimateSuccessLong { 0%, 65% { width: 0; right: 12px; top: 12px } 84% { width: 14px; right: 0px; top: 7px } 100% { width: 12px; right: 2px; top: 8px } } @"+x+"keyframes checkmarkAnimateError { 0%, 65% { "+x+"transform: scale(0.4); opacity: 0 } 84% { "+x+"transform: scale(1.15) } 100% { "+
x+"transform: scale(1) } } @"+x+"keyframes checkmarkRotatePlaceholder { 0%, 5% { "+x+"transform: rotate(-45deg) } 12%, 100% { "+x+"transform: rotate(-405deg) } } @"+x+"keyframes fieldErrorShake { 0%, 50% { "+x+"transform: translateX(-10px) } 25%, 75% { "+x+"transform: translateX(10px) } 100% { "+x+"transform: translateX(0px) } }";G=function(){var b;b=document.createElement("style");b.innerHTML=F;document.body.appendChild(b);return G.appended=b};x={checkmark:f.template(["*svg",{attrs:{width:"12px",
height:"12px",viewBox:"5 7 12 12",tabindex:-1,focusable:!1},style:{width:"9px",height:"9px"}},["*polyline",{attrs:{"stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"7 13.8888889 9.66666667 17 15 9",tabindex:-1,focusable:!1}}]]),angleDown:f.template(["*svg",{attrs:{width:"1792px",height:"1792px",viewBox:"0 0 1792 1792",tabindex:-1,focusable:!1},style:{width:"100%",height:"100%",outline:"none"}},["*path",{attrs:{tabindex:-1,focusable:!1,d:"M1395 736q0 13-10 23l-466 466q-10 10-23 10t-23-10l-466-466q-10-10-10-23t10-23l50-50q10-10 23-10t23 10l393 393 393-393q10-10 23-10t23 10l50 50q10 10 10 23z"}}]]),
caretUp:f.template(["*svg",{attrs:{viewBox:"0 0 512 512",tabindex:-1,focusable:!1},style:{width:"100%",height:"100%"}},["*path",{attrs:{tabindex:-1,focusable:!1,d:"M402 347c0 5-2 10-5 13-4 4-8 6-13 6h-256c-5 0-9-2-13-6-3-3-5-8-5-13s2-9 5-12l128-128c4-4 8-6 13-6s9 2 13 6l128 128c3 3 5 7 5 12z"}}]]),caretDown:f.template(["*svg",{attrs:{viewBox:"0 0 512 512",tabindex:-1,focusable:!1},style:{width:"100%",height:"100%"}},["*path",{attrs:{tabindex:-1,focusable:!1,d:"M402 201c0 5-2 9-5 13l-128 128c-4 4-8 5-13 5s-9-1-13-5l-128-128c-3-4-5-8-5-13s2-9 5-13c4-3 8-5 13-5h256c5 0 9 2 13 5 3 4 5 8 5 13z"}}]])};
h.field=function(b){return b instanceof m};h.regex=function(b){return b instanceof RegExp};W=/^\d$/;I=/^[a-zA-Z]$/;N=/^[0-9\!#\$\%\*\+\/\=\?\^\{\|\}\(\)\~\-\.]$/;Q=/^[0-9A-Za-z\!#\$\%\&\'\*\+\/\=\?\^\_\`\{\|\}\(\)\~\-\ ]$/;n={includes:function(b,a){return b&&-1!==b.indexOf(a)},removeItem:function(b,a){var c;c=b.indexOf(a);if(-1!==c)return b.splice(c,1)},hexToRGBA:function(b,a){var c,e,d;"#"===b[0]&&(b=b.slice(1));d=parseInt(b.slice(0,2),16);e=parseInt(b.slice(2,4),16);c=parseInt(b.slice(4,6),16);
return"rgba("+d+", "+e+", "+c+", "+a+")"},unlockScroll:function(b){window._isLocked=!1;return f(window).off("wheel.lock")},lockScroll:function(b){if(!window._isLocked)return window._isLocked=!0,f(window).on("wheel.lock",function(a){if(a.target===b.raw||f(a.target).parentMatching(function(a){return a===b})){if(0<a.wheelDelta&&0===b.raw.scrollTop||0>a.wheelDelta&&b.raw.scrollHeight-b.raw.scrollTop===b.raw.clientHeight)return a.preventDefault()}else return a.preventDefault()})},fuzzyMatch:function(b,
a,c){var e,d,f,h,g;h=b.length;e=a.length;c||(b=b.toUpperCase(),a=a.toUpperCase());if(h>e)return!1;if(h===e)return b===a;for(f=c=d=0;f<h;)for(g=b[f++];c<e;)if(a[c++]===g){d++;break}return d===h},getIndexOfFirstDiff:function(b,a){var c,e;c=0;for(e=Math.max(b.length,a.length);c<e;){if(b[c]!==a[c])return c;c++}return null},testCondition:function(b){var a,c,e;if(!b||!b.target)throw Error("Invalid condition provided: "+JSON.stringify(b));if(!b.target.state.visible)return!1;a=function(){switch(!1){case !h.objectPlain(b.value):return b.value;
case !h.regex(b.value):return{$regex:b.value};case !("valid"===b.value&&!b.property||!h.defined(b.value)):return"valid";default:return{$eq:b.value}}}();if("valid"===a)return b.target.validate();e=function(){var a,c;c=b.property.split(".");switch(!1){case 1!==c.length:return b.target[b.property];case !h.defined(b.target[b.property]):return b.target[b.property];default:for(a=b.target;h.object(a);)a=a[c.pop()];return a}}();c=Object.keys(a);return c.filter(function(b){var c;c=a[b];switch(b){case "$eq":return e===
c;case "$ne":return e!==c;case "$gt":return e>c;case "$gte":return e>=c;case "$lt":return e<c;case "$lte":return e<=c;case "$ct":return n.includes(e,c);case "$nct":return!n.includes(e,c);case "$regex":return c.test(e);case "$nregex":return!c.test(e);case "$mask":return n.testMask(e,c);default:return!1}}).length===c.length},validateConditions:function(b){var a;if(b)return a=b.filter(function(a){return n.testCondition(a)}),a.length===b.length},initConditions:function(b,a,c){return setTimeout(function(e){return function(){a.forEach(function(a){var e;
if(e=h.string(a.target)?b.allFields[a.target]:h.field(a.target)?a.target:void 0)a.target=e;else return console.warn("Condition target not found for the provided ID '"+a.target+"'",b);a=h.array(e.value)?"array:value":"value";return d(a,{updateOnBind:!1}).of(e).and("visible").of(e.state).to(c)});return c()}}(this))}};p=function(b,a){this.options=b;this.field=a;this.isOpen=!1;this.settings=A.deep.clone.keys(this._defaults).filter(this._settingFilters)(this._defaults,this.field.settings.dropdownOptions);
this.selected=this.settings.multiple?[]:null;this.currentHighlighted=this.lastSelected=null;this.visibleOptionsCount=0;this.visibleOptions=[];this.els={};this._createElements();this._attachBindings();return this};p.prototype._templates={container:f.template(["div",{style:{position:"absolute",zIndex:10,overflow:"hidden",top:function(b){return"text"===b.field.type?this.parent.raw.style.height:"-7px"},left:function(){return 0>this.parent.rect.left-5?0:-5},display:"none",backgroundColor:"#f6f6f6",boxShadow:"0px 6px 10px "+
n.hexToRGBA("000000",.32),borderWidth:"1px",borderStyle:"solid",borderColor:"#d1d1d1",borderRadius:"5px",boxSizing:"border-box",padding:"4px 0",$isOpen:{$hasVisibleOptions:{display:"block"}}}}]),list:f.template(["div",{passStateToChildren:!1,style:{position:"relative",overflow:"scroll",overflowScrolling:"touch"}}]),option:f.template(["div",{style:{display:"none",fontSize:"0",color:"#000000",userSelect:"none",cursor:"pointer",$visible:{display:"block"},$hover:{color:"#ffffff",backgroundColor:"#4C96FF"}}},
f.template(["div",{style:{display:"inline-block",verticalAlign:"top",width:"20px",lineHeight:"20px",fontSize:"13px",textAlign:"center",color:"inherit",stroke:"currentColor",visibility:"hidden",$selected:{visibility:"visible"}}},x.checkmark]),f.template(["div",{style:{display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordWrap:"normal",maxWidth:function(){return"calc(100% - "+this.prev.raw.style.width+")"},paddingRight:"10px",lineHeight:"20px",fontSize:"11px",fontFamily:"system-ui",
color:"inherit",boxSizing:"border-box"}}])]),scrollIndicatorUp:f.template(["div",{style:{position:"absolute",top:0,left:0,display:"none",width:"100%",height:"20px",backgroundColor:"#f6f6f6",color:"#000000",textAlign:"center",$visible:{display:"block"}}},["div",{style:{position:"absolute",top:"50%",left:0,right:0,width:"15px",height:"15px",display:"block",margin:"0 auto",transform:"translateY(-50%)"}},x.caretUp]]),scrollIndicatorDown:f.template(["div",{style:{position:"absolute",bottom:0,left:0,display:"none",
width:"100%",height:"20px",backgroundColor:"#f6f6f6",color:"#000000",textAlign:"center",$visible:{display:"block"}}},["div",{style:{position:"absolute",top:"50%",left:0,right:0,width:"15px",height:"15px",display:"block",margin:"0 auto",transform:"translateY(-50%)"}},x.caretDown]]),help:f.template(["div",{style:{display:"none",borderTop:"2px solid rgba(0,0,0,0.05)",padding:"4px 12px 1px",color:"rgba(0,0,0,0.5)",fontWeight:"500",fontSize:"11px",userSelect:"none",$showHelp:{display:"block"}}}])};p.prototype._defaults=
{maxHeight:300,multiple:!1,storeSelected:!0,lockScroll:!0,help:"",templates:{}};p.prototype._settingFilters={maxHeight:function(b){return h.number(b)}};p.prototype._createElements=function(){var b;b={relatedInstance:this,styleAfterInsert:!0};this.els.container=this._templates.container.spawn(this.settings.templates.container,A({passStateToChildren:!1},b));this.els.list=this._templates.list.spawn(this.settings.templates.list,b).appendTo(this.els.container);this.els.help=this._templates.help.spawn(this.settings.templates.help,
b).appendTo(this.els.container);this.els.scrollIndicatorUp=this._templates.scrollIndicatorUp.spawn(this.settings.templates.scrollIndicatorUp,b).appendTo(this.els.container);this.els.scrollIndicatorDown=this._templates.scrollIndicatorDown.spawn(this.settings.templates.scrollIndicatorDown,b).appendTo(this.els.container);this.options.forEach(function(a){return function(c){c.el=a._templates.option.spawn({options:{props:{title:c.label}}},b).appendTo(a.els.list);c.el.children[1].text(c.label);c.visible=
!0;c.selected=!1;return c.unavailable=!1}}(this))};p.prototype._attachBindings=function(){d("help").of(this.settings).to("textContent").of(this.els.help.raw).and.to(function(b){return function(a){return b.els.help.state("showHelp",a)}}(this));d("visibleOptionsCount").of(this).to(function(b){return function(a){return b.els.container.state("hasVisibleOptions",!!a)}}(this));d("isOpen",{updateOnBind:!1}).of(this).to(function(b){return function(a){b.els.container.state("isOpen",a);a||(b.currentHighlighted=
null);b.settings.lockScroll&&(a?n.lockScroll(b.els.list):n.unlockScroll());if(a)return b.list_setMaxHeight(),b.list_scrollToSelected()}}(this));d("lastSelected",{updateOnBind:!1,updateEvenIfSame:!0}).of(this).to(function(b){return function(a,c){b.settings.storeSelected&&(b.settings.multiple?a.selected?(a.selected=!1,n.removeItem(b.selected,a)):(a.selected=!0,b.selected.push(a)):(a.selected=!0,a!==c&&null!=c&&(c.selected=!1),b.selected=a));return b.selectedCallback(a,c)}}(this));d("currentHighlighted").of(this).to(function(b){return function(a,
b){b&&b.el.state("hover",!1);if(a)return a.el.state("hover",!0)}}(this));d("focused").of(this.field.state).to(function(b){return function(a){return a?b.field.els.input.on("keydown.dropdownNav",function(a){if(b.isOpen)switch(a.keyCode){case 38:return a.preventDefault(),b.highlightPrev();case 40:return a.preventDefault(),b.highlightNext();case 13:return a.preventDefault(),b.selectHighlighted();case 27:return a.preventDefault(),b.isOpen=!1}}):b.field.els.input.off("keydown.dropdownNav")}}(this));d("scrollTop",
{updateEvenIfSame:!0}).of(this.els.list.raw).to(function(b){return function(a){var c;c=b.els.list.raw.scrollHeight-b.els.list.raw.clientHeight>a;b.els.scrollIndicatorUp.state("visible",0<a);return b.els.scrollIndicatorDown.state("visible",c)}}(this)).condition(function(b){return function(){return b.isOpen&&!b.settings.help&&b.els.list.raw.scrollHeight!==b.els.list.raw.clientHeight&&100<=b.els.list.raw.clientHeight}}(this)).updateOn("event:scroll").of(this.els.list.raw).updateOn("isOpen").of(this);
this.els.scrollIndicatorUp.on("mouseenter",function(b){return function(){return b.list_startScrolling("up")}}(this));this.els.scrollIndicatorUp.on("mouseleave",function(b){return function(){return b.list_stopScrolling()}}(this));this.els.scrollIndicatorDown.on("mouseenter",function(b){return function(){return b.list_startScrolling("down")}}(this));this.els.scrollIndicatorDown.on("mouseleave",function(b){return function(){return b.list_stopScrolling()}}(this));return this.options.forEach(function(b){return function(a,
c){var e;a.index=c;d("visible").of(a).to(function(a){return b.visibleOptionsCount+=a?1:-1}).and.to(function(c){a.el.state("visible",c);return c?(b.visibleOptions.push(a),b.visibleOptions.sort(function(a,b){return a.index-b.index})):n.removeItem(b.visibleOptions,a)});d("selected",{updateOnBind:!1}).of(a).to(function(b){return a.el.state("selected",b)});d("unavailable",{updateOnBind:!1}).of(a).to(function(b){return a.el.state("unavailable",b)}).and.to(function(){return b.lastSelected=a}).condition(function(c){return c&&
b.settings.multiple&&a.selected});d("event:click",{listenMethod:"on"}).of(a.el).to(function(){return b.lastSelected=a});d("event:mouseenter",{listenMethod:"on"}).of(a.el).to(function(){return b.currentHighlighted=a});if(null!=(e=a.conditions)&&e.length)return a.unavailable=!0,a.allFields=b.field.allFields,n.initConditions(a,a.conditions,function(){return a.unavailable=!n.validateConditions(a.conditions)})}}(this))};p.prototype.appendTo=function(b){return this.els.container.appendTo(b)};p.prototype.onSelected=
function(b){return this.selectedCallback=b};p.prototype.findOption=function(b,a){var c;c=this.options.filter(function(c){return b===(a?c.label:c.value)});return this.settings.multiple?c:c[0]};p.prototype.getLabelOfOption=function(b){var a;return(null!=(a=this.options.filter(function(a){return b===a.value})[0])?a.label:void 0)||""};p.prototype.highlightPrev=function(){var b;b=this.visibleOptions.indexOf(this.currentHighlighted);return 0<b?this.currentHighlighted=this.visibleOptions[b-1]:this.currentHighlighted=
this.visibleOptions[this.visibleOptions.length-1]};p.prototype.highlightNext=function(){var b;b=this.visibleOptions.indexOf(this.currentHighlighted);return b<this.visibleOptions.length-1?this.currentHighlighted=this.visibleOptions[b+1]:this.currentHighlighted=this.visibleOptions[0]};p.prototype.selectHighlighted=function(){if(this.currentHighlighted)return this.lastSelected=this.currentHighlighted};p.prototype.list_setMaxHeight=function(){var b,a,c,e;e=this.settings.maxHeight;if(b=this.els.container.parentMatching(function(a){return"visible"!==
a.style("overflow")}))c=this.els.container.rect,a=b.rect,b=c.top+this.settings.maxHeight-a.bottom,c.top>=a.bottom?console.warn("The dropdown for element '"+this.field.ID+"' cannot be displayed as it's hidden by the parent overflow"):0<b&&(c=c.height-this.els.list.rect.height,e=b-c);this.els.list.style("maxHeight",e);return this.els.list.style("minWidth",parseFloat(this.field.els.fieldInnerwrap.style("width"))+10)};p.prototype.list_scrollToSelected=function(){var b,a;if(this.selected&&!this.settings.multiple)return b=
this.selected.el.raw.offsetTop,a=this.selected.el.raw.clientHeight,this.els.list.raw.scrollTop=b-3*a};p.prototype.list_startScrolling=function(b){return this.scrollIntervalID=setInterval(function(a){return function(){return a.els.list.raw.scrollTop+="up"===b?-20:20}}(this),50)};p.prototype.list_stopScrolling=function(){return clearInterval(this.scrollIntervalID)};L="1#aA*^".split("");O=function(b,a,c){this.pattern=b;this.placeholder=a;this.guide=c;this.optionalsOffset=this.minRequiredCount=0;this.lastValid=
null;this.lastInput="";this.valid=!1;this.valueStrict=this.valueRaw=this.value="";this.prev={};this.literals=[];this.optionals=[];this.repeatables=[];this._normalizePattern();this.setValue("");return this};O.prototype._normalizePattern=function(){var b,a,c,e,d,f,h,g;f="";for(b=d=g=e=0;g<this.pattern.length;){h=this.pattern[g];switch(!1){case !a:a=!1;this.literals.push(g-d);f+=h;0===e&&b++;break;case "\\"!==h:a=!0;d++;break;case "["!==h:c=!0;d++;break;case "]"!==h:c=!1;d++;break;case "+"!==h:d++;break;
default:n.includes(L,h)?c?this.optionals.push(g-d):e++:(this.literals.push(g-d),0===e&&b++),"+"===this.pattern[g+1]&&this.repeatables.push(g-d),f+=h}g++}this.minRequiredCount=e;this.firstNonLiteral=b;return this.pattern=f};O.prototype.setValue=function(b){var a,c,e,d,f,h,g,m,p,r,x,w,v,A,y,z;c=n.getIndexOfFirstDiff(this.value,b);a=T(this.value,b);(f=1===b.length&&0===this.valueRaw.length?!1:this.value.length>b.length)||(m=b.slice(c,c+a));w=x=r="";A=this.pattern.length;d=y=0;if(!(!a&&this.value||f&&
n.includes(this.literals,c-this.optionalsOffset)&&c-this.optionalsOffset>this.firstNonLiteral)){for(;y<A;){z=y;v=this.pattern[y];e=b[d];h=n.includes(this.literals,y);g=n.includes(this.optionals,y);c=n.includes(this.repeatables,y);if(b&&!e&&!this.guide)break;switch(!1){case !h:r+=v;w+=v;v===e?n.includes(L,v)&&!f||a>=this.literals.length&&1<a&&this.valueRaw.length||d++:1===a&&b[d+1]===v&&(d+=2);y++;break;case !n.includes(L,v):if(h=e&&J(e,v)){if("A"===v||"^"===v)e=e.toUpperCase();r+=e;x+=e;if(!g&&!c||
p!==y)w+=e;p=b[d+1]&&J(b[d+1],v);d++;p&&c||y++;c&&!p&&n.includes(this.literals,y)&&b[d]!==this.pattern[y]&&d++}else 1!==a||!J(b[d+1],v)||f?(y++,!g&&this.guide&&(r+=this.placeholder,w+=this.placeholder)):g&&d++,g||d++;break;default:debugger}p=z}this.prev.value=this.value;this.prev.valueRaw=this.valueRaw;this.prev.valueStrict=this.valueStrict;this.value=r;this.valueRaw=x;this.valueStrict=w;m&&(this.lastInput=m);this.optionalsOffset=T(r,w);this.valid=this.validate(b,!0)}};O.prototype.validate=function(b,
a){var c,e,d,f,m,g,p,r;if(!h.string(b)||b.length<this.minRequiredCount)return!1;p=this.pattern.length;for(e=r=0;r<p;)switch(g=this.pattern[r],c=b[e],d=n.includes(this.literals,r),f=n.includes(this.optionals,r),m=n.includes(this.repeatables,r),!1){case !d:r++;g===c&&null!=b[e+1]&&e++;break;case !n.includes(L,g):if(c=c&&J(c,g))f=b[e+1]&&J(b[e+1],g),e++,f&&m||r++;else if(f)r++;else return a&&(this.lastValid=0>e-1?null:e-1),!1}a&&(this.lastValid=e);return!0};O.prototype.normalizeCursorPos=function(b,
a){var c,e,d,f,h,g;d=a>b;b<=this.firstNonLiteral&&(c=1<=this.firstNonLiteral-b&&!d||1===this.firstNonLiteral?1:0,b=this.firstNonLiteral+c);f=0;h=this.value.slice(0,b);g=this.valueStrict.slice(0,b);c=n.getIndexOfFirstDiff(this.value,this.prev.value);for(e=0;e<b;)h[e]!==g[e-f]&&f++,e++;if(d){if(b===this.firstNonLiteral)return b;if(n.includes(this.literals,b-1)||this.value[b-1]===this.placeholder)return b-(0===f?1:0)}else{if(null===c)return n.includes(this.literals,b-f-1)&&g[b-f-1]===this.lastInput?
b:Math.max(b-1,this.firstNonLiteral);if(n.includes(this.repeatables,b-f)||n.includes(this.repeatables,c-f))return b;if(n.includes(this.literals,b-f))return b+(0===f?1:0);if(n.includes(this.literals,c-1)&&c===b)return b+1}return b};J=function(b,a){switch(a){case "1":return W.test(b);case "#":return N.test(b);case "a":case "A":return I.test(b);case "*":case "^":return Q.test(b);default:return!1}};m=function(b){var a;this.settings=A.deep.clone.deep.transform({conditions:function(a){var b,c,d;if(h.objectPlain(a)){b=
[];for(c in a)d=a[c],b.push({target:c,value:d});return b}if(h.array(a))return a.map(function(a){return h.string(a)?{target:a}:a})},choices:function(a){var b,c,d;if(h.objectPlain(a)){c=[];for(b in a)d=a[b],c.push({label:b,value:d});return c}if(h.array(a))return a.map(function(a){return h.objectPlain(a)?a:{label:a,value:a}})},validWhenRegex:function(a){return h.string(a)?new RegExp(a):a}})(this._defaults,b);this.type=b.type;this.allFields=this.settings.fieldInstances||m.instances;this.value=null!=this.settings.defaultValue?
this.settings.defaultValue:null;this.ID=this.settings.ID||X++ +"";this.els={};this._eventCallbacks={};this.state={valid:!0,visible:!0,disabled:!1,focused:!1,hovered:!1,filled:!1,interacted:!1,showError:!1,showHelp:!1,width:"100%"};null!=(a=this.settings.conditions)&&a.length&&(this.state.visible=!1,n.initConditions(this,this.settings.conditions,function(a){return function(){return a.validateConditions()}}(this)));this.allFields[this.ID]&&"undefined"!==typeof console&&null!==console&&console.warn("Duplicate field IDs found: '"+
this.ID+"'");this._construct();this._createElements();this._attachBindings();this.els.field.onInserted(function(a){return function(){return a.emit("inserted")}}(this));return this.allFields[this.ID]=this.els.field.raw._quickField=this};m.instances=Object.create(null);X=0;Object.defineProperty(m.prototype,"valueRaw",{get:function(){return this.value}});m.prototype.appendTo=function(b){this.els.field.appendTo(b);return this};m.prototype.prependTo=function(b){this.els.field.prependTo(b);return this};
m.prototype.insertAfter=function(b){this.els.field.insertAfter(b);return this};m.prototype.insertBefore=function(b){this.els.field.insertBefore(b);return this};m.prototype.validateConditions=function(b){var a;b?a=!1:(b=this.settings.conditions,a=!0);b=n.validateConditions(b);return a?this.state.visible=b:b};m.prototype.on=function(b,a){var c;h.string(b)&&h["function"](a)&&(null==(c=this._eventCallbacks)[b]&&(c[b]=[]),this._eventCallbacks[b].push(a));return this};m.prototype.off=function(b,a){this._eventCallbacks[b]&&
(h["function"](a)?n.removeItem(this._eventCallbacks[b],a):this._eventCallbacks[b]={});return this};m.prototype.emit=function(){var b,a,c,e,d;a=arguments[0];b=2<=arguments.length?slice.call(arguments,1):[];if(this._eventCallbacks[a])for(d=this._eventCallbacks[a],c=0,e=d.length;c<e;c++)a=d[c],a.apply(null,[this].concat(slice.call(b)));return this};m.text=r=function(){return this};r.prototype=Object.create(m.prototype);r.prototype._templates={field:f.template(["div",{style:{position:"relative",display:"none",
boxSizing:"border-box",fontFamily:function(b){return b.settings.fontFamily},$visible:{display:"inline-block"},$showError:{animation:"0.2s fieldErrorShake"}}}]),fieldInnerwrap:f.template(["div",{style:{position:"relative",height:"46px",backgroundColor:"white",borderWidth:"1px",borderStyle:"solid",borderColor:"#d3d3d3",borderRadius:"2px",boxSizing:"border-box",fontFamily:"inherit",transition:"border-color 0.2s",$focus:{borderColor:"#ff9c00"},$showError:{borderColor:"#cc4820"},$disabled:{borderColor:"#d3d3d3",
backgroundColor:"#d3d3d3"}}}]),label:f.template(["div",{style:{position:"absolute",zIndex:1,top:function(b){return parseFloat(b.els.fieldInnerwrap.raw.style.height)/6},left:function(b){var a;return parseFloat(null!=(a=b.els.icon)?a.styleSafe("width"):void 0)||0},padding:"0 12px",fontFamily:"inherit",fontSize:"11px",fontWeight:600,lineHeight:"1em",color:"#909090",opacity:0,transition:"opacity 0.2s, color 0.2s",whiteSpace:"nowrap",cursor:"default",pointerEvents:"none",$filled:{opacity:1},$focus:{color:"#ff9c00"},
$showError:{color:"#cc4820"}}}]),input:f.template(["input",{type:"text",style:{position:"relative",zIndex:3,display:"inline-block",width:function(b){var a;if(!b.settings.autoWidth)return a="",b.els.icon&&(a+=" -"+b.els.icon.raw.styleSafe("width",!0)),b.els.checkmark&&(a+=" -"+b.els.checkmark.styleSafe("width",!0)),"calc(100% + ("+(a||"0px")+"))"},height:"100%",margin:"0",padding:"0 12px",backgroundColor:"transparent",appearance:"none",border:"none",outline:"none",fontFamily:"inherit",fontSize:"14px",
lineHeight:function(){return this.parent.raw.style.height},color:"#181818",boxSizing:"border-box",whiteSpace:"nowrap",transform:"translateY(0)",transition:"transform 0.2s, -webkit-transform 0.2s",$filled:{$hasLabel:{transform:function(b){return"translateY("+parseFloat(b.els.fieldInnerwrap.style("height"))/8+"px)"}}},$showCheckmark:{padding:"0 44px 0 12px"}}}]),placeholder:f.template(["div",{style:{position:"absolute",zIndex:2,top:"0px",left:function(b){var a;return(null!=(a=b.els.icon)?a.styleSafe("width"):
void 0)||0},lineHeight:function(){return this.parent.raw.style.height},padding:function(b){return b.els.input.styleSafe("padding")},fontFamily:function(b){return b.els.input.styleSafe("fontFamily")},fontSize:function(b){return b.els.input.styleSafe("fontSize")},color:"#181818",opacity:.5,userSelect:"none",whiteSpace:"nowrap",transform:"translateY(0)",transition:"transform 0.2s, -webkit-transform 0.2s",$filled:{visibility:"hidden",$hasLabel:{transform:function(b){return"translateY("+parseFloat(b.els.fieldInnerwrap.style("height"))/
8+"px)"}}}}}]),help:f.template(["div",{style:{position:"absolute",top:function(b){return parseFloat(this.parent.raw.style.height)+4+"px"},left:"0px",fontFamily:"inherit",fontSize:"11px",color:"#909090",display:"none",$showError:{color:"#cc4820",display:"block"},$showHelp:{display:"block"}}}]),checkmark:f.template(["div",{style:{position:"relative",zIndex:4,display:"none",width:"38px",height:"100%",paddingTop:function(){return parseFloat(this.parent.raw.style.height)/2-13},paddingRight:"12px",verticalAlign:"top",
boxSizing:"border-box",$filled:{display:"inline-block"}}},["div",{style:{width:"20px",height:"20px",borderRadius:"50%",backgroundColor:"white",borderWidth:"3px",borderStyle:"solid",borderColor:"#72c322",transform:"scale(0.8)",$showError:{borderColor:"#cc4820"}}},["div",{style:{position:"absolute",top:"-4px",left:"-10px",width:"15px",height:"30px",borderRadius:"30px 0 0 30px",backgroundColor:function(){return this.parent.raw.style.backgroundColor},transform:"rotate(-45deg)",transformOrigin:"15px 15px 0"}}],
["div",{style:{position:"absolute",top:"-5px",left:"8px",width:"15px",height:"30px",borderRadius:"0 30px 30px 0",backgroundColor:function(){return this.parent.raw.style.backgroundColor},transform:"rotate(-45deg)",transformOrigin:"0 15px 0",$filled:{animation:"4.25s ease-in checkmarkRotatePlaceholder",$invalid:{animation:""}}}}],["div",{style:{$filled:{$invalid:{position:"relative",zIndex:2,animation:"0.55s checkmarkAnimateError",transformOrigin:"50% 10px"}}}},["div",{style:{position:"absolute",zIndex:2,
top:"10px",left:"3px",display:"block",width:"8px",height:"3px",borderRadius:"2px",backgroundColor:"#72c322",transform:"rotate(45deg)",$filled:{animation:"0.75s checkmarkAnimateSuccessTip"},$invalid:{backgroundColor:"#cc4820",left:"4px",top:"8px",width:"12px",$filled:{animation:""}}}}],["div",{style:{position:"absolute",zIndex:2,top:"8px",right:"2px",display:"block",width:"12px",height:"3px",borderRadius:"2px",backgroundColor:"#72c322",transform:"rotate(-45deg)",$filled:{animation:"0.75s checkmarkAnimateSuccessLong"},
$invalid:{backgroundColor:"#cc4820",top:"8px",left:"4px",right:"auto",$filled:{animation:""}}}}]],["div",{style:{position:"absolute",zIndex:2,top:"-4px",left:"-3px",width:"20px",height:"20px",borderRadius:"50%",borderWidth:"3px",borderStyle:"solid",borderColor:n.hexToRGBA("#72c322",.4),$invalid:{borderColor:n.hexToRGBA("#cc4820",.4)}}}],["div",{style:{position:"absolute",zIndex:1,top:"-2px",left:"6px",width:"4px",height:"28px",backgroundColor:function(){return this.parent.raw.style.backgroundColor},
transform:"rotate(-45deg)"}}]]])};r.prototype._defaults={mask:!1,maskPlaceholder:" ",maskGuide:!0,placeholder:!0,label:!1,alwaysShowHelp:!1,validWhenIsChoice:!1,validWhenRegex:!1,autoWidth:!1,checkmark:!0,defaultValue:"",help:"",keyboard:"text",fontFamily:"system-ui",templates:{},dropdownOptions:{storeSelected:!1,lockScroll:!1},choices:null};r.prototype._construct=function(){this.state.typing=!1;this.cursor={prev:0,current:0};this.helpMessage=this.settings.alwaysShowHelp?this.settings.help:"";if(!this.settings.mask){var b=
this.settings,a;a:{switch(this.settings.keyboard){case "number":case "phone":case "tel":a="1+";break a;case "email":a="*+@*+.aa+";break a}a=void 0}b.mask=a}this.settings.mask&&(this.mask=new O(this.settings.mask,this.settings.maskPlaceholder,this.settings.maskGuide))};r.prototype._createElements=function(){var b,a;b={relatedInstance:this,styleAfterInsert:!0};this.els.field=this._templates.field.spawn(this.settings.templates.field,b);this.els.fieldInnerwrap=this._templates.fieldInnerwrap.spawn(this.settings.templates.fieldInnerwrap,
b).appendTo(this.els.field);this.els.label=this._templates.label.spawn(this.settings.templates.label,b).prependTo(this.els.field);this.els.input=this._templates.input.spawn(this.settings.templates.input,b);this.els.placeholder=this._templates.placeholder.spawn(this.settings.templates.placeholder,b);this.els.help=this._templates.help.spawn(this.settings.templates.help,b);this.settings.choices&&(this.dropdown=new p(this.settings.choices,this),this.dropdown.appendTo(this.els.fieldInnerwrap));this.settings.icon&&
(h.string(this.settings.icon)&&(a=this.settings.icon),this.els.icon=this._templates.icon.spawn(this.settings.templates.icon,b,a).insertBefore(this.els.label));this.settings.checkmark&&(this.els.checkmark=this._templates.checkmark.spawn(this.settings.templates.checkmark,b).appendTo(this.els.fieldInnerwrap),this.els.input.insertBefore(this.els.checkmark));this.els.help.appendTo(this.els.fieldInnerwrap);this.els.input.parent||this.els.input.insertBefore(this.els.help);this.els.input.prop("type",function(){switch(this.settings.keyboard){case "number":case "tel":case "phone":return"tel";
case "password":return"password";case "url":return"url";default:return"text"}}.call(this));this.els.placeholder.insertAfter(this.els.input);this.els.field.state("hasLabel",this.settings.label);this.els.fieldInnerwrap.raw._quickField=this.els.input.raw._quickField=this};r.prototype._attachBindings=function(){var b;b={listenMethod:"on"};d("visible").of(this.state).to(function(a){return function(b){return a.els.field.state("visible",b)}}(this));d("hovered").of(this.state).to(function(a){return function(b){return a.els.field.state("hover",
b)}}(this));d("focused").of(this.state).to(function(a){return function(b){return a.els.field.state("focus",b)}}(this));d("filled").of(this.state).to(function(a){return function(b){return a.els.field.state("filled",b)}}(this));d("disabled").of(this.state).to(function(a){return function(b){return a.els.field.state("disabled",b)}}(this));d("showError").of(this.state).to(function(a){return function(b){return a.els.field.state("showError",b)}}(this));d("showHelp").of(this.state).to(function(a){return function(b){return a.els.field.state("showHelp",
b)}}(this));d("valid").of(this.state).to(function(a){return function(b){a.els.field.state("valid",b);return a.els.field.state("invalid",!b)}}(this));d("showError",{updateOnBind:!1}).of(this.state).to(function(a){return function(b,e){switch(!1){case !h.string(b):return a.els.help.text(b);case !h.string(e):return a.els.help.text(a.helpMessage)}}}(this));d("label").of(this.settings).to("textContent").of(this.els.label.raw);d("placeholder").of(this.settings).to("textContent").of(this.els.placeholder.raw).transform(function(a){return function(b){switch(!1){case !(!0===
b&&a.settings.label):return a.settings.label;case !h.string(b):return b;default:return""}}}(this));d("helpMessage").of(this).to("textContent").of(this.els.help.raw).condition(function(a){return function(){return!a.state.showError}}(this));d("width",{updateEvenIfSame:!0}).of(this.state).to(function(a){return function(b){return(a.settings.autoWidth?a.els.input:a.els.field).style({width:b})}}(this));this.settings.autoWidth&&d("value",{updateEvenIfSame:!0,updateOnBind:!1}).of(this).to(function(a){return function(b){var c;
b?(a.els.input.style("width",0),b=a.els.input.raw.scrollWidth+2,c="absolute"===a.els.label.styleSafe("position")?a.els.label.rect.width:0):(b=a.els.placeholder.rect.width,c=0);return a.state.width=Math.max(b,c)+"px"}}(this)).updateOn("event:inserted",{listenMethod:"on"}).of(this);d("value").of(this.els.input.raw).transformSelf(function(a){return function(b){a.mask&&(a.mask.setValue(b),a.cursor.current=a.selection().start,b=a.mask.valueRaw?a.mask.value:"");return b}}(this)).to("value").of(this).bothWays();
d("value").of(this).to("valueRaw").of(this).transform(function(a){return function(b){return a.mask?a.mask.valueRaw:b}}(this));d("valueRaw").of(this).to(function(a){return function(b){a.state.filled=!!b;b&&(a.state.interacted=!0);a.state.valid=a.validate();return a.emit("input")}}(this));this.settings.mask&&d("value",{updateEvenIfSame:!0}).of(this.els.input.raw).to(function(a){return function(b){if(a.state.focused)return a._scheduleCursorReset()}}(this));this.dropdown&&(d("typing",{updateEvenIfSame:!0}).of(this.state).to(function(a){return function(b){if(b){if(a.valueRaw)return a.dropdown.isOpen=
!0,d("event:click").of(document).once.to(function(){return a.dropdown.isOpen=!1}).condition(function(b){return!f(b.target).parentMatching(function(b){return b===a.els.fieldInnerwrap})})}else return setTimeout(function(){return a.dropdown.isOpen=!1},300)}}(this)),d("valueRaw",{updateOnBind:!1}).of(this).to(function(a){return function(b){var c,d,f,h,g;h=a.dropdown.options;c=0;for(d=h.length;c<d;c++)f=h[c],g=b?n.fuzzyMatch(b,f.value):!0,f.visible!==g&&(f.visible=g);a.dropdown.isOpen&&!b&&(a.dropdown.isOpen=
!1)}}(this)),this.dropdown.onSelected(function(a){return function(b){a.value=b.label;b.value!==b.label&&(a.valueRaw=b.value);a.dropdown.isOpen=!1;return a.selection(a.els.input.raw.value.length)}}(this)));d("event:mouseenter",b).of(this.els.input).to(function(a){return function(){return a.state.hovered=!0}}(this));d("event:mouseleave",b).of(this.els.input).to(function(a){return function(){return a.state.hovered=!1}}(this));d("event:focus",b).of(this.els.input).to(function(a){return function(){a.state.focused=
!0;if(a.state.disabled)return a.blur()}}(this));d("event:blur",b).of(this.els.input).to(function(a){return function(){return a.state.typing=a.state.focused=!1}}(this));d("event:input",b).of(this.els.input).to(function(a){return function(){return a.state.typing=!0}}(this));d("event:keydown",b).of(this.els.input).to(function(a){return function(){return a.cursor.prev=a.selection().end}}(this))};r.prototype.validate=function(b){var a;null==b&&(b=this.value);switch(!1){case !(this.settings.validWhenRegex&&
h.regex(this.settings.validWhenRegex)):return this.settings.validWhenRegex.test(b);case !(this.settings.validWhenIsChoice&&null!=(a=this.settings.choices)&&a.length):return a=this.settings.choices.filter(function(a){return a.value===b}),!!a.length;case !this.mask:return this.mask.validate(b);default:return!!b}};r.prototype._scheduleCursorReset=function(){var b,a;n.getIndexOfFirstDiff(this.mask.value,this.mask.prev.value);b=this.cursor.current;a=this.mask.normalizeCursorPos(b,this.cursor.prev);a!==
b&&this.selection(a)};r.prototype.selection=function(b){var a,c;h.object(b)?(c=b.start,a=b.end):c=b;if(null!=c){if(!a||a<c)a=c;this.els.input.raw.setSelectionRange(c,a)}else return{start:this.els.input.raw.selectionStart,end:this.els.input.raw.selectionEnd}};r.prototype.focus=function(){return this.els.input.raw.focus()};r.prototype.blur=function(){return this.els.input.raw.blur()};m.select=v=function(){return this};v.prototype=Object.create(m.prototype);v.prototype._templates={field:f.template(["div",
{style:A.clone(r.prototype._templates.field.options.style)}]),fieldInnerwrap:f.template(["div",{style:A.clone(r.prototype._templates.fieldInnerwrap.options.style)}]),label:f.template(["div",{style:A.clone(r.prototype._templates.label.options.style)}]),input:f.template(["div",{props:{tabIndex:0},style:A.clone(r.prototype._templates.input.options.style,{userSelect:"none"})}]),placeholder:f.template(["div",{style:A.clone(r.prototype._templates.placeholder.options.style)}]),caret:f.template(["div",{style:{position:"relative",
zIndex:3,top:function(b){return parseFloat(b.els.input.style("height"))/2-8.5},display:"inline-block",width:"29px",height:"17px",paddingRight:"12px",boxSizing:"border-box",verticalAlign:"top",outline:"none",pointerEvents:"none"}},x.caretDown]),help:f.template(["div",{style:A.clone(r.prototype._templates.help.options.style)}])};v.prototype._defaults={placeholder:!0,label:!1,alwaysShowHelp:!1,validWhenIsChoice:!1,validWhenRegex:!1,validWhenChoseMin:Infinity,autoWidth:!1,defaultValue:"",help:"",fontFamily:"system-ui",
templates:{},labelFilter:null,choices:[],multiple:!1,dropdownOptions:{}};v.prototype._construct=function(){var b;if(null==(b=this.settings.choices)||!b.length)throw Error("Choices were not provided for choice field '"+(this.settings.label||this.ID)+"'");this.settings.defaultValue||(this.value=this.settings.multiple?[]:null);this.state.showHelp=this.settings.alwaysShowHelp?this.settings.help:!1;if(this.settings.dropdownOptions.multiple=this.settings.multiple)this.settings.dropdownOptions.help="Tip: press ESC to close this menu"};
v.prototype._createElements=function(){var b;b={relatedInstance:this,styleAfterInsert:!0};this.els.field=this._templates.field.spawn(this.settings.templates.field,b);this.els.fieldInnerwrap=this._templates.fieldInnerwrap.spawn(this.settings.templates.fieldInnerwrap,b).appendTo(this.els.field);this.els.label=this._templates.label.spawn(this.settings.templates.label,b).prependTo(this.els.field);this.els.input=this._templates.input.spawn(this.settings.templates.input,b).appendTo(this.els.fieldInnerwrap);
this.els.placeholder=this._templates.placeholder.spawn(this.settings.templates.placeholder,b).appendTo(this.els.fieldInnerwrap);this.els.help=this._templates.help.spawn(this.settings.templates.help,b).appendTo(this.els.fieldInnerwrap);this.els.caret=this._templates.caret.spawn(this.settings.templates.caret,b).appendTo(this.els.fieldInnerwrap);this.els.checkmark=this.els.caret;this.dropdown=new p(this.settings.choices,this);this.dropdown.appendTo(this.els.fieldInnerwrap);this.settings.label&&(this.els.label.text(this.settings.label),
this.els.field.state("hasLabel",!0));this.els.fieldInnerwrap.raw._quickField=this.els.input.raw._quickField=this};v.prototype._attachBindings=function(){var b;b={listenMethod:"on"};d("visible").of(this.state).to(function(a){return function(b){return a.els.field.state("visible",b)}}(this));d("hovered").of(this.state).to(function(a){return function(b){return a.els.field.state("hover",b)}}(this));d("focused").of(this.state).to(function(a){return function(b){return a.els.field.state("focus",b)}}(this));
d("filled").of(this.state).to(function(a){return function(b){return a.els.field.state("filled",b)}}(this));d("disabled").of(this.state).to(function(a){return function(b){return a.els.field.state("disabled",b)}}(this));d("showError").of(this.state).to(function(a){return function(b){return a.els.field.state("showError",b)}}(this));d("showHelp").of(this.state).to(function(a){return function(b){return a.els.field.state("showHelp",b)}}(this));d("valid").of(this.state).to(function(a){return function(b){a.els.field.state("valid",
b);return a.els.field.state("invalid",!b)}}(this));d("showHelp").of(this.state).to("textContent").of(this.els.help.raw).transform(function(a){return a?a:""}).condition(function(a){return function(){return!a.state.showError}}(this));d("showError",{updateOnBind:!1}).of(this.state).to(function(a){return function(b,e){switch(!1){case !h.string(b):return a.els.help.text(b);case !h.string(e):return a.els.help.text(a.state.showError)}}}(this));d("placeholder").of(this.settings).to("textContent").of(this.els.placeholder.raw).transform(function(a){return function(b){switch(!1){case !(!0===
b&&a.settings.label):return a.settings.label;case !h.string(b):return b;default:return""}}}(this));d("width",{updateEvenIfSame:!0}).of(this.state).to(function(a){return function(b){return(a.settings.autoWidth?a.els.input:a.els.field).style({width:b})}}(this));this.settings.autoWidth&&setTimeout(function(a){return function(){return d("valueLabel",{updateEvenIfSame:!0,updateOnBind:!1}).of(a).to(function(b){var c;b?(a.els.input.style("width",0),b=a.els.input.raw.scrollWidth+2,c="absolute"===a.els.label.styleSafe("position")?
a.els.label.rect.width:0):(b=a.els.placeholder.rect.width,c=0);return a.state.width=Math.max(b,c)+"px"}).updateOn("event:inserted",{listenMethod:"on"}).of(a)}}(this));d("array:selected",{updateOnBind:!1}).of(this.dropdown).to("value").of(this).transform(function(a){return function(b){return b?a.settings.multiple?b.map(function(a){return a.value}):b.value:b}}(this));d("value").of(this).to("array:selected").of(this.dropdown).transform(function(a){return function(b){return a.settings.multiple?b?b.map(function(b){return a.dropdown.findOption(b)}).filter(function(a){return a}):
[]:b?a.dropdown.findOption(b):null}}(this));d("value").of(this).to("valueLabel").of(this).transform(function(a){return function(b){switch(!1){case !a.settings.multiple:return b.map(a.dropdown.getLabelOfOption.bind(a.dropdown)).join(", ");case "string"===typeof b:return"";default:return a.dropdown.getLabelOfOption(b)}}}(this));d("valueLabel").of(this).to("textContent").of(this.els.input.raw).transform(function(a){return function(b){return a.settings.labelFormat?a.settings.labelFormat(b):b}}(this)).and.to(function(a){return function(b){a.state.filled=
!!b;b&&(a.state.interacted=!0);return a.state.valid=a.validate()}}(this));d("array:value",{updateOnBind:!1}).of(this).to(function(a){return function(){return a.emit("input")}}(this));d("event:click",b).of(this.els.input).to(function(a){return function(){var b,e;if(!a.state.disabled)return a.dropdown.isOpen=!0,b=d("event:click").of(document).once.to(function(){return a.dropdown.isOpen=!1}).condition(function(b){return!f(b.target).parentMatching(function(b){return b===a.els.fieldInnerwrap})}),e=d("event:keydown").of(document).once.to(function(){return a.dropdown.isOpen=
!1}).condition(function(a){return 27===a.keyCode}),d("isOpen",{updateOnBind:!1}).of(a.dropdown).once.to(function(){b.unBind();return e.unBind()}).condition(function(a){return!a})}}(this));d("focused",{updateOnBind:!1}).of(this.state).to(function(a){return function(b){var c;return b?(c=[32,37,38,39,40],a.els.input.on("keydown.dropdownTrigger",function(b){var d;if(n.includes(c,b.keyCode)&&!a.dropdown.isOpen)return a.dropdown.isOpen=!0,null!=(d=a.dropdown.lastSelected)&&d.selected&&(a.dropdown.currentHighlighted=
a.dropdown.lastSelected),b.preventDefault();if(9===b.keyCode&&a.dropdown.isOpen)return b.preventDefault()})):a.els.input.off("keydown.dropdownTrigger")}}(this));this.dropdown.onSelected(function(a){return function(b){if(!a.settings.multiple)return a.dropdown.isOpen=!1}}(this));d("event:mouseenter",b).of(this.els.input).to(function(a){return function(){return a.state.hovered=!0}}(this));d("event:mouseleave",b).of(this.els.input).to(function(a){return function(){return a.state.hovered=!1}}(this));d("event:focus",
b).of(this.els.input).to(function(a){return function(){a.state.focused=!0;if(a.state.disabled)return a.blur()}}(this));d("event:blur",b).of(this.els.input).to(function(a){return function(){return a.state.focused=!1}}(this))};v.prototype.validate=function(b){var a,c;null==b&&(b=this.value);switch(!1){case !(this.settings.validWhenRegex&&h.regex(this.settings.validWhenRegex)):switch(!1){case !this.settings.multiple:return function(a){return function(){var c;if(0===b.length)return!1;c=b.filter(function(b){return a.settings.validWhenRegex.test(b)});
return Infinity!==a.settings.validWhenChoseMin&&h.number(a.settings.validWhenChoseMin)?c.length>=a.settings.validWhenChoseMin:c.length===b.length}}(this)();default:return this.settings.validWhenRegex.test(b)}case !(this.settings.validWhenIsChoice&&null!=(a=this.settings.choices)&&a.length):return a=this.settings.choices.filter(function(a){return a.value===b}),!!a.length;case !(this.settings.multiple&&-1>(c=this.settings.validWhenChoseMin)&&Infinity>c):return b.length>=this.settings.validWhenChoseMin;
case !this.settings.multiple:return b.length;default:return!!b}};v.prototype.focus=function(){return this.els.input.raw.focus()};v.prototype.blur=function(){return this.els.input.raw.blur()};m.choice=v=function(){return this};v.prototype=Object.create(m.prototype);v.prototype._templates={field:f.template(["div",{style:{position:"relative",display:"none",width:function(b){return b.state.width},boxSizing:"border-box",fontFamily:function(b){return b.settings.fontFamily},$visible:{$hasVisibleOptions:{display:"inline-block"}},
$showError:{animation:"0.2s fieldErrorShake"}}}]),fieldInnerwrap:f.template(["div",{style:{position:"relative",boxSizing:"border-box",fontFamily:"inherit"}}]),label:f.template(["div",{style:{display:"none",marginBottom:"12px",fontFamily:"inherit",fontSize:"13px",fontWeight:600,textAlign:"left",color:"#181818",cursor:"default",pointerEvents:"none",$hasLabel:{display:"block"},$focus:{color:"#ff9c00"},$showError:{color:"#cc4820"}}}]),choiceGroup:f.template(["div",{style:{marginBottom:function(b){return b.settings.spacing},
userSelect:"none",fontSize:"0"}}]),choice:f.template(["div",{style:{position:"relative",display:"inline-block",width:function(b){return"calc((100% - "+b.settings.spacing*(b.settings.perGroup-1)+"px) / "+b.settings.perGroup+")"},marginLeft:function(b){if(this.index)return"calc(100% - (100% - "+b.settings.spacing+"px))"},padding:"0 12px",borderRadius:"2px",backgroundColor:"white",fontFamily:"inherit",textAlign:"center",color:"#181818",boxSizing:"border-box",verticalAlign:"top",cursor:"pointer",$selected:{color:"#ff9c00"},
$unavailable:{display:"none"}}},["div",{style:{position:"absolute",zIndex:2,top:"0",left:"0",width:"100%",height:"100%",borderWidth:"1px",borderStyle:"solid",borderColor:"#d3d3d3",borderRadius:"2px",boxSizing:"border-box",$selected:{borderColor:"inherit",borderWidth:"2px"},$disabled:{backgroundColor:"#d3d3d3"}}}]]),choiceLabel:f.template(["div",{style:{position:"relative",display:"block",padding:"15px 0px",fontFamily:"inherit",fontSize:"14px",fontWeight:"500"}}]),choiceIcon:f.template(["div",{style:{position:"absolute",
top:"50%",display:"block",fontSize:"20px",opacity:.16,transform:"translateY(-50%)"}}]),help:f.template(["div",{style:{marginTop:"10px",fontFamily:"inherit",fontSize:"11px",color:"#909090",display:"none",$showError:{color:"#cc4820",display:"block"},$showHelp:{display:"block"}}}])};v.prototype._defaults={label:!1,alwaysShowHelp:!1,validWhenSelected:!1,validWhenIsChoice:!1,showSelectAll:!1,perGroup:7,spacing:8,defaultValue:"",help:"",fontFamily:"system-ui",templates:{},choices:[]};v.prototype._construct=
function(){var b;if(null==(b=this.settings.choices)||!b.length)throw Error("Choices were not provided for choice field '"+(this.settings.label||this.ID)+"'");this.settings.defaultValue||(this.value=this.settings.multiple?[]:null);this.lastSelected=null;this.visibleOptionsCount=0;this.choices=this.settings.choices;this.settings.perGroup=Math.min(this.settings.perGroup,this.choices.length+(this.settings.multiple&&this.settings.showSelectAll?1:0))};v.prototype._createElements=function(){var b,a,c;a=
{relatedInstance:this,styleAfterInsert:!0};this.els.field=this._templates.field.spawn(this.settings.templates.field,a);this.els.fieldInnerwrap=this._templates.fieldInnerwrap.spawn(this.settings.templates.fieldInnerwrap,a).appendTo(this.els.field);this.els.label=this._templates.label.spawn(this.settings.templates.label,a).prependTo(this.els.field);this.els.help=this._templates.help.spawn(this.settings.templates.help,a);this.settings.label&&(this.els.label.text(this.settings.label),this.els.field.state("hasLabel",
!0));b=this.settings.choices;c=this.settings.perGroup;Array(Math.ceil(b.length/c)).fill().map(function(a,d){return b.slice(d*c,d*c+c)}).forEach(function(b){return function(c,d){var e;e=b._templates.choiceGroup.spawn(b.settings.templates.choiceGroup,a).appendTo(b.els.fieldInnerwrap);return c.forEach(function(c,f){c.el=b._templates.choice.spawn(b.settings.templates.choice,a).appendTo(e);c.labelEl=b._templates.choiceLabel.spawn(b.settings.templates.choiceLabel,a).appendTo(c.el);c.icon&&(c.iconEl=b._templates.choiceIcon.spawn(b.settings.templates.choiceIcon,
a).insertBefore(c.labelEl));c.el.index=f;c.el.totalIndex=f*d;c.el.prop("title",c.label);c.el.children[1].text(c.label);c.icon&&c.iconEl.append(c.label);c.visible=!0;c.selected=!1;return c.unavailable=!1})}}(this));this.els.help.appendTo(this.els.fieldInnerwrap);this.els.fieldInnerwrap.raw._quickField=this};v.prototype._attachBindings=function(){var b;b={listenMethod:"on"};d("visible").of(this.state).to(function(a){return function(b){return a.els.field.state("visible",b)}}(this));d("hovered").of(this.state).to(function(a){return function(b){return a.els.field.state("hover",
b)}}(this));d("filled").of(this.state).to(function(a){return function(b){return a.els.field.state("filled",b)}}(this));d("disabled").of(this.state).to(function(a){return function(b){return a.els.field.state("disabled",b)}}(this));d("showError").of(this.state).to(function(a){return function(b){return a.els.field.state("showError",b)}}(this));d("showHelp").of(this.state).to(function(a){return function(b){return a.els.field.state("showHelp",b)}}(this));d("valid").of(this.state).to(function(a){return function(b){a.els.field.state("valid",
b);return a.els.field.state("invalid",!b)}}(this));d("event:mouseenter",b).of(this.els.field).to(function(a){return function(){return a.state.hovered=!0}}(this));d("event:mouseleave",b).of(this.els.field).to(function(a){return function(){return a.state.hovered=!1}}(this));d("width").of(this.state).to(function(a){return function(b){return a.els.field.style({width:b})}}(this));d("showError",{updateOnBind:!1}).of(this.state).to(function(a){return function(b,d){switch(!1){case !h.string(b):return a.els.help.text(b);
case !h.string(d):return a.els.help.text(a.settings.help)}}}(this));d("visibleOptionsCount").of(this).to(function(a){return function(b){return a.els.field.state("hasVisibleOptions",!!b)}}(this));d("value").of(this).to(function(a){return function(b){a.state.filled=!(null==b||!b.length);a.state.filled&&(a.state.interacted=!0);return a.state.valid=a.validate()}}(this));d("array:value",{updateOnBind:!1}).of(this).to(function(a){return function(){return a.emit("input")}}(this));d("lastSelected",{updateOnBind:!1,
updateEvenIfSame:!0}).of(this).to(function(a){return function(b,d){if(a.settings.multiple){if(b.selected)return b.selected=!1,n.removeItem(a.value,b.value);b.selected=!0;return a.value.push(b.value)}if(b!==d)return b.selected=!0,null!=d&&(d.selected=!1),a.value=b.value}}(this));this.choices.forEach(function(a){return function(b){var c;d("visible").of(b).to(function(a){return b.el.state("visible",a)}).and.to(function(b){return a.visibleOptionsCount+=b?1:-1});d("selected",{updateOnBind:!1}).of(b).to(function(a){return b.el.state("selected",
a)});d("unavailable",{updateOnBind:!1}).of(b).to(function(a){return b.el.state("unavailable",a)}).and.to(function(){return a.lastSelected=b}).condition(function(c){return c&&a.settings.multiple&&b.selected});d("event:click",{listenMethod:"on"}).of(b.el).to(function(){return a.lastSelected=b});if(null!=(c=b.conditions)&&c.length)return b.unavailable=!0,b.allFields=a.allFields,n.initConditions(b,b.conditions,function(){return b.unavailable=!n.validateConditions(b.conditions)})}}(this))};v.prototype.validate=
function(b){var a;null==b&&(b=this.value);switch(!1){case "number"!==typeof this.settings.validWhenSelected:return(null!=b?b.length:void 0)>=this.settings.validWhenSelected;case !this.settings.validWhenIsChoice:return a=this.choices.filter(function(a){return a.value===b}),!!a.length;default:return!(null==b||!b.length)}};y.SVG=x;y.version="1.0.2";return null!=("undefined"!==typeof module&&null!==module?module.exports:void 0)?module.exports=y:"function"===typeof define&&define.amd?define(["quickfield"],
function(){return y}):this.Field=y}()}})(this)();
