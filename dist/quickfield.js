var slice=[].slice;
(function(sa){return function(){var x;x=function(x,C,K,O){O=function(h){return K[h]?C[h]:(K[h]=1,C[h]={},C[h]=x[h](C[h]))};x[3]=function(h){var m={exports:h},q=[].slice;(function(){var h;h=function(f){return function(f){var h,m,n,d,t;m=function(d){var y,h,f;y=function(d){return Array.isArray(d)};h=function(d){return d&&"[object Object]"===Object.prototype.toString.call(d)||y(d)};f=function(d,e){return e.notDeep?-1!==e.notDeep.indexOf(d):!1};return d=m=function(d,e,q){var z,n,t,b,a,c;if(!e||"object"!==
typeof e&&"function"!==typeof e)e={};z=0;for(t=q.length;z<t;z++)if(b=q[z],null!=b)for(n in b)if(a=b[n],c=e[n],!(a===e||void 0===a||null===a&&!d.allowNull||d.keys&&-1===d.keys.indexOf(n)||d.notKeys&&-1!==d.notKeys.indexOf(n)||d.own&&!b.hasOwnProperty(n)||d.globalFilter&&!d.globalFilter(a,n,b)||d.filters&&d.filters[n]&&!d.filters[n](a,n,b)))switch(d.globalTransform&&(a=d.globalTransform(a,n,b)),d.transforms&&d.transforms[n]&&(a=d.transforms[n](a,n,b)),!1){case !(d.concat&&y(a)&&y(c)):e[n]=c.concat(a);
break;case !(d.deep&&h(a)&&!f(n,d)):c=h(c)?c:y(a)?[]:{};e[n]=m(d,c,[a]);break;default:e[n]=a}return e}}({});t=function(d){var h,y,f;y={};for(h in d)f=d[h],y[h]=f;return y};d=function(d){if(d)return"object"!==typeof d||Array.isArray(d)?[].concat(d):Object.keys(d)};h=function(d){var h;h=d.target?function(){var d;d=1<=arguments.length?q.call(arguments,0):[];return m(h.options,h.options.target,d)}:function(){var d,f;f=arguments[0];d=2<=arguments.length?q.call(arguments,1):[];return m(h.options,f,d)};
h.options=d;Object.defineProperties(h,n);return h};n={deep:{get:function(){var d;d=t(this.options);d.deep=!0;return h(d)}},own:{get:function(){var d;d=t(this.options);d.own=!0;return h(d)}},allowNull:{get:function(){var d;d=t(this.options);d.allowNull=!0;return h(d)}},concat:{get:function(){var d;d=t(this.options);d.concat=!0;return h(d)}},clone:{get:function(){var d;d=t(this.options);d.target={};return h(d)}},notDeep:{get:function(){var f;f=t(this.options);return function(q){f.notDeep=d(q);return h(f)}}},
keys:{get:function(){var f;f=t(this.options);return function(q){f.keys=d(q);return h(f)}}},notKeys:{get:function(){var f;f=t(this.options);return function(q){f.notKeys=d(q);return h(f)}}},transform:{get:function(){var d;d=t(this.options);return function(f){"function"===typeof f?d.globalTransform=f:f&&"object"===typeof f&&(d.transforms=f);return h(d)}}},filter:{get:function(){var d;d=t(this.options);return function(f){"function"===typeof f?d.globalFilter=f:f&&"object"===typeof f&&(d.filters=f);return h(d)}}}};
return f=h({})}}(this)({});null!=("undefined"!==typeof m&&null!==m?m.exports:void 0)?m.exports=h:"function"===typeof define&&define.amd?define(["smart-extend"],function(){return h}):window.extend=h})();return m.exports};x[4]=function(h){var m;return m=h={defined:function(h){return void 0!==h},array:function(h){return h instanceof Array},object:function(h){return"object"===typeof h&&h},objectPlain:function(h){return m.object(h)&&"[object Object]"===Object.prototype.toString.call(h)},string:function(h){return"string"===
typeof h},number:function(h){return"number"===typeof h},"function":function(h){return"function"===typeof h},iterable:function(h){return m.object(h)&&m.number(h.length)}}};return O};x=x({},{},{});return function(){var aa,C,K,O,h,m,q,n,f,G,H,P,u,d,t,y,z,ba,J,T,e,ca,X,L,Q;m=function(b){return function(a){var b={exports:a};(function(){var a,c,d,h,f,e,n,m,q,t,u,y,A,w,z,v,B,H,C,ea,I,G,U,R;a=function(a){var b={exports:a};(function(){var a,k,c,r,d,g,l,e;r=["webkit","moz","ms","o"];g="backgroundPositionX backgroundPositionY blockSize borderWidth columnRuleWidth cx cy fontSize gridColumnGap gridRowGap height inlineSize lineHeight minBlockSize minHeight minInlineSize minWidth maxHeight maxWidth outlineOffset outlineWidth perspective shapeMargin strokeDashoffset strokeWidth textIndent width wordSpacing top bottom left right x y".split(" ");
["margin","padding","border","borderRadius"].forEach(function(a){var b,k,c,r,d;g.push(a);r=["Top","Bottom","Left","Right"];d=[];k=0;for(c=r.length;k<c;k++)b=r[k],d.push(g.push(a+b));return d});e=document.createElement("div").style;a=/^\d+(?:[a-z]|\%)+$/i;k=/\d+$/;c=/\s/;l={includes:function(a,b){return a&&-1!==a.indexOf(b)},isIterable:function(a){return a&&"object"===typeof a&&"number"===typeof a.length&&!a.nodeType},isPropSupported:function(a){return"undefined"!==typeof e[a]},toTitleCase:function(a){return a[0].toUpperCase()+
a.slice(1)},normalizeProperty:function(a){var b,k,c;if(this.isPropSupported(a))return a;c=this.toTitleCase(a);a=0;for(b=r.length;a<b;a++)if(k=r[a],k=""+k+c,this.isPropSupported(k))return k},normalizeValue:function(b,r){this.includes(g,b)&&null!==r&&(r=""+r,!k.test(r)||a.test(r)||c.test(r)||(r+="px"));return r}};d=function(a,b,k){var c,r,g;if(l.isIterable(a))for(c=0,r=a.length;c<r;c++)g=a[c],d(g,b,k);else if("object"===typeof b)for(c in b)k=b[c],d(a,c,k);else{b=l.normalizeProperty(b);if("undefined"===
typeof k)return getComputedStyle(a)[b];b&&(a.style[b]=l.normalizeValue(b,k))}};d.version="1.0.5";return null!=("undefined"!==typeof b&&null!==b?b.exports:void 0)?b.exports=d:"function"===typeof define&&define.amd?define(["quickdom"],function(){return d}):this.Css=d})();return b.exports}.call(this,{});w=x(3);u="className href selected type name id checked".split(" ");v={includes:function(a,b){return a&&-1!==a.indexOf(b)},removeItem:function(a,b){var k;k=a.indexOf(b);-1!==k&&a.splice(k,1);return a},
normalizeGivenEl:function(a){switch(!1){case !c.domNode(a):return f(a);case !c.string(a):return f.text(a);default:return a}},isStateStyle:function(a){return"$"===a[0]||"@"===a[0]}};c=x(4);c=w.clone(c,{domDoc:function(a){return a&&9===a.nodeType},domEl:function(a){return a&&1===a.nodeType},domText:function(a){return a&&3===a.nodeType},domNode:function(a){return c.domEl(a)||c.domText(a)},quickDomEl:function(a){return a instanceof e},template:function(a){return a instanceof n}});e=function(a,b){this.type=
a;this.options=b;this.el=this.options.existing||("text"===this.type?document.createTextNode(this.options.text):"*"===this.type[0]?document.createElementNS("http://www.w3.org/2000/svg",this.type.slice(1)):document.createElement(this.type));"text"===this.type&&(this.append=this.prepend=this.attr=function(){});this._parent=null;this._state=[];this._children=[];this._insertedCallbacks=[];this._eventCallbacks={__refs:{}};this._normalizeOptions();this._applyOptions();this._attachStateEvents();this._proxyParent();
return this.el._quickElement=this};Object.defineProperties(e.prototype,{raw:{get:function(){return this.el}},0:{get:function(){return this.el}},css:{get:function(){return this.style}},replaceWith:{get:function(){return this.replace}}});e.prototype.parentsUntil=function(a){return t(this,a)};e.prototype.parentMatching=function(a){var b;if(c["function"](a))for(b=this.parent;b;){if(a(b))return b;b=b.parent}};Object.defineProperties(e.prototype,{children:{get:function(){var a,b,c,d;if(this.el.childNodes.length!==
this._children.length)for(this._children.length=0,d=this.el.childNodes,b=0,c=d.length;b<c;b++)a=d[b],4>a.nodeType&&this._children.push(f(a));return this._children}},parent:{get:function(){this._parent&&this._parent.el===this.el.parentNode||c.domDoc(this.el.parentNode)||(this._parent=f(this.el.parentNode));return this._parent}},parents:{get:function(){return t(this)}},next:{get:function(){return f(this.el.nextSibling)}},prev:{get:function(){return f(this.el.previousSibling)}},nextAll:{get:function(){var a,
b;b=[];for(a=f(this.el.nextSibling);a;)b.push(a),a=a.next;return b}},prevAll:{get:function(){var a,b;b=[];for(a=f(this.el.previousSibling);a;)b.push(a),a=a.prev;return b}},siblings:{get:function(){return this.prevAll.reverse().concat(this.nextAll)}},child:{get:function(){return this._childRefs||q(this)}},childf:{get:function(){return q(this,!0)}}});t=function(a,b){var k,r;c["function"](b)||(b=void 0);r=[];for(k=a.parent;k;)r.push(k),k=k.parent,b&&b(k)&&(k=null);return r};q=function(a,b){var c;if(b||
!a._childRefs)a._childRefs={};c=a._childRefs;a.ref&&(c[a.ref]=a);a.children.length&&w.apply(null,[a._childRefs].concat(slice.call(a._children.map(function(a){return q(a,b)}))));return a._childRefs};e.prototype._normalizeOptions=function(){var a;null==(a=this.options).style&&(a.style={});this.options.styleShared={};this.options["class"]&&(this.options.className=this.options["class"]);this.options.url&&(this.options.href=this.options.url);null==(a=this.options).relatedInstance&&(a.relatedInstance=this);
null==(a=this.options).unpassableStates&&(a.unpassableStates=[]);null==(a=this.options).passStateToChildren&&(a.passStateToChildren=!0);this.options.stateTriggers=w.deep({hover:{on:"mouseenter",off:"mouseleave"},focus:{on:"focus",off:"blur"}},this.options.stateTriggers);this._normalizeStyle()};e.prototype._normalizeStyle=function(){var a,b,c,d,g;b=Object.keys(this.options.style);c=b.filter(function(a){return v.isStateStyle(a)});d=v.removeItem(c.slice(),"$base");this._mediaStates=c.filter(function(a){return"@"===
a[0]});this._providedStates=c.map(function(a){return a.slice(1)});!v.includes(c,"$base")&&b.length&&(c.length?(b=b.filter(function(a){return!v.isStateStyle(a)}),this.options.style.$base=w.clone.keys(b)(this.options.style)):this.options.style={$base:this.options.style});a=function(b){return function(c,k){var r,d,g,l,e,F;d=Object.keys(c).filter(function(a){return v.isStateStyle(a)});if(d.length)for(b.hasSharedStateStyle=!0,null==b._stateShared&&(b._stateShared=[]),g=0,l=d.length;g<l;g++)r=d[g],e=k.concat(r.slice(1)),
F=e.join("+"),b.options.styleShared[F]=b.options.style["$"+F]=c[r],a(c[r],e),delete c[r]}}(this);b=0;for(c=d.length;b<c;b++)g=d[b],a(this.options.style[g],[g.slice(1)])};e.prototype._applyOptions=function(){var a,b,c;(b=this.options.id||this.options.ref)&&this.attr("data-ref",this.ref=b);this.options.id&&(this.el.id=this.options.id);this.options.className&&(this.el.className=this.options.className);this.options.href&&(this.el.href=this.options.href);this.options.type&&(this.el.type=this.options.type);
this.options.name&&(this.el.name=this.options.name);this.options.value&&(this.el.value=this.options.value);this.options.selected&&(this.el.selected=this.options.selected);this.options.checked&&(this.el.checked=this.options.checked);if(this.options.props)for(a in c=this.options.props,c)b=c[a],this.prop(a,b);if(this.options.attrs)for(a in c=this.options.attrs,c)b=c[a],this.attr(a,b);this.options.styleAfterInsert||this.style(this.options.style.$base);this.onInserted(function(a){return function(){var b,
c;a.options.styleAfterInsert&&a.style(w.clone.apply(w,[a.options.style.$base].concat(slice.call(a._getStateStyles(a._getActiveStates())))));b=a._inserted=a;c=a._mediaStates;if(c.length)return a._mediaStates=new function(){var a,k,r;a=0;for(k=c.length;a<k;a++)r=c[a],r=r.slice(1),this[r]=d.register(b,r);return this}}}(this))};e.prototype._attachStateEvents=function(){var a,b,d,g;b=this.options.stateTriggers;a=function(a){return function(b,k){var d,r;r=c.string(k)?k:k.on;c.object(k)&&(d=k.off);a._listenTo(r,
function(){return a.state(b,!0)});if(d)return a._listenTo(d,function(){return a.state(b,!1)})}}(this);for(d in b)g=b[d],a(d,g)};e.prototype._proxyParent=function(){var a;a=void 0;return Object.defineProperty(this,"_parent",{get:function(){return a},set:function(b){var c;if(a=b)if(c=this.parents.slice(-1)[0],c.raw===document.documentElement)this._unproxyParent(b);else a.onInserted(function(c){return function(){if(a===b)return c._unproxyParent(b)}}(this))}})};e.prototype._unproxyParent=function(a){var b,
c,k;delete this._parent;this._parent=a;k=this._insertedCallbacks;b=0;for(c=k.length;b<c;b++)a=k[b],a(this)};I=/\s+/;e.prototype.on=function(a,b){var k,d;c.string(a)&&c["function"](b)&&(d=a.split("."),k=d[1],a=d[0],a.split(I).forEach(function(a){return function(c){a._eventCallbacks[c]||(a._eventCallbacks[c]=[],a._listenTo(c,function(b){var k,d,g,r;r=a._eventCallbacks[c];d=0;for(g=r.length;d<g;d++)k=r[d],k.call(a.el,b)}));k&&(a._eventCallbacks.__refs[k]=b);return a._eventCallbacks[c].push(b)}}(this)));
return this};e.prototype.off=function(a,b){var k,d;if(c.string(a))d=a.split("."),k=d[1],a=d[0],a.split(I).forEach(function(a){return function(d){if(a._eventCallbacks[d]){null==b&&(b=a._eventCallbacks.__refs[k]);if(c["function"](b))return v.removeItem(a._eventCallbacks[d],b);if(!k)return a._eventCallbacks[d].length=0}}}(this));else for(d in this._eventCallbacks)this.off(d);return this};e.prototype.emit=function(a,b,d){var k;null==b&&(b=!0);null==d&&(d=!0);a&&c.string(a)&&(k=document.createEvent("Event"),
k.initEvent(a,b,d),this.el.dispatchEvent(k));return this};e.prototype.onInserted=function(a,b){null==b&&(b=!0);if(c["function"](a))return this._inserted?b&&a(this):this._insertedCallbacks.push(a),this};e.prototype._listenTo=function(a,b){this.el[this.el.addEventListener?"addEventListener":"attachEvent"](this.el.addEventListener?a:"on"+a,b);return this};e.prototype.updateOptions=function(a){c.object(a)&&(this.options=a,this._normalizeOptions(),this._applyOptions(this.options));return this};e.prototype.state=
function(a,b,d){var k,g,r,l,e,f,F,h,E;if(1===arguments.length)return v.includes(this._state,a);if(this._statePipeTarget&&d!==this)return this._statePipeTarget.state(a,b,this),this;if(c.string(a)){"$"===a[0]&&(a=a.slice(1));r=!!b;if("base"===a)return this;g=this._getActiveStates(a,!1);k=this._getStateStyles(g);if(this.state(a)!==r){if(e=this.options.style["$"+a]||this.options.style["@"+a])E=this._providedStates.indexOf(a),g=g.filter(function(a){return function(b){return a._providedStates.indexOf(b)>
E}}(this)),f=this._getStateStyles(g);r?(this._state.push(a),e&&this.style(w.clone.keys(e).apply(null,[e].concat(slice.call(f))))):(v.removeItem(this._state,a),e&&(l=w.clone.keys(e).apply(null,[this.options.style.$base].concat(slice.call(k))),e=w.transform(function(){return null}).clone(e),this.style(w(e,l))))}if(this.hasSharedStateStyle)for(F=Object.keys(this.options.styleShared),F=F.filter(function(b){return v.includes(b,a)}),g=0,f=F.length;g<f;g++)if(h=F[g],l=h.split("+"),e=l.length===l.filter(function(b){return function(c){return c===
a||b.state(c)}}(this)).length)e=this.options.styleShared[h],r?(v.includes(this._stateShared,h)||this._stateShared.push(h),l=this.options.styleShared[v.removeItem(l,a).join("+")],this.style(w.clone(l,e))):(v.removeItem(this._stateShared,h),l=w.clone.keys(e).apply(null,[this.options.style.$base].concat(slice.call(k))),e=w.transform(function(){return null}).clone(e),this.style(w(e,l)));if(this.options.passStateToChildren&&!v.includes(this.options.unpassableStates,a))for(g=this._children,r=0,e=g.length;r<
e;r++)k=g[r],k.state(a,b,d||this);return this}};e.prototype.resetState=function(){var a,b,c,d;d=this._state.slice();b=0;for(c=d.length;b<c;b++)a=d[b],this.state(a,!1);return this};e.prototype.pipeState=function(a){var b,k,d,g;if(a){if(a=v.normalizeGivenEl(a),c.quickDomEl(a)&&a!==this)for(this._statePipeTarget=a,g=this._state,k=0,d=g.length;k<d;k++)b=g[k],a.state(b,!0)}else!1===a&&delete this._statePipeTarget;return this};e.prototype.style=function(){var b,d;if("text"!==this.type){b=arguments;if(c.string(b[0])){if(d=
a(this.el,b[0],b[1]),!c.defined(b[1]))return this._inserted?d:d?"":d}else c.object(b[0])&&a(this.el,w.allowNull.transform(function(a){return function(b){return"function"===typeof b?b.call(a,a.options.relatedInstance):b}}(this)).clone(b[0]));return this}};e.prototype.styleSafe=function(a,b){var k,d;if("text"!==this.type)return k=arguments,d=this.style(a),c.string(d)?(b&&(d=0),d||this.el.style[k[0]]||this.options.style.$base[k[0]]||""):this};e.prototype._getActiveStates=function(a,b){var c;null==b&&
(b=!0);c=this._providedStates.filter(function(b){return function(c){return v.includes(b._state,c)&&c!==a}}(this));return b&&this.hasSharedStateStyle?c.concat(this._stateShared):c};e.prototype._getStateStyles=function(a){return a.map(function(a){return function(b){return a.options.style["$"+b]||a.options.style["@"+b]}}(this))};Object.defineProperties(e.prototype,{rect:{get:function(){return this.el.getBoundingClientRect()}},width:{get:function(){return parseFloat(this.style("width"))}},height:{get:function(){return parseFloat(this.style("height"))}},
orientation:B={get:function(){return this.width>this.height?"landscape":"portrait"}},aspectRatio:y={get:function(){return this.width/this.height}}});e.prototype.attr=function(a,b){switch(b){case void 0:return this.el.getAttribute(a);case null:return this.el.removeAttribute(a);default:return this.el.setAttribute(a,b),this}};e.prototype.prop=function(a,b){switch(b){case void 0:return this.el[a];default:return this.el[a]=b,this}};e.prototype.toTemplate=function(){return f.template(this)};e.prototype.clone=
function(){var a,b,c,d,g,l,f;c=this.el.cloneNode(!1);c=w.clone(this.options,{existing:c});c=new e(this.type,c);l=this._state;b=0;for(g=l.length;b<g;b++)a=l[b],c.state(a,!0);l=this.children;b=0;for(g=l.length;b<g;b++)a=l[b],c.append(a.clone());f=this._eventCallbacks;for(d in f)for(b=f[d],l=0,g=b.length;l<g;l++)a=b[l],c.on(d,a);return c};e.prototype.append=function(a){var b;a&&(a=v.normalizeGivenEl(a),c.quickDomEl(a)&&((b=a.parent)&&b._removeChild(a),this._children.push(a),this.el.appendChild(a.el),
a.parent));return this};e.prototype.appendTo=function(a){a&&(a=v.normalizeGivenEl(a),c.quickDomEl(a)&&a.append(this));return this};e.prototype.prepend=function(a){var b;a&&(a=v.normalizeGivenEl(a),c.quickDomEl(a)&&((b=a.parent)&&b._removeChild(a),this._children.unshift(a),this.el.insertBefore(a.el,this.el.firstChild),a.parent));return this};e.prototype.prependTo=function(a){a&&(a=v.normalizeGivenEl(a),c.quickDomEl(a)&&a.prepend(this));return this};e.prototype.html=function(a){if(!c.defined(a))return this.el.innerHTML;
this.el.innerHTML=a;return this};e.prototype.text=function(a){if(!c.defined(a))return this.el.textContent;this.el.textContent=a;return this};e.prototype.after=function(a){var b;a&&this.parent&&(a=v.normalizeGivenEl(a),c.quickDomEl(a)&&(b=this.parent._children.indexOf(this),this.parent._children.splice(b+1,0,a),this.el.parentNode.insertBefore(a.el,this.el.nextSibling),a.parent));return this};e.prototype.insertAfter=function(a){a&&(a=v.normalizeGivenEl(a),c.quickDomEl(a)&&a.after(this));return this};
e.prototype.before=function(a){var b;a&&this.parent&&(a=v.normalizeGivenEl(a),c.quickDomEl(a)&&(b=this.parent._children.indexOf(this),this.parent._children.splice(b,0,a),this.el.parentNode.insertBefore(a.el,this.el),a.parent));return this};e.prototype.insertBefore=function(a){a&&(a=v.normalizeGivenEl(a),c.quickDomEl(a)&&a.before(this));return this};e.prototype.detach=function(){var a;null!=(a=this.parent)&&a._removeChild(this);return this};e.prototype.remove=function(){var a;this.detach();this.resetState();
for(a in this._eventCallbacks)this._eventCallbacks[a].length=0;return this};e.prototype.empty=function(){var a,b,c,d;d=this.children.slice();b=0;for(c=d.length;b<c;b++)a=d[b],this._removeChild(a);return this};e.prototype.wrap=function(a){var b;a&&(a=v.normalizeGivenEl(a),b=this.parent,c.quickDomEl(a)&&a!==this&&a!==this.parent&&(b&&b._removeChild(this,a.parent?void 0:a),a.append(this)));return this};e.prototype.unwrap=function(){var a,b,c,d;if(b=this.parent)if(c=f.batch(b.children),d=b.next,a=b.parent)b.detach(),
d?c.insertBefore(d):c.appendTo(a);return this};e.prototype.replace=function(a){var b;a&&(a=v.normalizeGivenEl(a),c.quickDomEl(a)&&a!==this&&(a.detach(),null!=(b=this.parent)&&b._removeChild(this,a)));return this};e.prototype._removeChild=function(a,b){var c;c=this._children.indexOf(a);-1!==c&&(b?(this.el.replaceChild(b.el,a.el),this._children.splice(c,1,b)):(this.el.removeChild(a.el),this._children.splice(c,1)));return this};m={type:"window",el:window,raw:window,_eventCallbacks:{__refs:{}}};m.on=
e.prototype.on;m.off=e.prototype.off;m.emit=e.prototype.emit;m._listenTo=e.prototype._listenTo;Object.defineProperties(m,{width:{get:function(){return window.innerWidth}},height:{get:function(){return window.innerHeight}},orientation:B,aspectRatio:y});d=new function(){var a,b;a=[];window.addEventListener("resize",function(){var b,c,d;c=0;for(d=a.length;c<d;c++)b=a[c],b()});this.parseQuery=function(a,b){var c,d;c=b.split("(");d=c[0];d=function(){switch(d){case "window":return m;case "parent":return a.parent;
case "self":return a;default:return a.parentMatching(function(a){return a.ref===d.slice(1)})}}();c=c[1].slice(0,-1).split(G).map(function(a){var b,c,k,g;k=a.split(":");a=parseFloat(k[1]);isNaN(a)&&(a=k[1]);c=k[0];b=c.slice(0,4);k="max-"===b;g=!k&&"min-"===b;if(k||g)c=c.slice(4);b=function(){switch(c){case "orientation":return function(){return d.orientation};case "aspect-ratio":return function(){return d.aspectRatio};case "width":case "height":return function(){return d[c]};default:return function(){var a,
b;b=d.style(c);a=parseFloat(b);return isNaN(a)?b:a}}}();return{key:c,value:a,min:g,max:k,getter:b}});return{source:d,rules:c}};this.register=function(c,d){var k,g;g=this.parseQuery(c,d);g.source&&(a.push(k=function(){return b(c,g,d)}),k());return g};b=function(a,b,c){var d,k,g,l,e;g=!0;l=b.rules;b=0;for(k=l.length;b<k&&(e=l[b],d=e.getter(),g=function(){switch(!1){case !e.min:return d>=e.value;case !e.max:return d<=e.value;default:return d===e.value}}(),g);b++);return a.state(c,g)};return this};G=
/,\s*/;f=function(){var a,b,d,g,l;a=1<=arguments.length?slice.call(arguments,0):[];switch(!1){case !c.template(a[0]):return a[0].spawn();case !c.quickDomEl(a[0]):return a[1]?a[0].updateOptions(a[1]):a[0];case !(c.domNode(a[0])||c.domDoc(a[0])):if(a[0]._quickElement)return a[0]._quickElement;d=a[0].nodeName.toLowerCase().replace("#","");b=a[1]||{};b.existing=a[0];return new e(d,b);case a[0]!==window:return m;case !c.string(a[0]):d=a[0].toLowerCase();b="text"===d?c.object(a[1])?a[1]:{text:a[1]||""}:
c.object(a[1])?a[1]:{};a=a.slice(2);d=new e(d,b);g=0;for(l=a.length;g<l;g++)b=a[g],c.string(b)&&(b=f.text(b)),c.template(b)&&(b=f(b)),c.quickDomEl(b)&&b.appendTo(d);return d}};f.template=function(a){return new n(a,!0)};h=function(a,b){this.elements=a;this.returnResults=b;this.elements=this.elements.map(function(a){return f(a)});return this};h.prototype.reverse=function(){this.elements=this.elements.reverse();return this};h.prototype["return"]=function(a){return a?(this.returnResults=!0,this):this.lastResults};
Object.keys(e.prototype).concat("css","replaceWith").forEach(function(a){return h.prototype[a]=function(){var b,c;c=this.lastResults=function(){var c,d,g,k;g=this.elements;k=[];c=0;for(d=g.length;c<d;c++)b=g[c],k.push(b[a].apply(b,arguments));return k}.apply(this,arguments);return this.returnResults?c:this}});f.batch=function(a,b){if(!c.iterable(a))throw Error("Batch: expected an iterable, got "+String(a));if(!a.length)throw Error("Batch: expected a non-empty element collection");return new h(a,b)};
A={type:"div",options:{},children:[]};n=function(a,b){this._config=b?ea(a):a;return this};Object.keys(A).forEach(function(a){return Object.defineProperty(n.prototype,a,{get:function(){return this._config[a]}})});n.prototype.spawn=function(a,b){var c;c=z(this._config,a,b);return f.apply(null,[c.type,c.options].concat(slice.call(c.children)))};n.prototype.extend=function(a,b){return new n(z(this._config,a,b))};z=function(a,b,d){var g,l,k,e,f,h,E;d&&(g={options:function(a){return w(a,d)}});c.array(b)&&
(b=ea(b,!1));g=w.deep.notKeys("children").notDeep("relatedInstance").transform(g).clone(a,b);a=a.children||[];h=(null!=b?b.children:void 0)||[];g.children=[];l=k=0;for(E=Math.max(a.length,h.length);0<=E?k<E:k>E;l=0<=E?++k:--k)e=!1,b=a[l],f=h[l],l=function(){switch(!1){case !c.template(f):return f;case !c.array(f):return e=ea(f,!1);case !c.string(f):return e={type:"text",options:{text:f}};default:return e=f||!0}}(),e&&(l=b?b.extend(l,d):new n(w.deep.clone(A,l))),g.children.push(l);return g};ea=function(a,
b){var d;switch(!1){case !c.array(a):d={};if(c.string(a[0]))d.type=a[0];else throw Error(C+" string for 'type', got '"+String(a[0])+"'");if(1<a.length&&!c.object(a[1])&&null!==a[1])throw Error(C+" object for 'options', got '"+String(a[1])+"'");d.options=a[1]?w.deep.clone(a[1]):null;d.children=a.slice(2);!1!==b&&(d.children=d.children.map(f.template));return d;case !(c.string(a)||c.domText(a)):return{type:"text",options:{text:a.textContent||a}};case !c.domEl(a):return{type:a.nodeName.toLowerCase(),
options:w.clone.keys(u)(a),children:[].map.call(a.childNodes,f.template)};case !c.quickDomEl(a):return{type:a.type,options:w.clone.deep.notKeys("relatedInstance")(a.options),children:a.children.map(f.template)};case !c.template(a):return z(a._config);default:throw Error(C+" (array || string || domEl || quickDomEl || template), got "+String(a));}};C="Template Parse Error: expected";R="link:a anchor:a a text div span h1 h2 h3 h4 h5 h6 header footer section button br ul ol li fieldset input textarea select option form frame hr iframe img picture main nav meta object pre style table tbody th tr td tfoot video".split(" ");
y=function(a){var b,c;b=c=a;v.includes(a,":")&&(a=a.split(":"),b=a[0],c=a[1]);return f[b]=function(){return f.apply(null,[c].concat(slice.call(arguments)))}};B=0;for(H=R.length;B<H;B++)U=R[B],y(U);f.version="1.0.22";return null!=("undefined"!==typeof b&&null!==b?b.exports:void 0)?b.exports=f:"function"===typeof define&&define.amd?define(["quickdom"],function(){return f}):this.Dom=f})();return b.exports}}(this)({});X=function(b){"use strict";var a=[],c=[];return b=function(b,d){if(b===d)return 0;var g=
b.length,l=d.length;if(0===g)return l;if(0===l)return g;for(var e,f,h,n,m=0,q=0;m<g;)c[m]=b.charCodeAt(m),a[m]=++m;for(;q<l;)for(e=d.charCodeAt(q),h=q++,f=q,m=0;m<g;m++)n=e===c[m]?h:h+1,h=a[m],f=a[m]=h>f?n>f?f+1:n:n>h?h+1:n;return f}}.call(this,{});J=x(3);f=x(4);d=function(b){var a={exports:b};(function(){var b,d,l,e,f,h,m,n,q,t,u,y,z,A,w,C,v,B,x,H,G,I,L,U,R,k,r,F,K,O,J,V,Q,P,T,X,fa,ia,aa,M,Y,ba,ja,ca,ga,ha,ka,la,oa,ma,na,pa,S,D,da,qa,Z,ra;O=0;G="push pop shift unshift splice reverse sort".split(" ");
Q={};I={};ka=["{{","}}"];S=Object.create({silent:!1},{placeholder:{get:function(){return ka},set:function(a){k.isArray(a)&&2===a.length&&(ka=a,na())}}});J={delay:!1,throttle:!1,simpleSelector:!1,promiseTransforms:!1,dispatchEvents:!1,sendArrayCopies:!1,updateEvenIfSame:!1,updateOnBind:!0};V=Object.defineProperty;ja=Object.getOwnPropertyDescriptor;U=null;R=function(){var a;U||(a=U=document.createEvent("Event"),a.initEvent("change",!0,!1),a._sb=!0);return U};oa=!("className"in Element.prototype)||!ja(Element.prototype,
"className").get;ra="innerWidth innerHeight outerWidth outerHeight scrollX scrollY pageXOffset pageYOffset screenX screenY screenLeft screenTop".split(" ");pa=function(a,b){return this.updateAllSubs(b||this)};aa=function(){return""+ ++O};M=function(){return Object.create(null)};Y=function(a,b){return function(c,p,d){return B(c,p,d,a,b)}};ba=function(a,c){return a.selfUpdater||(a.selfUpdater=new b(function(){return c?a.setValue(a.fetchDirectValue(),a,!0):a.updateAllSubs(a)},"Func",{}))};D=function(a,
b){return a&&-1!==a.indexOf(b)};k={isDefined:function(a){return void 0!==a},isArray:function(a){return a instanceof Array},isObject:function(a){return"object"===typeof a&&a},isString:function(a){return"string"===typeof a},isNumber:function(a){return"number"===typeof a},isFunction:function(a){return"function"===typeof a},isBindingInterface:function(a){return a instanceof d},isBinding:function(a){return a instanceof b},isIterable:function(a){return k.isObject(a)&&k.isNumber(a.length)},isDom:function(a){return a.nodeName&&
1===a.nodeType},isDomInput:function(a){a=a.nodeName;return"INPUT"===a||"TEXTAREA"===a||"SELECT"===a},isDomRadio:function(a){return"radio"===a.type},isDomCheckbox:function(a){return"checkbox"===a.type},isElCollection:function(a){return a instanceof NodeList||a instanceof HTMLCollection||k.isDefined(jQuery)&&a instanceof jQuery},domElsAreSame:function(a){var b;b=a[0].type;return[].filter.call(a,function(a){return a.type===b}).length===a.length}};ia=function(a,b,c){var p;if(p=ja(a,b))return c&&(p.configurable=
!0),p;if(a=Object.getPrototypeOf(a))return ia(a,b,!0)};F=function(a,b,c){var p,d,g,N,W,l;a.origDescriptor||(a.origDescriptor=ia(b,a.property));c?G.forEach(function(c){return V(b,c,{configurable:!0,value:function(){var p;p=Array.prototype[c].apply(b,arguments);a.updateAllSubs(a);return p}})}):"Proxy"===a.type?(d=a.origFn=a.value,a.value={result:null,args:null},k.isFunction(d)&&(l=[].slice,p=g=function(){var c;c=l.call(arguments);a.value.args=c=a.selfTransform?a.selfTransform(c):c;a.value.result=c=
d.apply(b,c);a.updateAllSubs(a);return c},V(b,a.property,{configurable:a.isLiveProp=!0,get:function(){return p},set:function(b){k.isFunction(b)?b!==d&&(b!==g&&(d=a.origFn=b),p!==g&&(p=g)):p=b}}))):D(a.type,"DOM")||a.object===window&&D(ra,a.property)||(c=a.origDescriptor||Q,c.get&&(a.origGetter=c.get.bind(b)),c.set&&(a.origSetter=c.set.bind(b)),W=(W=c.configurable)&&b.constructor!==CSSStyleDeclaration,oa&&a.isDom&&a.property in b.cloneNode(!1)&&(a.origDescriptor=W=!1,a.isLiveProp=!0,a.origGetter=function(){return a.object[a.property]},
a.origSetter=function(b){return a.object[a.property]=b}),W&&(W="Array"===a.type,N=!a.origSetter&&!W,V(b,a.property,{configurable:a.isLiveProp=!0,enumerable:c.enumerable,get:a.origGetter||function(){return a.value},set:function(b){a.setValue(b,a,N)}}),W&&F(a,b[a.property],!0)))};K=function(a,b,c){var p,d;if(c){d=[];a=0;for(c=G.length;a<c;a++)p=G[a],d.push(delete b[p]);return d}c=a.origDescriptor;c.set||c.get||(c.value=a.origFn||a.value);return V(b,a.property,c)};r=function(a){var b,c;b=M();for(c in a)b[c]=
a[c];return b};fa=function(a,b){var c,p,d,g;g=Object.keys(b);c=0;for(d=g.length;c<d;c++)p=g[c],a[p]=b[p]};L={get:function(a,b,c,d){if(b)return I[a._sb_ID];if(d&&a[0]._sb_map&&(b=I[a[0]._sb_map[c]],b.groupBinding))return b.groupBinding;if(a._sb_map&&a._sb_map[c])return I[a._sb_map[c]]},set:function(a,b){var c,p;b?V(a.object,"_sb_ID",{configurable:!0,value:a.ID}):(p=a.selector,a.object._sb_map?a.object._sb_map[p]=a.ID:(c={},c[p]=a.ID,V(a.object,"_sb_map",{configurable:!0,value:c})))}};T=/[.*+?^${}()|[\]\\]/g;
ga=ha=null;na=function(){var a,b,c;c=S.placeholder[0].replace(T,"\\$&");a=S.placeholder[1].replace(T,"\\$&");b="[^"+a+"]+";ga=new RegExp(c+"("+b+")"+a,"g");ha=new RegExp(""+c+b+a,"g")};na();H=function(a,b,c){var p,d,g,l,N;N="";d=g=0;for(l=a.length;g<l;d=++g)p=a[d],N+=p,c[d]&&(N+=b[c[d]]);return N};x=function(a,b,c){null==a[c]&&(a[c]=[]);a[c].push(b)};ma=function(a,b){var c,p,d,g,l,N,e,k,f,h,E;c=Array.prototype.slice.call(a.childNodes);d=0;for(l=c.length;d<l;d++)if(f=c[d],3!==f.nodeType)ma(f,b);else if(f.textContent.match(ha))if(E=
f.textContent.split(ga),3===E.length&&""===E[0]+E[2])x(b,f,E[1]);else{e=document.createDocumentFragment();p=g=0;for(N=E.length;g<N;p=++g)h=E[p],k=e.appendChild(document.createTextNode(h)),p%2&&x(b,k,h);f.parentNode.replaceChild(e,f)}};da=function(a){throw Error("SimplyBind: "+(P[a]||a));};Z=function(a,b){var c,d;S.silent||(c=ca(b),d=P[a],console.warn("SimplyBind: "+(d+("\n\n"+c))))};qa=function(a){da("Invalid argument/s ("+a+")",!0)};ca=function(a){return(Error().stack||"").split("\n").slice(a+3).join("\n")};
P={invalidParamName:"SimplyBind() and .to() only accept a function, an array, a bound object, a string, or a number.",fnOnly:"Only functions are allowed for .transform/.condition/All()",badEventArg:"Invalid argument number in .ofEvent()",emptyList:"Empty collection provided",onlyOneDOMElement:"You can only pass a single DOM element to a binding",mixedElList:"'checked' of Mixed list of element cannot be bound"};B=function(a,b,c,g,l){if(!a&&0!==a||!(k.isString(a)||k.isNumber(a)||k.isFunction(a)||a instanceof
Array))k.isBindingInterface(a)||da("invalidParamName");!k.isObject(a)||a instanceof Array?(b=new d(b),b.saveOptions=c,b.isSub=g,b.completeCallback=l,a=k.isFunction(a)?b.setObject(a,!0):b.setProperty(a)):a=l?l(a):a.selfClone();return a};B.version="1.15.0";B.settings=S;B.defaultOptions=J;B.unBindAll=function(a,b){var c,d,p;if(a&&(k.isObject(a)||k.isFunction(a))&&(k.isIterable(a)&&!a._sb_ID&&a[0]&&k.isDom(a[0])&&(a=a[0]),p=a._sb_map,a._sb_ID&&I[a._sb_ID].removeAllSubs(b),p))for(d in p)c=p[d],I[c].removeAllSubs(b)};
b=function(a,b,c){fa(this,c);this.optionsDefault=this.saveOptions?this.options:J;this.type=b;this.object=a;this.ID=aa();this.subs=[];this.subsMeta=M();this.pubsMap=M();this.attachedEvents=[];"Proxy"===this.type&&(this.setValue=pa);this.isMultiChoice&&(this.choices=M(),this.object.forEach(function(a){return function(b){var c;c=a.choices[b.value]=B("checked").of(b)._;c.addSub(a);c.subsMeta[a.ID].transformFn=function(){return c};c.groupBinding=a}}(this)));"Event"===this.type||"Func"===this.type&&this.isSub||
("Pholder"===this.type?(b=this.descriptor&&!D(this.descriptor,"multi")?this.descriptor+":"+this.property:this.property,a=this.parentBinding=B(b).of(a)._,a.scanForPholders(),this.value=a.pholderValues[this.pholder],a.textNodes&&(this.textNodes=a.textNodes[this.pholder])):(this.value=a=this.fetchDirectValue(),"ObjectProp"!==this.type||k.isDefined(a)||(this.object[this.property]=a),F(this,this.object)));this.attachEvents();return I[this.ID]=this};b.prototype={addSub:function(a,b,c,d){var p,g,l,e;if(a.isMulti)for(l=
a.bindings,a=0,g=l.length;a<g;a++)e=l[a],this.addSub(e,b,c,d);else if(this.subsMeta[a.ID])p=!0;else{a.pubsMap[this.ID]=this;this.subs.unshift(a);g=this.subsMeta[a.ID]=M();g.updateOnce=c;g.opts=r(b);if(d||"Event"===this.type||"Proxy"===this.type||"Array"===this.type)g.opts.updateEvenIfSame=!0;g.valueRef="Func"===a.type?"valuePassed":"value"}return p},removeSub:function(a,b){var c,d,p,g;if(a.isMulti)for(p=a.bindings,c=0,d=p.length;c<d;c++)g=p[c],this.removeSub(g,b);else this.subsMeta[a.ID]&&(this.subs.splice(this.subs.indexOf(a),
1),delete this.subsMeta[a.ID],delete a.pubsMap[this.ID]),b&&(a.removeSub(this),delete this.pubsMap[a.ID]);0===this.subs.length&&0===Object.keys(this.pubsMap).length&&this.destroy()},removeAllSubs:function(a){var b,c,d,p;d=this.subs.slice();b=0;for(c=d.length;b<c;b++)p=d[b],this.removeSub(p,a)},destroy:function(){var a,b,c,d;delete I[this.ID];this.removePollInterval();if("Event"===this.type)for(d=this.attachedEvents,b=0,c=d.length;b<c;b++)a=d[b],this.unRegisterEvent(a,this.customEventMethod.listen);
else"Func"===this.type&&delete this.object._sb_ID;this.isLiveProp&&this.origDescriptor&&K(this,this.object);"Array"===this.type&&K(this,this.value,!0);this.object._sb_map&&(delete this.object._sb_map[this.selector],0===Object.keys(this.object._sb_map).length&&delete this.object._sb_map)},fetchDirectValue:function(){var a,b,c,d,g;g=this.type;switch(!1){case "Func"!==g:return this.object();case "DOMAttr"!==g:return this.object.getAttribute(this.property)||"";case !this.isMultiChoice:d=[];c=this.choices;
for(b in c)if(a=c[b],a.object.checked){if("DOMRadio"===g)return b;d.push(b)}return d;default:return this.object[this.property]}},setValue:function(a,b,c,d){var g,p,l,e;b||(b=this);this.selfTransform&&(a=this.selfTransform(a));if(!c)switch(this.type){case "ObjectProp":this.isLiveProp?this.isDomInput?d?a!==this.origGetter()&&(g=this.object.selectionStart,this.origSetter(a),g&&this.object.setSelectionRange(g,g)):(this.origSetter(a),S.dispatchEvents&&this.object.dispatchEvent(R())):this.origSetter&&this.origSetter(a):
a!==this.value&&(this.object[this.property]=a);break;case "Pholder":d=this.parentBinding;d.pholderValues[this.pholder]=a;g=H(d.pholderContexts,d.pholderValues,d.pholderIndexMap);if(this.textNodes&&a!==this.value)for(l=this.textNodes,p=0,c=l.length;p<c;p++)e=l[p],e.textContent=a;"textContent"!==this.property&&d.setValue(g,b);break;case "Array":a!==this.value&&(k.isArray(a)||(a=Array.prototype.concat(a)),K(this,this.value,!0),F(this,a=a.slice(),!0),this.origSetter&&this.origSetter(a));break;case "Func":g=
this.valuePassed;this.valuePassed=a;a=this.object(a,g);break;case "Event":this.isEmitter=!0;this.emitEvent(a);this.isEmitter=!1;break;case "DOMRadio":if(this.isMultiChoice)if(d=k.isBinding(a)?a:this.choices[a])for(p in a=d.object.value,g=this.choices,g)c=g[p],c.setValue(c.ID===d.ID,b);else a=this.value;else{a=!!a;if(a===this.value)return;this.object.checked!==a&&(this.object.checked=a);a&&S.dispatchEvents&&this.object.dispatchEvent(R())}break;case "DOMCheckbox":if(this.isMultiChoice){p=!k.isBinding(a);
a=[].concat(a);c=d=0;for(l=a.length;d<l;c=++d)e=a[c],a[c]=k.isBinding(e)?e:this.choices[e];l=[];e=this.choices;for(g in e)c=e[g],d=p?D(a,c):c.value,c.setValue(d,b),d&&l.push(g);a=l}else{a=!!a;if(a===this.value)return;this.object.checked!==a&&(this.object.checked=a,S.dispatchEvents&&this.object.dispatchEvent(R()))}break;case "DOMAttr":this.object.setAttribute(this.property,a)}this.value=a;this.updateAllSubs(b)},updateAllSubs:function(a){var b,c;if(c=(b=this.subs).length)for(;c--;)this.updateSub(b[c],
a)},updateSub:function(a,b,c){var d,g,p;if(!(b===a||b!==this&&b.subsMeta[a.ID]||(d=this.subsMeta[a.ID],d.disallowList&&d.disallowList[b.ID]))){if(d.opts.throttle){c=+new Date;g=c-d.lastUpdate;if(g<d.opts.throttle)return clearTimeout(d.updateTimer),d.updateTimer=setTimeout(function(c){return function(){return c.updateSub(a,b)}}(this),d.opts.throttle-g);d.lastUpdate=c}else if(d.opts.delay&&!c)return setTimeout(function(c){return function(){return c.updateSub(a,b,!0)}}(this),d.opts.delay);c="Array"===
this.type&&d.opts.sendArrayCopies?this.value.slice():this.value;g=a[d.valueRef];c=(p=d.transformFn)?p(c,g,a.object):c;c===g&&!d.opts.updateEvenIfSame||d.conditionFn&&!d.conditionFn(c,g,a.object)||(d.opts.promiseTransforms&&c&&k.isFunction(c.then)?c.then(function(c){a.setValue(c,b)}):a.setValue(c,b),d.updateOnce&&this.removeSub(a))}},addModifierFn:function(a,b,c,d){var g,p,l,e,f;if(k.isFunction(c)){p=0;for(l=b.length;p<l;p++)e=b[p],f=e._||e,f.isMulti?this.addModifierFn(a,f.bindings,c,d):(e=this.subsMeta[f.ID],
e[a]=c,d=d&&!e.updateOnce,this.pubsMap[f.ID]&&((g=f.subsMeta[this.ID])[a]||(g[a]=c)),!d&&"Func"!==this.type||"transformFn"!==a||this.updateSub(f,this));return!0}return Z("fnOnly",2)},setSelfTransform:function(a,b){this.selfTransform=a;b&&this.setValue(this.value)},addDisallowRule:function(a,b){var c;(null!=(c=this.subsMeta[a.ID]).disallowList?c.disallowList:c.disallowList=M())[b.ID]=1},scanForPholders:function(){var a;this.pholderValues||(this.pholderValues=M(),this.pholderIndexMap=M(),this.pholderContexts=
[],k.isString(this.value)&&(this.pholderContexts=this.value.split(ha),a=0,this.value=this.value.replace(ga,function(b){return function(c,d){b.pholderIndexMap[a++]=d;return b.pholderValues[d]=d}}(this))),this.isDom&&"textContent"===this.property&&ma(this.object,this.textNodes=M()))},addPollInterval:function(a){if("Event"!==this.type)return this.removePollInterval(),this.pollInterval=setInterval(function(a){return function(){var b;b=a.fetchDirectValue();return a.setValue(b)}}(this),a)},removePollInterval:function(){clearInterval(this.pollInterval);
return this.pollInterval=null},addUpdateListener:function(a,b){this.object.addEventListener(a,function(a){return function(c){c._sb||(c=a.selfTransform&&a.isDomInput,a.setValue(a.object[b],null,!c,!0))}}(this),!1)},attachEvents:function(){this.eventName?this.registerEvent(this.eventName,this.customEventMethod.listen):this.isDomInput?(this.addUpdateListener("input","value"),this.addUpdateListener("change","value")):this.isMultiChoice||"DOMRadio"!==this.type&&"DOMCheckbox"!==this.type||this.addUpdateListener("change",
"checked")},registerEvent:function(a,b){this.attachedEvents.push(a);this.invokeEventMethod(a,b||"addEventListener","addEventListener")},unRegisterEvent:function(a,b){this.attachedEvents.splice(this.attachedEvents.indexOf(a),1);this.invokeEventMethod(a,b||"removeEventListener","removeEventListener")},invokeEventMethod:function(a,b,c){var d;d=this.object;if(this.isDom&&k.isDefined(jQuery)&&"on"===b||"off"===b)d=jQuery(this.object);d[b]||(b=c);this.eventHandler||(this.eventHandler=X.bind(this));if("function"===
typeof d[b])d[b](a,this.eventHandler)},emitEvent:function(a){var b,c;c=this.object;b=this.customEventMethod.emit||"dispatchEvent";this.isDom&&k.isDefined(jQuery)&&"trigger"===b&&(c=jQuery(this.object));c[b]||(b="dispatchEvent");if("dispatchEvent"===b)return this.eventObject||(this.eventObject=document.createEvent("Event"),this.eventObject.initEvent(this.eventName,!0,!0)),this.eventObject.bindingData=a,c[b](this.eventObject);c[b](this.eventName,a)}};X=function(){this.isEmitter||this.setValue(arguments[this.property],
null,!0)};d=function(a,b){var c;if(b)fa(this,b),this.stage=1;else for(c in this.stage=0,this.subs=[],this.optionsPassed=a||(a={}),this.options={},J)this.options[c]=null!=a[c]?a[c]:J[c];return this};l={selfClone:function(){return new d(null,this)},defineMainProps:function(a){this._=a;return Object.defineProperties(this,{value:{get:function(){return a.value}},original:{get:function(){return a.objects||a.object}},subscribers:{get:function(){return a.subs.slice().map(function(a){return a.object})}}})},
createBinding:function(a,c,d,g){var l;this.object=a;if(l=L.get(a,g,this.selector,this.isMultiChoice))return this.patchCachedBinding(l);a=new b(a,c,d);L.set(a,g);return a},patchCachedBinding:function(a){var b,c,d,g;"ObjectProp"!==a.type||this.property in this.object||F(a,this.object);if(this.saveOptions)for(c in d=this.optionsPassed,d)g=d[c],a.optionsDefault[c]=g;c=a.optionsDefault;for(b in c)g=c[b],this.options[b]=k.isDefined(this.optionsPassed[b])?this.optionsPassed[b]:g;return a},setProperty:function(a){var b;
k.isNumber(a)&&(a=a.toString());this.selector=this.property=a;this.options.simpleSelector||(D(a,":")&&(b=a.split(":"),this.descriptor=b.slice(0,-1).join(":"),this.property=b[b.length-1]),D(a,".")&&(b=this.property.split("."),this.property=b[0],this.pholder=b.slice(1).join(".")),D(this.descriptor,"event")&&(D(a,"#")?(b=this.property.split("#"),this.eventName=b[0],this.property=b[1]):(this.eventName=this.property,this.property=0),isNaN(parseInt(this.property))&&Z("badEventArg",1),this.customEventMethod=
{listen:this.optionsPassed.listenMethod,emit:this.optionsPassed.emitMethod}));return this},setObject:function(a,b){var c,d,g,l;this.stage=1;l=(g=a!==window&&k.isIterable(a)&&!a.nodeType)?a[0]:a;if(!l)g&&k.isElCollection(a)&&da("emptyList");else if(this.isDom=k.isDom(l))if("checked"===this.property?(d=l&&k.isDomRadio(l),c=!d&&l&&k.isDomCheckbox(l)):"value"===this.property&&(this.isDomInput=k.isDomInput(l)),g&&!D(this.descriptor,"multi"))if(1===a.length)a=a[0];else if(!d&&!c||k.domElsAreSame(a))d||
c?(this.isMultiChoice=!0,a=[].slice.call(a)):(a=a[0],Z("onlyOneDOMElement",3));else return Z("mixedElList",3);switch(!1){case !b:c="Func";break;case !this.pholder:c="Pholder";break;case !(D(this.descriptor,"array")&&k.isArray(a[this.property])):c="Array";break;case !D(this.descriptor,"event"):c="Event";break;case !D(this.descriptor,"func"):c="Proxy";break;case !d:c="DOMRadio";break;case !c:c="DOMCheckbox";break;case !D(this.descriptor,"attr"):c="DOMAttr";break;default:c="ObjectProp"}D(this.descriptor,
"multi")?(a.length||da("emptyList"),this.defineMainProps(new e(this,a,c))):this.defineMainProps(this.createBinding(a,c,this,b));D(this._.type,"Event")||D(this._.type,"Proxy")?this.options.updateOnBind=!1:D(this._.type,"Func")&&(this.options.updateOnBind=!0);return this.completeCallback?this.completeCallback(this):this},addToPublisher:function(a){var b,c,d,g;a.stage=2;a.subs.push(this);b=a._.addSub(this._,a.options,a.updateOnce);if(a.updateOnce)delete a.updateOnce;else if(a.options.updateOnBind&&!b)if(this._.isMulti)for(g=
this._.bindings,c=0,d=g.length;c<d;c++)b=g[c],a._.updateSub(b,a._);else a._.updateSub(this._,a._)}};d.prototype=Object.create(l,{of:{get:function(){if(!this.stage)return q}},set:{get:function(){if(this.stage)return u}},chainTo:{get:function(){if(2===this.stage)return h}},transformSelf:{get:function(){if(1===this.stage)return C}},transform:{get:function(){if(2===this.stage)return A}},transformAll:{get:function(){if(2===this.stage)return w}},condition:{get:function(){if(2===this.stage)return m}},conditionAll:{get:function(){if(2===
this.stage)return n}},bothWays:{get:function(){if(2===this.stage)return f}},unBind:{get:function(){if(2===this.stage)return v}},pollEvery:{get:function(){if(this.stage)return t}},stopPolling:{get:function(){if(this.stage)return z}},setOption:{get:function(){if(2===this.stage)return y}},disallowFrom:{get:function(){var a;if(2===this.stage&&(a=this))return Y(!1,function(b){a._.addDisallowRule(a.subs[a.subs.length-1]._,b._);return a})}},updateOn:{get:function(){var a;if(this.stage&&(a=this))return Y(!1,
function(b){b._!==a._&&(a._.pubsMap[b._.ID]=b._,b._.addSub(ba(a._,!0),b.options,!1,!0));return a})}},removeUpdater:{get:function(){var a,b;if(this.stage&&(b=this)&&(a=this._.selfUpdater))return Y(!1,function(c){c._.subsMeta[a.ID]&&(delete b._.pubsMap[c._.ID],c._.removeSub(a))})}},to:{get:function(){var a;if(1===this.stage&&(a=this))return Y(!0,function(b){b._!==a._&&b.addToPublisher(a);return a})}},and:{get:function(){var a,b;b=this.selfClone();if(2===this.stage)return b;if(1===this.stage)return b._.isMulti||
(a=b._,b._=b._=new e(b),b._.addBinding(a)),Y(!1,function(a){b._.addBinding(a._);return b})}},once:{get:function(){var a;if(1===this.stage)return a=this.selfClone(),a.updateOnce=!0,a}},update:{get:function(){return this.set}},twoWay:{get:function(){return this.bothWays}},pipe:{get:function(){return this.chainTo}}});q=function(a){k.isObject(a)||k.isFunction(a)||qa(a);k.isBindingInterface(a)&&(a=a.object);this.stage=1;return this.setObject(a)};h=function(a,b,c){return B(this.subs[this.subs.length-1]).to(a,
b,c)};u=function(a){this._.setValue(a);return this};C=function(a){k.isFunction(a)?this._.setSelfTransform(a,this.options.updateOnBind):Z("fnOnly",1);return this};A=function(a){this._.addModifierFn("transformFn",this.subs.slice(-1),a,this.options.updateOnBind);return this};w=function(a){this._.addModifierFn("transformFn",this.subs,a,this.options.updateOnBind);return this};m=function(a){this._.addModifierFn("conditionFn",this.subs.slice(-1),a);return this};n=function(a){this._.addModifierFn("conditionFn",
this.subs,a);return this};f=function(a){var b,c,d,g,l,e;d=this.subs[this.subs.length-1];e=d._;c=this._.isMulti?this._.bindings:[this._];e.addSub(this._,d.options);d=0;for(g=c.length;d<g;d++)b=c[d],l=b.subsMeta[e.ID].transformFn,b=b.subsMeta[e.ID].conditionFn,(l||a)&&(l=k.isFunction(a)?a:l)&&!1!==a&&(e.subsMeta[this._.ID].transformFn=l),b&&(e.subsMeta[this._.ID].conditionFn=b);return this};v=function(a){var b,c,d,g;d=this.subs;b=0;for(c=d.length;b<c;b++)g=d[b],this._.removeSub(g._,a);return this};
t=function(a){this._.addPollInterval(a);return this};z=function(){this._.removePollInterval();return this};y=function(a,b){this._.subsMeta[this.subs[this.subs.length-1]._.ID].opts[a]=b;return this};e=function(a,b,c){var d,g,l;a.selector=a.selector.slice(6);fa(this,this["interface"]=a);this.isMulti=!0;this.bindings=d=[];if(b)for(a=0,g=b.length;a<g;a++)l=b[a],this.addBinding(l,c);return Object.defineProperties(this,{type:{get:function(){return d.map(function(a){return a.type})}},value:{get:function(){return d.map(function(a){return a.value})}}})};
la=e.prototype=Object.create(l);Object.keys(b.prototype).forEach(function(a){return la[a]=function(b,c,d,g){var l,e,f,k;k=this.bindings;e=0;for(f=k.length;e<f;e++)l=k[e],"updateSub"===a&&(c=l),l[a](b,c,d,g)}});la.addBinding=function(a,b){this.bindings.push(b?this.createBinding(a,b,this["interface"]):a)};return null!=("undefined"!==typeof a&&null!==a?a.exports:void 0)?a.exports=B:"function"===typeof define&&define.amd?define(["simplybind"],function(){return B}):this.SimplyBind=B})();return a.exports}.call(this,
{});H=function(b){var a;f.object(b)||(b={});null==b.type&&(b.type="text");z.appended||z();a=Object.create(n[b.type].prototype);return n.call(a,b)};H.registerField=function(b,a){var c,d,l,h;if(f.string(b)&&f.object(a)){l=Object.create(n.prototype);for(d in a)c=a[d],d="_"===d[0]?d.slice(1):d,e.includes(P,d)&&"validate"!==d&&(d="_"+d),l[d]=c;c=0;for(d=P.length;c<d;c++)if(h=P[c],!l["_"+h]||l[h])throw Error("Field Registration: '"+h+"' is required in order to register the field");return n[b]=l}};Object.defineProperty(H,
"fields",{get:function(){return J.clone.own.notKeys("instances")(n)}});null==this.console&&(this.console={});null==console.log&&(console.log=function(){});null==console.warn&&(console.warn=console.log);P=["_construct","_createElements","_attachBindings","_validate"];u=null!=document.createElement("div").style.animation?"":"-webkit-";y="@"+u+"keyframes checkmarkAnimateSuccessTip { 0%, 54% { width: 0; left: 0px; top: 3px } 70% { width: 14px; left: -2px; top: 8px } 84% { width: 5px; left: 5px; top: 10px } 100% { width: 8px; left: 3px; top: 10px } } @"+
u+"keyframes checkmarkAnimateSuccessLong { 0%, 65% { width: 0; right: 12px; top: 12px } 84% { width: 14px; right: 0px; top: 7px } 100% { width: 12px; right: 2px; top: 8px } } @"+u+"keyframes checkmarkAnimateError { 0%, 65% { "+u+"transform: scale(0.4); opacity: 0 } 84% { "+u+"transform: scale(1.15) } 100% { "+u+"transform: scale(1) } } @"+u+"keyframes checkmarkRotatePlaceholder { 0%, 5% { "+u+"transform: rotate(-45deg) } 12%, 100% { "+u+"transform: rotate(-405deg) } } @"+u+"keyframes fieldErrorShake { 0%, 50% { "+
u+"transform: translateX(-10px) } 25%, 75% { "+u+"transform: translateX(10px) } 100% { "+u+"transform: translateX(0px) } }";z=function(){var b;b=document.createElement("style");b.innerHTML=y;document.body.appendChild(b);return z.appended=b};u={checkmark:m.template(["*svg",{attrs:{width:"12px",height:"12px",viewBox:"5 7 12 12",tabindex:-1,focusable:!1},style:{width:"9px",height:"9px"}},["*polyline",{attrs:{"stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"7 13.8888889 9.66666667 17 15 9",
tabindex:-1,focusable:!1}}]]),angleDown:m.template(["*svg",{attrs:{width:"1792px",height:"1792px",viewBox:"0 0 1792 1792",tabindex:-1,focusable:!1},style:{width:"100%",height:"100%",outline:"none"}},["*path",{attrs:{tabindex:-1,focusable:!1,d:"M1395 736q0 13-10 23l-466 466q-10 10-23 10t-23-10l-466-466q-10-10-10-23t10-23l50-50q10-10 23-10t23 10l393 393 393-393q10-10 23-10t23 10l50 50q10 10 10 23z"}}]]),caretUp:m.template(["*svg",{attrs:{viewBox:"0 0 512 512",tabindex:-1,focusable:!1},style:{width:"100%",
height:"100%"}},["*path",{attrs:{tabindex:-1,focusable:!1,d:"M402 347c0 5-2 10-5 13-4 4-8 6-13 6h-256c-5 0-9-2-13-6-3-3-5-8-5-13s2-9 5-12l128-128c4-4 8-6 13-6s9 2 13 6l128 128c3 3 5 7 5 12z"}}]]),caretDown:m.template(["*svg",{attrs:{viewBox:"0 0 512 512",tabindex:-1,focusable:!1},style:{width:"100%",height:"100%"}},["*path",{attrs:{tabindex:-1,focusable:!1,d:"M402 201c0 5-2 9-5 13l-128 128c-4 4-8 5-13 5s-9-1-13-5l-128-128c-3-4-5-8-5-13s2-9 5-13c4-3 8-5 13-5h256c5 0 9 2 13 5 3 4 5 8 5 13z"}}]])};f.field=
function(b){return b instanceof n};f.regex=function(b){return b instanceof RegExp};aa=/^\d$/;C=/^[a-zA-Z]$/;K=/^[0-9\!#\$\%\*\+\/\=\?\^\{\|\}\(\)\~\-\.]$/;O=/^[0-9A-Za-z\!#\$\%\&\'\*\+\/\=\?\^\_\`\{\|\}\(\)\~\-\ ]$/;e={};ca=function(){};e.includes=function(b,a){return b&&-1!==b.indexOf(a)};e.removeItem=function(b,a){var c;c=b.indexOf(a);if(-1!==c)return b.splice(c,1)};e.find=function(b,a){return b.filter(a)[0]};e.diff=function(b,a){var c,d,l,h,m;h=[];l=Math.max(b.length,a.length);for(d=-1;++d<l;)m=
b[d],c=a[d],m!==c&&(f.defined(m)&&!e.includes(a,m)&&h.push(m),f.defined(c)&&!e.includes(b,c)&&h.push(c));return h};e.hexToRGBA=function(b,a){var c,d,l;"#"===b[0]&&(b=b.slice(1));l=parseInt(b.slice(0,2),16);d=parseInt(b.slice(2,4),16);c=parseInt(b.slice(4,6),16);return"rgba("+l+", "+d+", "+c+", "+a+")"};e.unlockScroll=function(b){window._isLocked=!1;return m(window).off("wheel.lock")};e.lockScroll=function(b){if(!window._isLocked)return window._isLocked=!0,m(window).on("wheel.lock",function(a){if(a.target===
b.raw||m(a.target).parentMatching(function(a){return a===b})){if(0<a.wheelDelta&&0===b.raw.scrollTop||0>a.wheelDelta&&b.raw.scrollHeight-b.raw.scrollTop===b.raw.clientHeight)return a.preventDefault()}else return a.preventDefault()})};e.fuzzyMatch=function(b,a,c){var d,l,e,f,h;f=b.length;d=a.length;c||(b=b.toUpperCase(),a=a.toUpperCase());if(f>d)return!1;if(f===d)return b===a;for(e=c=l=0;e<f;)for(h=b[e++];c<d;)if(a[c++]===h){l++;break}return l===f};e.getIndexOfFirstDiff=function(b,a){var c,d;c=0;for(d=
Math.max(b.length,a.length);c<d;){if(b[c]!==a[c])return c;c++}return null};e.testCondition=function(b){var a,c,d;if(!b||!b.target)throw Error("Invalid condition provided: "+JSON.stringify(b));if(!b.target.state.visible)return!1;a=function(){switch(!1){case !f.objectPlain(b.value):return b.value;case !f.regex(b.value):return{$regex:b.value};case !("valid"===b.value&&!b.property||!f.defined(b.value)):return"valid";default:return{$eq:b.value}}}();if("valid"===a)return b.target.validate();d=function(){var a,
c;c=b.property.split(".");switch(!1){case 1!==c.length:return b.target[b.property];case !f.defined(b.target[b.property]):return b.target[b.property];default:for(a=b.target;f.object(a);)a=a[c.pop()];return a}}();c=Object.keys(a);return c.filter(function(b){var c;c=a[b];switch(b){case "$eq":return d===c;case "$ne":return d!==c;case "$gt":return d>c;case "$gte":return d>=c;case "$lt":return d<c;case "$lte":return d<=c;case "$ct":return e.includes(d,c);case "$nct":return!e.includes(d,c);case "$regex":return c.test(d);
case "$nregex":return!c.test(d);case "$mask":return e.testMask(d,c);default:return!1}}).length===c.length};e.validateConditions=function(b){var a;if(b)return a=b.filter(function(a){return e.testCondition(a)}),a.length===b.length};e.initConditions=function(b,a,c){return setTimeout(function(g){return function(){a.forEach(function(a){var g;if(g=f.string(a.target)?b.allFields[a.target]:f.field(a.target)?a.target:void 0)a.target=g;else return console.warn("Condition target not found for the provided ID '"+
a.target+"'",b);a=f.array(g.value)?"array:value":"value";return d(a,{updateOnBind:!1}).of(g).and("visible").of(g.state).to(c)});return c()}}(this))};T={fontFamily:"system-ui, sans-serif",templates:{},label:!1,alwaysShowHelp:!1,help:"",defaultValue:""};n=function(b){var a;this.settings=J.deep.clone.deep.transform({conditions:function(a){var b,c,d;if(f.objectPlain(a)){b=[];for(c in a)d=a[c],b.push({target:c,value:d});return b}if(f.array(a))return a.map(function(a){return f.string(a)?{target:a}:a})},
choices:function(a){var b,c,d;if(f.objectPlain(a)){c=[];for(b in a)d=a[b],c.push({label:b,value:d});return c}if(f.array(a))return a.map(function(a){return f.objectPlain(a)?a:{label:a,value:a}})},validWhenRegex:function(a){return f.string(a)?new RegExp(a):a}})(T,this._defaults,b);this.type=b.type;this.allFields=this.settings.fieldInstances||n.instances;this._value=null;this.ID=this.settings.ID||ba++ +"";this.els={};this._eventCallbacks={};this.state={valid:!0,visible:!0,disabled:!1,focused:!1,hovered:!1,
filled:!1,interacted:!1,showError:!1,showHelp:!1,width:"100%"};null!=this.settings.defaultValue&&(this._value=this.settings.multiple?[].concat(this.settings.defaultValue):this.settings.defaultValue);null!=(a=this.settings.conditions)&&a.length&&(this.state.visible=!1,e.initConditions(this,this.settings.conditions,function(a){return function(){return a.validateConditions()}}(this)));Object.defineProperty(this,"value",{get:this._getValue,set:this._setValue});this.allFields[this.ID]&&"undefined"!==typeof console&&
null!==console&&console.warn("Duplicate field IDs found: '"+this.ID+"'");this._construct();this._createElements();this._attachBindings();this.el.childf.field.onInserted(function(a){return function(){return a.emit("inserted")}}(this));return this.allFields[this.ID]=this.el.raw._quickField=this};n.instances=Object.create(null);ba=0;Object.defineProperty(n.prototype,"valueRaw",{get:function(){return this._value}});n.prototype.appendTo=function(b){this.el.appendTo(b);return this};n.prototype.prependTo=
function(b){this.el.prependTo(b);return this};n.prototype.insertAfter=function(b){this.el.insertAfter(b);return this};n.prototype.insertBefore=function(b){this.el.insertBefore(b);return this};n.prototype.validateConditions=function(b){var a;b?a=!1:(b=this.settings.conditions,a=!0);b=e.validateConditions(b);return a?this.state.visible=b:b};n.prototype.on=function(b,a){var c;f.string(b)&&f["function"](a)&&(null==(c=this._eventCallbacks)[b]&&(c[b]=[]),this._eventCallbacks[b].push(a));return this};n.prototype.off=
function(b,a){this._eventCallbacks[b]&&(f["function"](a)?e.removeItem(this._eventCallbacks[b],a):this._eventCallbacks[b]={});return this};n.prototype.emit=function(){var b,a,c,d,e;a=arguments[0];b=2<=arguments.length?slice.call(arguments,1):[];if(this._eventCallbacks[a])for(e=this._eventCallbacks[a],c=0,d=e.length;c<d;c++)a=e[c],a.apply(null,[this].concat(slice.call(b)));return this};n.text=t=function(){return this};t.prototype=Object.create(n.prototype);t.prototype._templates={field:m.template(["div",
{ref:"field",style:{position:"relative",display:"none",boxSizing:"border-box",fontFamily:function(b){return b.settings.fontFamily},$visible:{display:"inline-block"},$showError:{animation:"0.2s fieldErrorShake"}}},["div",{ref:"label",style:{position:"absolute",zIndex:1,top:function(b){return parseFloat(b.el.child.innerwrap.styleSafe("height"))/6},left:function(b){var a;return parseFloat(null!=(a=b.el.child.icon)?a.styleSafe("width"):void 0)||0},padding:"0 12px",fontFamily:"inherit",fontSize:"11px",
fontWeight:600,lineHeight:"1em",color:"#909090",opacity:0,transition:"opacity 0.2s, color 0.2s",whiteSpace:"nowrap",userSelect:"none",cursor:"default",pointerEvents:"none",$filled:{opacity:1},$focus:{color:"#ff9c00"},$showError:{color:"#cc4820"}}}],["div",{ref:"innerwrap",style:{position:"relative",height:"46px",backgroundColor:"white",borderWidth:"1px",borderStyle:"solid",borderColor:"#d3d3d3",borderRadius:"2px",boxSizing:"border-box",fontFamily:"inherit",transition:"border-color 0.2s",$focus:{borderColor:"#ff9c00"},
$showError:{borderColor:"#cc4820"},$disabled:{borderColor:"#d3d3d3",backgroundColor:"#d3d3d3"}}},["input",{ref:"input",type:"text",style:{position:"relative",zIndex:3,display:"inline-block",verticalAlign:"top",width:function(b){var a;if(!b.settings.autoWidth)return a="",b.el.child.icon&&(a+=" -"+b.el.child.icon.raw.styleSafe("width",!0)),b.el.child.checkmark&&(a+=" -"+b.el.child.checkmark.styleSafe("width",!0)),"calc(100% + ("+(a||"0px")+"))"},height:function(){return this.parent.styleSafe("height")},
margin:"0",padding:"0 12px",backgroundColor:"transparent",appearance:"none",border:"none",outline:"none",fontFamily:"inherit",fontSize:"14px",lineHeight:function(){return this.parent.styleSafe("height")},color:"#181818",boxSizing:"border-box",whiteSpace:"nowrap",transform:"translateY(0)",transition:"transform 0.2s, -webkit-transform 0.2s",$filled:{$hasLabel:{transform:function(b){return"translateY("+this.parent.height/8+"px)"}}},$showCheckmark:{padding:"0 44px 0 12px"}}}],["div",{ref:"placeholder",
style:{position:"absolute",zIndex:2,top:"0px",left:function(b){var a;return(null!=(a=b.el.child.icon)?a.styleSafe("width"):void 0)||0},lineHeight:function(){return this.parent.styleSafe("height")},padding:function(b){return b.el.child.input.styleSafe("padding")},fontFamily:function(b){return b.el.child.input.styleSafe("fontFamily")},fontSize:function(b){return b.el.child.input.styleSafe("fontSize")},color:"#181818",opacity:.5,userSelect:"none",whiteSpace:"nowrap",transform:"translateY(0)",transition:"transform 0.2s, -webkit-transform 0.2s",
$filled:{visibility:"hidden",$hasLabel:{transform:function(b){return"translateY("+this.parent.height/8+"px)"}}}}}]],["div",{ref:"help",style:{position:"absolute",top:function(b){return parseFloat(this.parent.styleSafe("height"))+4+"px"},left:"0px",fontFamily:"inherit",fontSize:"11px",color:"#909090",display:"none",$showError:{color:"#cc4820",display:"block"},$showHelp:{display:"block"}}}]]),checkmark:m.template(["div",{ref:"checkmark",style:{position:"relative",zIndex:4,display:"none",width:"38px",
height:"100%",paddingTop:function(){return parseFloat(this.parent.styleSafe("height"))/2-13},paddingRight:"12px",verticalAlign:"top",boxSizing:"border-box",$filled:{display:"inline-block"}}},["div",{style:{width:"20px",height:"20px",borderRadius:"50%",backgroundColor:"white",borderWidth:"3px",borderStyle:"solid",borderColor:"#72c322",transform:"scale(0.8)",$showError:{borderColor:"#cc4820"}}},["div",{style:{position:"absolute",top:"-4px",left:"-10px",width:"15px",height:"30px",borderRadius:"30px 0 0 30px",
backgroundColor:function(){return this.parent.raw.style.backgroundColor},transform:"rotate(-45deg)",transformOrigin:"15px 15px 0"}}],["div",{style:{position:"absolute",top:"-5px",left:"8px",width:"15px",height:"30px",borderRadius:"0 30px 30px 0",backgroundColor:function(){return this.parent.raw.style.backgroundColor},transform:"rotate(-45deg)",transformOrigin:"0 15px 0",$filled:{animation:"4.25s ease-in checkmarkRotatePlaceholder",$invalid:{animation:""}}}}],["div",{style:{$filled:{$invalid:{position:"relative",
zIndex:2,animation:"0.55s checkmarkAnimateError",transformOrigin:"50% 10px"}}}},["div",{style:{position:"absolute",zIndex:2,top:"10px",left:"3px",display:"block",width:"8px",height:"3px",borderRadius:"2px",backgroundColor:"#72c322",transform:"rotate(45deg)",$filled:{animation:"0.75s checkmarkAnimateSuccessTip"},$invalid:{backgroundColor:"#cc4820",left:"4px",top:"8px",width:"12px",$filled:{animation:""}}}}],["div",{style:{position:"absolute",zIndex:2,top:"8px",right:"2px",display:"block",width:"12px",
height:"3px",borderRadius:"2px",backgroundColor:"#72c322",transform:"rotate(-45deg)",$filled:{animation:"0.75s checkmarkAnimateSuccessLong"},$invalid:{backgroundColor:"#cc4820",top:"8px",left:"4px",right:"auto",$filled:{animation:""}}}}]],["div",{style:{position:"absolute",zIndex:2,top:"-4px",left:"-3px",width:"20px",height:"20px",borderRadius:"50%",borderWidth:"3px",borderStyle:"solid",borderColor:e.hexToRGBA("#72c322",.4),$invalid:{borderColor:e.hexToRGBA("#cc4820",.4)}}}],["div",{style:{position:"absolute",
zIndex:1,top:"-2px",left:"6px",width:"4px",height:"28px",backgroundColor:function(){return this.parent.raw.style.backgroundColor},transform:"rotate(-45deg)"}}]]])};t.prototype._defaults={mask:!1,maskPlaceholder:" ",maskGuide:!0,placeholder:!0,validWhenIsChoice:!1,validWhenRegex:!1,autoWidth:!1,checkmark:!0,keyboard:"text",dropdownOptions:{storeSelected:!1,lockScroll:!1},choices:null};t.prototype._construct=function(){this.state.typing=!1;this.cursor={prev:0,current:0};this.helpMessage=this.settings.alwaysShowHelp?
this.settings.help:"";if(!this.settings.mask){var b=this.settings,a;a:{switch(this.settings.keyboard){case "number":case "phone":case "tel":a="1+";break a;case "email":a="*+@*+.aa+";break a}a=void 0}b.mask=a}this.settings.mask&&(this.mask=new G(this.settings.mask,this.settings.maskPlaceholder,this.settings.maskGuide))};t.prototype._getValue=function(){return this._value};t.prototype._setValue=function(b){if(f.string(b)||f.number(b))return this._value=b};t.prototype._createElements=function(){var b,
a;b={relatedInstance:this,styleAfterInsert:!0};this.el=this._templates.field.spawn(this.settings.templates.field,b);this.settings.choices&&(this.dropdown=new q(this.settings.choices,this),this.dropdown.appendTo(this.el.child.innerwrap));this.settings.icon&&(f.string(this.settings.icon)&&(a=this.settings.icon),this._templates.icon.spawn(this.settings.templates.icon,b,a).insertBefore(this.el.child.input));this.settings.checkmark&&this._templates.checkmark.spawn(this.settings.templates.checkmark,b).appendTo(this.el.child.innerwrap);
this.el.child.input.prop("type",function(){switch(this.settings.keyboard){case "number":case "tel":case "phone":return"tel";case "password":return"password";case "url":return"url";default:return"text"}}.call(this));this.el.state("hasLabel",this.settings.label);this.el.child.innerwrap.raw._quickField=this.el.child.input.raw._quickField=this};t.prototype._attachBindings=function(){var b;b={listenMethod:"on"};d("visible").of(this.state).to(function(a){return function(b){return a.el.state("visible",b)}}(this));
d("hovered").of(this.state).to(function(a){return function(b){return a.el.state("hover",b)}}(this));d("focused").of(this.state).to(function(a){return function(b){return a.el.state("focus",b)}}(this));d("filled").of(this.state).to(function(a){return function(b){return a.el.state("filled",b)}}(this));d("disabled").of(this.state).to(function(a){return function(b){return a.el.state("disabled",b)}}(this));d("showError").of(this.state).to(function(a){return function(b){return a.el.state("showError",b)}}(this));
d("showHelp").of(this.state).to(function(a){return function(b){return a.el.state("showHelp",b)}}(this));d("valid").of(this.state).to(function(a){return function(b){a.el.state("valid",b);return a.el.state("invalid",!b)}}(this));d("showError",{updateOnBind:!1}).of(this.state).to(function(a){return function(b,d){switch(!1){case !f.string(b):return a.el.child.help.text(b);case !f.string(d):return a.el.child.help.text(a.helpMessage)}}}(this));d("label").of(this.settings).to("textContent").of(this.el.child.label.raw);
d("placeholder").of(this.settings).to("textContent").of(this.el.child.placeholder.raw).transform(function(a){return function(b){switch(!1){case !(!0===b&&a.settings.label):return a.settings.label;case !f.string(b):return b;default:return""}}}(this));d("helpMessage").of(this).to("textContent").of(this.el.child.help.raw).condition(function(a){return function(){return!a.state.showError}}(this));d("width",{updateEvenIfSame:!0}).of(this.state).to(function(a){return function(b){return(a.settings.autoWidth?
a.el.child.input:a.el).style({width:b})}}(this));this.settings.autoWidth&&d("_value",{updateEvenIfSame:!0,updateOnBind:!1}).of(this).to(function(a){return function(b){var c;b?(a.el.child.input.style("width",0),a.el.child.input.raw.scrollLeft=1E10,b=Math.max(a.el.child.input.raw.scrollLeft+a.el.child.input.raw.offsetWidth,a.el.child.input.raw.scrollWidth)+2,c="absolute"===a.el.child.label.styleSafe("position")?a.el.child.label.rect.width:0):(b=a.el.child.placeholder.rect.width,c=0);return a.state.width=
Math.max(b,c)+"px"}}(this)).updateOn("event:inserted",{listenMethod:"on"}).of(this);d("value").of(this.el.child.input.raw).transformSelf(function(a){return function(b){a.mask&&(a.mask.setValue(b),a.cursor.current=a.selection().start,b=a.mask.valueRaw?a.mask.value:"");return b}}(this)).to("_value").of(this).bothWays().pipe("valueRaw").of(this).transform(function(a){return function(b){return a.mask?a.mask.valueRaw:b}}(this));d("valueRaw").of(this).to(function(a){return function(b){a.state.filled=!!b;
b&&(a.state.interacted=!0);a.state.valid=a.validate();return a.emit("input")}}(this));this.settings.mask&&d("value",{updateEvenIfSame:!0}).of(this.el.child.input.raw).to(function(a){return function(b){if(a.state.focused)return a._scheduleCursorReset()}}(this));this.dropdown&&(d("typing",{updateEvenIfSame:!0}).of(this.state).to(function(a){return function(b){if(b){if(a.valueRaw)return a.dropdown.isOpen=!0,d("event:click").of(document).once.to(function(){return a.dropdown.isOpen=!1}).condition(function(b){return!m(b.target).parentMatching(function(b){return b===
a.el.child.innerwrap})})}else return setTimeout(function(){return a.dropdown.isOpen=!1},300)}}(this)),d("valueRaw",{updateOnBind:!1}).of(this).to(function(a){return function(b){var c,d,f,h,m;h=a.dropdown.options;c=0;for(d=h.length;c<d;c++)f=h[c],m=b?e.fuzzyMatch(b,f.value):!0,f.visible!==m&&(f.visible=m);a.dropdown.isOpen&&!b&&(a.dropdown.isOpen=!1)}}(this)),this.dropdown.onSelected(function(a){return function(b){a._value=b.label;b.value!==b.label&&(a.valueRaw=b.value);a.dropdown.isOpen=!1;return a.selection(a.el.child.input.raw.value.length)}}(this)));
d("event:mouseenter",b).of(this.el.child.input).to(function(a){return function(){return a.state.hovered=!0}}(this));d("event:mouseleave",b).of(this.el.child.input).to(function(a){return function(){return a.state.hovered=!1}}(this));d("event:focus",b).of(this.el.child.input).to(function(a){return function(){a.state.focused=!0;if(a.state.disabled)return a.blur()}}(this));d("event:blur",b).of(this.el.child.input).to(function(a){return function(){return a.state.typing=a.state.focused=!1}}(this));d("event:input",
b).of(this.el.child.input).to(function(a){return function(){return a.state.typing=!0}}(this));d("event:keydown",b).of(this.el.child.input).to(function(a){return function(){return a.cursor.prev=a.selection().end}}(this))};t.prototype.validate=function(b){var a;null==b&&(b=this._value);switch(!1){case !(this.settings.validWhenRegex&&f.regex(this.settings.validWhenRegex)):return this.settings.validWhenRegex.test(b);case !(this.settings.validWhenIsChoice&&null!=(a=this.settings.choices)&&a.length):return a=
this.settings.choices.filter(function(a){return a.value===b}),!!a.length;case !this.mask:return this.mask.validate(b);default:return!!b}};t.prototype._scheduleCursorReset=function(){var b,a;e.getIndexOfFirstDiff(this.mask.value,this.mask.prev.value);b=this.cursor.current;a=this.mask.normalizeCursorPos(b,this.cursor.prev);a!==b&&this.selection(a)};t.prototype.selection=function(b){var a,c;f.object(b)?(c=b.start,a=b.end):c=b;if(null!=c){if(!a||a<c)a=c;this.el.child.input.raw.setSelectionRange(c,a)}else return{start:this.el.child.input.raw.selectionStart,
end:this.el.child.input.raw.selectionEnd}};t.prototype.focus=function(){return this.el.child.input.raw.focus()};t.prototype.blur=function(){return this.el.child.input.raw.blur()};n.select=h=function(){return this};h.prototype=Object.create(n.prototype);h.prototype._templates={field:t.prototype._templates.field.extend({children:[null,{children:[{type:"div",options:{type:null,props:{tabIndex:0},style:{userSelect:"none",overflow:"scroll",width:function(b){var a;if(!b.settings.autoWidth)return a="",b.el.child.icon&&
(a+=" -"+b.el.child.icon.raw.styleSafe("width",!0)),b.el.child.caret&&(a+=" -"+b.el.child.caret.styleSafe("width",!0)),"calc(100% + ("+(a||"0px")+"))"}}}},null,["div",{ref:"caret",style:{position:"relative",zIndex:3,top:function(b){return b.el.child.input.height/2-8.5},display:"inline-block",width:"29px",height:"17px",paddingRight:"12px",boxSizing:"border-box",verticalAlign:"top",outline:"none",pointerEvents:"none",fill:"#909090"}},u.caretDown]]}]})};h.prototype._defaults={placeholder:!0,validWhenIsChoice:!1,
validWhenRegex:!1,validWhenChoseMin:Infinity,autoWidth:!1,labelFilter:null,choices:[],multiple:!1,dropdownOptions:{}};h.prototype._construct=function(){var b;if(null==(b=this.settings.choices)||!b.length)throw Error("Choices were not provided for choice field '"+(this.settings.label||this.ID)+"'");this.state.showHelp=this.settings.alwaysShowHelp?this.settings.help:!1;if(this.settings.dropdownOptions.multiple=this.settings.multiple)this.settings.dropdownOptions.help="Tip: press ESC to close this menu";
this.dropdown=new q(this.settings.choices,this);this._value&&this._setValue(this._value)};h.prototype._getValue=function(){var b;return this.settings.multiple?this.dropdown.selected.map(function(a){return a.value}):null!=(b=this.dropdown.selected)?b.value:void 0};h.prototype._setValue=function(b){var a,c,d;if(this.settings.multiple)for(f.array(b)||(b=[].concat(b)),a=0,c=b.length;a<c;a++)d=b[a],this.dropdown.setOptionFromString(d);else this.dropdown.setOptionFromString(b)};h.prototype._createElements=
function(){this.el=this._templates.field.spawn(this.settings.templates.field,{relatedInstance:this,styleAfterInsert:!0});this.dropdown.appendTo(this.el.child.innerwrap);this.el.child.placeholder.insertBefore(this.el.child.input);this.settings.label&&(this.el.child.label.text(this.settings.label),this.el.state("hasLabel",!0));this.el.child.innerwrap.raw._quickField=this.el.child.input.raw._quickField=this};h.prototype._attachBindings=function(){var b;b={listenMethod:"on"};d("visible").of(this.state).to(function(a){return function(b){return a.el.state("visible",
b)}}(this));d("hovered").of(this.state).to(function(a){return function(b){return a.el.state("hover",b)}}(this));d("focused").of(this.state).to(function(a){return function(b){return a.el.state("focus",b)}}(this));d("filled").of(this.state).to(function(a){return function(b){return a.el.state("filled",b)}}(this));d("disabled").of(this.state).to(function(a){return function(b){return a.el.state("disabled",b)}}(this));d("showError").of(this.state).to(function(a){return function(b){return a.el.state("showError",
b)}}(this));d("showHelp").of(this.state).to(function(a){return function(b){return a.el.state("showHelp",b)}}(this));d("valid").of(this.state).to(function(a){return function(b){a.el.state("valid",b);return a.el.state("invalid",!b)}}(this));d("showHelp").of(this.state).to("textContent").of(this.el.child.input.raw).transform(function(a){return a?a:""}).condition(function(a){return function(){return!a.state.showError}}(this));d("showError",{updateOnBind:!1}).of(this.state).to(function(a){return function(b,
d){switch(!1){case !f.string(b):return a.el.child.input.text(b);case !f.string(d):return a.el.child.input.text(a.state.showError)}}}(this));d("placeholder").of(this.settings).to("textContent").of(this.el.child.placeholder.raw).transform(function(a){return function(b){switch(!1){case !(!0===b&&a.settings.label):return a.settings.label;case !f.string(b):return b;default:return""}}}(this));d("width",{updateEvenIfSame:!0}).of(this.state).to(function(a){return function(b){return(a.settings.autoWidth?a.el.child.input:
a.el).style({width:b})}}(this));this.settings.autoWidth&&setTimeout(function(a){return function(){return d("valueLabel",{updateEvenIfSame:!0,updateOnBind:!1}).of(a).to(function(b){var c;b?(a.el.child.input.style("width",0),b=a.el.child.input.raw.scrollWidth+2,c="absolute"===a.el.child.label.styleSafe("position")?a.el.child.label.rect.width:0):(b=a.el.child.placeholder.rect.width,c=0);return a.state.width=Math.max(b,c)+"px"}).updateOn("event:inserted",{listenMethod:"on"}).of(a)}}(this));d("array:selected").of(this.dropdown).to("_value").of(this).and.to("valueLabel").of(this).transform(function(a){return function(b){if(b)return a.settings.multiple?
b.map(function(a){return a.label}).join(", "):b.label}}(this));d("valueLabel").of(this).to("textContent").of(this.el.child.input.raw).transform(function(a){return function(b){return a.settings.labelFormat?a.settings.labelFormat(b):b}}(this)).and.to(function(a){return function(b){a.state.filled=!!b;b&&(a.state.interacted=!0);return a.state.valid=a.validate()}}(this));d("array:selected",{updateOnBind:!1}).of(this).to(function(a){return function(){return a.emit("input")}}(this));d("event:click",b).of(this.el.child.input).to(function(a){return function(){var b,
g;if(!a.state.disabled)return a.dropdown.isOpen=!0,b=d("event:click").of(document).once.to(function(){return a.dropdown.isOpen=!1}).condition(function(b){return!m(b.target).parentMatching(function(b){return b===a.el.child.innerwrap})}),g=d("event:keydown").of(document).once.to(function(){return a.dropdown.isOpen=!1}).condition(function(a){return 27===a.keyCode}),d("isOpen",{updateOnBind:!1}).of(a.dropdown).once.to(function(){b.unBind();return g.unBind()}).condition(function(a){return!a})}}(this));
d("focused",{updateOnBind:!1}).of(this.state).to(function(a){return function(b){var c;return b?(c=[32,37,38,39,40],a.el.child.input.on("keydown.dropdownTrigger",function(b){var d;if(e.includes(c,b.keyCode)&&!a.dropdown.isOpen)return a.dropdown.isOpen=!0,null!=(d=a.dropdown.lastSelected)&&d.selected&&(a.dropdown.currentHighlighted=a.dropdown.lastSelected),b.preventDefault();if(9===b.keyCode&&a.dropdown.isOpen)return b.preventDefault()})):a.el.child.input.off("keydown.dropdownTrigger")}}(this));this.dropdown.onSelected(function(a){return function(b){if(!a.settings.multiple)return a.dropdown.isOpen=
!1}}(this));d("event:mouseenter",b).of(this.el.child.input).to(function(a){return function(){return a.state.hovered=!0}}(this));d("event:mouseleave",b).of(this.el.child.input).to(function(a){return function(){return a.state.hovered=!1}}(this));d("event:focus",b).of(this.el.child.input).to(function(a){return function(){a.state.focused=!0;if(a.state.disabled)return a.blur()}}(this));d("event:blur",b).of(this.el.child.input).to(function(a){return function(){return a.state.focused=!1}}(this))};h.prototype.validate=
function(b){var a,c;null==b&&(b=this.value);switch(!1){case !(this.settings.validWhenRegex&&f.regex(this.settings.validWhenRegex)):switch(!1){case !this.settings.multiple:return function(a){return function(){var c;if(0===b.length)return!1;c=b.filter(function(b){return a.settings.validWhenRegex.test(b)});return Infinity!==a.settings.validWhenChoseMin&&f.number(a.settings.validWhenChoseMin)?c.length>=a.settings.validWhenChoseMin:c.length===b.length}}(this)();default:return this.settings.validWhenRegex.test(b)}case !(this.settings.validWhenIsChoice&&
null!=(a=this.settings.choices)&&a.length):return a=this.settings.choices.filter(function(a){return a.value===b}),!!a.length;case !(this.settings.multiple&&-1>(c=this.settings.validWhenChoseMin)&&Infinity>c):return b.length>=this.settings.validWhenChoseMin;case !this.settings.multiple:return b.length;default:return!!b}};h.prototype.focus=function(){return this.el.child.input.raw.focus()};h.prototype.blur=function(){return this.el.child.input.raw.blur()};n.choice=h=function(){return this};h.prototype=
Object.create(n.prototype);h.prototype._templates={field:m.template(["div",{ref:"field",style:{position:"relative",display:"none",width:function(b){return b.state.width},boxSizing:"border-box",fontFamily:function(b){return b.settings.fontFamily},$visible:{$hasVisibleOptions:{display:"inline-block"}},$showError:{animation:"0.2s fieldErrorShake"}}},["div",{ref:"label",style:{display:"none",marginBottom:"12px",fontFamily:"inherit",fontSize:"13px",fontWeight:600,textAlign:"left",color:"#181818",cursor:"default",
pointerEvents:"none",$hasLabel:{display:"block"},$focus:{color:"#ff9c00"},$showError:{color:"#cc4820"}}}],["div",{ref:"innerwrap",style:{position:"relative",boxSizing:"border-box",fontFamily:"inherit"}}],["div",{ref:"help",style:{marginTop:"10px",fontFamily:"inherit",fontSize:"11px",color:"#909090",display:"none",$showError:{color:"#cc4820",display:"block"},$showHelp:{display:"block"}}}]]),choiceGroup:m.template(["div",{ref:"choiceGroup",style:{marginBottom:function(b){return b.settings.spacing},
userSelect:"none",fontSize:"0"}}]),choice:m.template(["div",{ref:"choice",style:{position:"relative",display:"inline-block",width:function(b){return"calc((100% - "+b.settings.spacing*(b.settings.perGroup-1)+"px) / "+b.settings.perGroup+")"},marginLeft:function(b){if(this.index)return"calc(100% - (100% - "+b.settings.spacing+"px))"},padding:"0 12px",borderRadius:"2px",backgroundColor:"white",fontFamily:"inherit",textAlign:"center",color:"#181818",boxSizing:"border-box",verticalAlign:"top",cursor:"pointer",
$selected:{color:"#ff9c00"},$unavailable:{display:"none"}}},["div",{ref:"border",style:{position:"absolute",zIndex:2,top:"0",left:"0",width:"100%",height:"100%",borderWidth:"1px",borderStyle:"solid",borderColor:"#d3d3d3",borderRadius:"2px",boxSizing:"border-box",$selected:{borderColor:"inherit",borderWidth:"2px"},$disabled:{backgroundColor:"#d3d3d3"}}}],["div",{ref:"label",style:{position:"relative",display:"block",padding:"15px 0px",fontFamily:"inherit",fontSize:"14px",fontWeight:"500"}}]]),choiceIcon:m.template(["div",
{ref:"icon",style:{position:"absolute",top:"50%",display:"block",fontSize:"20px",opacity:.16,transform:"translateY(-50%)"}}])};h.prototype._defaults={validWhenSelected:!1,validWhenIsChoice:!1,showSelectAll:!1,perGroup:7,spacing:8,choices:[]};h.prototype._construct=function(){var b;if(null==(b=this.settings.choices)||!b.length)throw Error("Choices were not provided for choice field '"+(this.settings.label||this.ID)+"'");this.settings.defaultValue||(this._value=this.settings.multiple?[]:null);this.lastSelected=
null;this.visibleOptionsCount=0;this.choices=this.settings.choices;this.settings.perGroup=Math.min(this.settings.perGroup,this.choices.length+(this.settings.multiple&&this.settings.showSelectAll?1:0))};h.prototype._getValue=function(){var b;return this.settings.multiple?this._value.map(function(a){return a.value}):null!=(b=this._value)?b.value:void 0};h.prototype._setValue=function(b){var a,c,d;if(this.settings.multiple)for(f.array(b)||(b=[].concat(b)),a=0,c=b.length;a<c;a++)d=b[a],this.setOptionFromString(d);
else this.setOptionFromString(b)};h.prototype._createElements=function(){var b,a,c;a={relatedInstance:this,styleAfterInsert:!0};this.el=this._templates.field.spawn(this.settings.templates.field,a);this.settings.label&&(this.el.child.label.text(this.settings.label),this.el.state("hasLabel",!0));b=this.settings.choices;c=this.settings.perGroup;Array(Math.ceil(b.length/c)).fill().map(function(a,d){return b.slice(d*c,d*c+c)}).forEach(function(b){return function(c,d){var g;g=b._templates.choiceGroup.spawn(b.settings.templates.choiceGroup,
a).appendTo(b.el.child.innerwrap);return c.forEach(function(c,e){var l;c.el=b._templates.choice.spawn(b.settings.templates.choice,a).appendTo(g);c.icon&&(l=b._templates.choiceIcon.spawn(b.settings.templates.choiceIcon,a).insertBefore(c.child.label),l.text(c.icon));c.el.index=e;c.el.totalIndex=e*d;c.el.prop("title",c.label);c.el.child.label.text(c.label);c.visible=!0;c.selected=!1;return c.unavailable=!1})}}(this));this.el.child.innerwrap.raw._quickField=this};h.prototype._attachBindings=function(){var b;
b={listenMethod:"on"};d("visible").of(this.state).to(function(a){return function(b){return a.el.state("visible",b)}}(this));d("hovered").of(this.state).to(function(a){return function(b){return a.el.state("hover",b)}}(this));d("filled").of(this.state).to(function(a){return function(b){return a.el.state("filled",b)}}(this));d("disabled").of(this.state).to(function(a){return function(b){return a.el.state("disabled",b)}}(this));d("showError").of(this.state).to(function(a){return function(b){return a.el.state("showError",
b)}}(this));d("showHelp").of(this.state).to(function(a){return function(b){return a.el.state("showHelp",b)}}(this));d("valid").of(this.state).to(function(a){return function(b){a.el.state("valid",b);return a.el.state("invalid",!b)}}(this));d("event:mouseenter",b).of(this.el).to(function(a){return function(){return a.state.hovered=!0}}(this));d("event:mouseleave",b).of(this.el).to(function(a){return function(){return a.state.hovered=!1}}(this));d("width").of(this.state).to(function(a){return function(b){return a.el.style({width:b})}}(this));
d("showError",{updateOnBind:!1}).of(this.state).to(function(a){return function(b,d){switch(!1){case !f.string(b):return a.el.child.help.text(b);case !f.string(d):return a.el.child.help.text(a.settings.help)}}}(this));d("visibleOptionsCount").of(this).to(function(a){return function(b){return a.el.state("hasVisibleOptions",!!b)}}(this));d("_value").of(this).to(function(a){return function(b){a.state.filled=!(null==b||!b.length);a.state.filled&&(a.state.interacted=!0);return a.state.valid=a.validate()}}(this));
d("array:_value",{updateOnBind:!1}).of(this).to(function(a){return function(){return a.emit("input")}}(this));d("lastSelected",{updateOnBind:!1,updateEvenIfSame:!0}).of(this).to(function(a){return function(b,d){if(a.settings.multiple){if(b.selected)return b.selected=!1,e.removeItem(a._value,b);b.selected=!0;return a._value.push(b)}if(b!==d)return b.selected=!0,null!=d&&(d.selected=!1),a._value=b}}(this));this.choices.forEach(function(a){return function(b){var c;d("visible").of(b).to(function(a){return b.el.state("visible",
a)}).and.to(function(b){return a.visibleOptionsCount+=b?1:-1});d("selected",{updateOnBind:!1}).of(b).to(function(a){return b.el.state("selected",a)});d("unavailable",{updateOnBind:!1}).of(b).to(function(a){return b.el.state("unavailable",a)}).and.to(function(){return a.lastSelected=b}).condition(function(c){return c&&a.settings.multiple&&b.selected});d("event:click",{listenMethod:"on"}).of(b.el).to(function(){return a.lastSelected=b});if(null!=(c=b.conditions)&&c.length)return b.unavailable=!0,b.allFields=
a.allFields,e.initConditions(b,b.conditions,function(){return b.unavailable=!e.validateConditions(b.conditions)})}}(this))};h.prototype.validate=function(b){null==b&&(b=this._value);this.settings.multiple?(f.array(b)||(b=[].concat(b)),f.object(b[0])||(b=b.map(function(a){return a.value}))):f.object(b)&&(b=b.value);switch(!1){case "number"!==typeof this.settings.validWhenSelected:return(null!=b?b.length:void 0)>=this.settings.validWhenSelected;case !this.settings.validWhenIsChoice:return this.settings.multiple?
e.includes(b,this.settings.validWhenIsChoice):b===this.settings.validWhenIsChoice;default:return!(null==b||!b.length)}};h.prototype.findChoice=function(b,a){return this.choices.filter(function(c){return b===(a?c.label:c.value)})[0]};h.prototype.findChoiceAny=function(b){return this.findChoice(b)||this.findChoice(b,!0)};h.prototype.setOptionFromString=function(b,a){var c;if((c=this.findChoiceAny(b,a))&&c!==this.lastSelected&&(!this.settings.multiple||!e.includes(this._value,c)))return this.lastSelected=
c};q=function(b,a){this.options=b;this.field=a;this.isOpen=!1;this.settings=J.deep.clone.keys(this._defaults).filter(this._settingFilters)(this._defaults,this.field.settings.dropdownOptions);this.selected=this.settings.multiple?[]:null;this.currentHighlighted=this.lastSelected=null;this.visibleOptionsCount=0;this.visibleOptions=[];this.els={};this._selectedCallback=ca;this._createElements();this._attachBindings();return this};q.prototype._templates={container:m.template(["div",{ref:"dropdown",style:{position:"absolute",
zIndex:10,overflow:"hidden",top:function(b){return"text"===b.field.type?this.parent.raw.style.height:"-7px"},left:function(){return 0>this.parent.rect.left-5?0:-5},display:"none",backgroundColor:"#f6f6f6",boxShadow:"0px 6px 10px "+e.hexToRGBA("000000",.32),borderWidth:"1px",borderStyle:"solid",borderColor:"#d1d1d1",borderRadius:"5px",boxSizing:"border-box",padding:"4px 0",$isOpen:{$hasVisibleOptions:{display:"block"}}}}]),list:m.template(["div",{ref:"list",passStateToChildren:!1,style:{position:"relative",
overflow:"scroll",overflowScrolling:"touch"}}]),option:m.template(["div",{style:{display:"none",fontSize:"0",color:"#000000",userSelect:"none",cursor:"pointer",$visible:{display:"block"},$hover:{color:"#ffffff",backgroundColor:"#4C96FF"}}},m.template(["div",{style:{display:"inline-block",verticalAlign:"top",width:"20px",lineHeight:"20px",fontSize:"13px",textAlign:"center",color:"inherit",stroke:"currentColor",visibility:"hidden",$selected:{visibility:"visible"}}},u.checkmark]),m.template(["div",{style:{display:"inline-block",
overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordWrap:"normal",maxWidth:function(){return"calc(100% - "+this.prev.raw.style.width+")"},paddingRight:"10px",lineHeight:"20px",fontSize:"11px",fontFamily:T.fontFamily,color:"inherit",boxSizing:"border-box"}}])]),scrollIndicatorUp:m.template(["div",{ref:"scrollIndicatorUp",style:{position:"absolute",top:0,left:0,display:"none",width:"100%",height:"20px",backgroundColor:"#f6f6f6",color:"#000000",textAlign:"center",$visible:{display:"block"}}},
["div",{style:{position:"absolute",top:"50%",left:0,right:0,width:"15px",height:"15px",display:"block",margin:"0 auto",transform:"translateY(-50%)"}},u.caretUp]]),scrollIndicatorDown:m.template(["div",{ref:"scrollIndicatorDown",style:{position:"absolute",bottom:0,left:0,display:"none",width:"100%",height:"20px",backgroundColor:"#f6f6f6",color:"#000000",textAlign:"center",$visible:{display:"block"}}},["div",{style:{position:"absolute",top:"50%",left:0,right:0,width:"15px",height:"15px",display:"block",
margin:"0 auto",transform:"translateY(-50%)"}},u.caretDown]]),help:m.template(["div",{ref:"help",style:{display:"none",borderTop:"2px solid rgba(0,0,0,0.05)",padding:"4px 12px 1px",color:"rgba(0,0,0,0.5)",fontWeight:"500",fontSize:"11px",userSelect:"none",$showHelp:{display:"block"}}}])};q.prototype._defaults={maxHeight:300,multiple:!1,storeSelected:!0,lockScroll:!0,help:"",templates:{}};q.prototype._settingFilters={maxHeight:function(b){return f.number(b)}};q.prototype._createElements=function(){var b;
b={relatedInstance:this,styleAfterInsert:!0};this.els.container=this._templates.container.spawn(this.settings.templates.container,J({passStateToChildren:!1},b));this.els.list=this._templates.list.spawn(this.settings.templates.list,b).appendTo(this.els.container);this.els.help=this._templates.help.spawn(this.settings.templates.help,b).appendTo(this.els.container);this.els.scrollIndicatorUp=this._templates.scrollIndicatorUp.spawn(this.settings.templates.scrollIndicatorUp,b).appendTo(this.els.container);
this.els.scrollIndicatorDown=this._templates.scrollIndicatorDown.spawn(this.settings.templates.scrollIndicatorDown,b).appendTo(this.els.container);this.options.forEach(function(a){return function(c){c.el=a._templates.option.spawn({options:{props:{title:c.label}}},b).appendTo(a.els.list);c.el.children[1].text(c.label);c.visible=!0;c.selected=!1;return c.unavailable=!1}}(this))};q.prototype._attachBindings=function(){d("help").of(this.settings).to("textContent").of(this.els.help.raw).and.to(function(b){return function(a){return b.els.help.state("showHelp",
a)}}(this));d("visibleOptionsCount").of(this).to(function(b){return function(a){return b.els.container.state("hasVisibleOptions",!!a)}}(this));d("isOpen",{updateOnBind:!1}).of(this).to(function(b){return function(a){b.els.container.state("isOpen",a);a||(b.currentHighlighted=null);b.settings.lockScroll&&(a?e.lockScroll(b.els.list):e.unlockScroll());if(a)return b.list_setMaxHeight(),b.list_scrollToSelected()}}(this));d("lastSelected",{updateOnBind:!1,updateEvenIfSame:!0}).of(this).to(function(b){return function(a,
c){b.settings.storeSelected&&(b.settings.multiple?a.selected?(a.selected=!1,e.removeItem(b.selected,a)):(a.selected=!0,b.selected.push(a)):(a.selected=!0,a!==c&&null!=c&&(c.selected=!1),b.selected=a));return b._selectedCallback(a,c)}}(this));d("currentHighlighted").of(this).to(function(b){return function(a,b){b&&b.el.state("hover",!1);if(a)return a.el.state("hover",!0)}}(this));d("focused",{updateOnBind:!1}).of(this.field.state).to(function(b){return function(a){return a?b.field.el.child.input.on("keydown.dropdownNav",
function(a){if(b.isOpen)switch(a.keyCode){case 38:return a.preventDefault(),b.highlightPrev();case 40:return a.preventDefault(),b.highlightNext();case 13:return a.preventDefault(),b.selectHighlighted();case 27:return a.preventDefault(),b.isOpen=!1}}):b.field.el.child.input.off("keydown.dropdownNav")}}(this));d("scrollTop",{updateEvenIfSame:!0}).of(this.els.list.raw).to(function(b){return function(a){var c;c=b.els.list.raw.scrollHeight-b.els.list.raw.clientHeight>a;b.els.scrollIndicatorUp.state("visible",
0<a);return b.els.scrollIndicatorDown.state("visible",c)}}(this)).condition(function(b){return function(){return b.isOpen&&!b.settings.help&&b.els.list.raw.scrollHeight!==b.els.list.raw.clientHeight&&100<=b.els.list.raw.clientHeight}}(this)).updateOn("event:scroll").of(this.els.list.raw).updateOn("isOpen").of(this);this.els.scrollIndicatorUp.on("mouseenter",function(b){return function(){return b.list_startScrolling("up")}}(this));this.els.scrollIndicatorUp.on("mouseleave",function(b){return function(){return b.list_stopScrolling()}}(this));
this.els.scrollIndicatorDown.on("mouseenter",function(b){return function(){return b.list_startScrolling("down")}}(this));this.els.scrollIndicatorDown.on("mouseleave",function(b){return function(){return b.list_stopScrolling()}}(this));return this.options.forEach(function(b){return function(a,c){var g;a.index=c;d("visible").of(a).to(function(a){return b.visibleOptionsCount+=a?1:-1}).and.to(function(c){a.el.state("visible",c);return c?(b.visibleOptions.push(a),b.visibleOptions.sort(function(a,b){return a.index-
b.index})):e.removeItem(b.visibleOptions,a)});d("selected",{updateOnBind:!1}).of(a).to(function(b){return a.el.state("selected",b)});d("unavailable",{updateOnBind:!1}).of(a).to(function(b){return a.el.state("unavailable",b)}).and.to(function(){return b.lastSelected=a}).condition(function(c){return c&&b.settings.multiple&&a.selected});d("event:click",{listenMethod:"on"}).of(a.el).to(function(){return b.lastSelected=a});d("event:mouseenter",{listenMethod:"on"}).of(a.el).to(function(){return b.currentHighlighted=
a});if(null!=(g=a.conditions)&&g.length)return a.unavailable=!0,a.allFields=b.field.allFields,e.initConditions(a,a.conditions,function(){return a.unavailable=!e.validateConditions(a.conditions)})}}(this))};q.prototype.appendTo=function(b){return this.els.container.appendTo(b)};q.prototype.onSelected=function(b){return this._selectedCallback=b};q.prototype.findOption=function(b,a){return this.options.filter(function(c){return b===(a?c.label:c.value)})[0]};q.prototype.findOptionAny=function(b){return this.findOption(b)||
this.findOption(b,!0)};q.prototype.getLabelOfOption=function(b){var a;return(null!=(a=this.options.filter(function(a){return b===a.value})[0])?a.label:void 0)||""};q.prototype.setOptionFromString=function(b,a){var c;if((c=this.findOptionAny(b,a))&&c!==this.lastSelected&&(!this.settings.multiple||!e.includes(this.selected,c)))return this.lastSelected=c};q.prototype.highlightPrev=function(){var b;b=this.visibleOptions.indexOf(this.currentHighlighted);return 0<b?this.currentHighlighted=this.visibleOptions[b-
1]:this.currentHighlighted=this.visibleOptions[this.visibleOptions.length-1]};q.prototype.highlightNext=function(){var b;b=this.visibleOptions.indexOf(this.currentHighlighted);return b<this.visibleOptions.length-1?this.currentHighlighted=this.visibleOptions[b+1]:this.currentHighlighted=this.visibleOptions[0]};q.prototype.selectHighlighted=function(){if(this.currentHighlighted)return this.lastSelected=this.currentHighlighted};q.prototype.list_setMaxHeight=function(){var b,a,c,d;d=this.settings.maxHeight;
if(b=this.els.container.parentMatching(function(a){a=a.style("overflowY");return"hidden"===a||"scroll"===a}))c=this.els.container.rect,a=b.rect,b=c.top+this.settings.maxHeight-a.bottom,c.top>=a.bottom?console.warn("The dropdown for element '"+this.field.ID+"' cannot be displayed as it's hidden by the parent overflow"):0<b&&(c=c.height-this.els.list.rect.height,d=b-c);this.els.list.style("maxHeight",d);return this.els.list.style("minWidth",this.field.el.child.innerwrap.width+10)};q.prototype.list_scrollToSelected=
function(){var b,a;if(this.selected&&!this.settings.multiple)return b=this.selected.el.raw.offsetTop,a=this.selected.el.raw.clientHeight,this.els.list.raw.scrollTop=b-3*a};q.prototype.list_startScrolling=function(b){return this.scrollIntervalID=setInterval(function(a){return function(){return a.els.list.raw.scrollTop+="up"===b?-20:20}}(this),50)};q.prototype.list_stopScrolling=function(){return clearInterval(this.scrollIntervalID)};Q="1#aA*^".split("");G=function(b,a,c){this.pattern=b;this.placeholder=
a;this.guide=c;this.optionalsOffset=this.minRequiredCount=0;this.lastValid=null;this.lastInput="";this.valid=!1;this.valueStrict=this.valueRaw=this.value="";this.prev={};this.literals=[];this.optionals=[];this.repeatables=[];this._normalizePattern();this.setValue("");return this};G.prototype._normalizePattern=function(){var b,a,c,d,f,h,m,n;h="";for(b=f=n=d=0;n<this.pattern.length;){m=this.pattern[n];switch(!1){case !a:a=!1;this.literals.push(n-f);h+=m;0===d&&b++;break;case "\\"!==m:a=!0;f++;break;
case "["!==m:c=!0;f++;break;case "]"!==m:c=!1;f++;break;case "+"!==m:f++;break;default:e.includes(Q,m)?c?this.optionals.push(n-f):d++:(this.literals.push(n-f),0===d&&b++),"+"===this.pattern[n+1]&&this.repeatables.push(n-f),h+=m}n++}this.minRequiredCount=d;this.firstNonLiteral=b;return this.pattern=h};G.prototype.setValue=function(b){var a,c,d,f,h,m,n,q,t,u,y,z,x,C,A,w;c=e.getIndexOfFirstDiff(this.value,b);a=X(this.value,b);(h=1===b.length&&0===this.valueRaw.length?!1:this.value.length>b.length)||
(q=b.slice(c,c+a));z=y=u="";C=this.pattern.length;f=A=0;if(!(!a&&this.value||h&&e.includes(this.literals,c-this.optionalsOffset)&&c-this.optionalsOffset>this.firstNonLiteral)){for(;A<C;){w=A;x=this.pattern[A];d=b[f];m=e.includes(this.literals,A);n=e.includes(this.optionals,A);c=e.includes(this.repeatables,A);if(b&&!d&&!this.guide)break;switch(!1){case !m:u+=x;z+=x;x===d?e.includes(Q,x)&&!h||a>=this.literals.length&&1<a&&this.valueRaw.length||f++:1===a&&b[f+1]===x&&(f+=2);A++;break;case !e.includes(Q,
x):if(m=d&&L(d,x)){if("A"===x||"^"===x)d=d.toUpperCase();u+=d;y+=d;if(!n&&!c||t!==A)z+=d;t=b[f+1]&&L(b[f+1],x);f++;t&&c||A++;c&&!t&&e.includes(this.literals,A)&&b[f]!==this.pattern[A]&&f++}else 1!==a||!L(b[f+1],x)||h?(A++,!n&&this.guide&&(u+=this.placeholder,z+=this.placeholder)):n&&f++,n||f++;break;default:debugger}t=w}this.prev.value=this.value;this.prev.valueRaw=this.valueRaw;this.prev.valueStrict=this.valueStrict;this.value=u;this.valueRaw=y;this.valueStrict=z;q&&(this.lastInput=q);this.optionalsOffset=
X(u,z);this.valid=this.validate(b,!0)}};G.prototype.validate=function(b,a){var c,d,h,m,n,q,t,u;if(!f.string(b)||b.length<this.minRequiredCount)return!1;t=this.pattern.length;for(d=u=0;u<t;)switch(q=this.pattern[u],c=b[d],h=e.includes(this.literals,u),m=e.includes(this.optionals,u),n=e.includes(this.repeatables,u),!1){case !h:u++;q===c&&null!=b[d+1]&&d++;break;case !e.includes(Q,q):if(c=c&&L(c,q))m=b[d+1]&&L(b[d+1],q),d++,m&&n||u++;else if(m)u++;else return a&&(this.lastValid=0>d-1?null:d-1),!1}a&&
(this.lastValid=d);return!0};G.prototype.normalizeCursorPos=function(b,a){var c,d,f,h,m,n;f=a>b;b<=this.firstNonLiteral&&(c=1<=this.firstNonLiteral-b&&!f||1===this.firstNonLiteral?1:0,b=this.firstNonLiteral+c);h=0;m=this.value.slice(0,b);n=this.valueStrict.slice(0,b);c=e.getIndexOfFirstDiff(this.value,this.prev.value);for(d=0;d<b;)m[d]!==n[d-h]&&h++,d++;if(f){if(b===this.firstNonLiteral)return b;if(e.includes(this.literals,b-1)||this.value[b-1]===this.placeholder)return b-(0===h?1:0)}else{if(null===
c)return e.includes(this.literals,b-h-1)&&n[b-h-1]===this.lastInput?b:Math.max(b-1,this.firstNonLiteral);if(e.includes(this.repeatables,b-h)||e.includes(this.repeatables,c-h))return b;if(e.includes(this.literals,b-h))return b+(0===h?1:0);if(e.includes(this.literals,c-1)&&c===b)return b+1}return b};L=function(b,a){switch(a){case "1":return aa.test(b);case "#":return K.test(b);case "a":case "A":return C.test(b);case "*":case "^":return O.test(b);default:return!1}};H.SVG=u;H.version="1.0.5b";return null!=
("undefined"!==typeof module&&null!==module?module.exports:void 0)?module.exports=H:"function"===typeof define&&define.amd?define(["quickfield"],function(){return H}):this.Field=H}()}})(this)();
