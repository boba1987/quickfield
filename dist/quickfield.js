var slice=[].slice;
(function(ra){return function(){var H;H=function(H,G,M,Q){Q=function(e){return M[e]?G[e]:(M[e]=1,G[e]={},G[e]=H[e](G[e]))};H[3]=function(e){var r={exports:e},p=[].slice;(function(){var e;e=function(e){return function(e){var g,r,z,d,m;r=function(d){var e,F,g;e=function(d){return Array.isArray(d)};F=function(d){return d&&"[object Object]"===Object.prototype.toString.call(d)||e(d)};g=function(d,e){return e.notDeep?-1!==e.notDeep.indexOf(d):!1};return d=r=function(d,n,p){var C,m,b,a,c,f;if(!n||"object"!==
typeof n&&"function"!==typeof n)n={};C=0;for(b=p.length;C<b;C++)if(a=p[C],null!=a)for(m in a)if(c=a[m],f=n[m],!(c===n||void 0===c||null===c&&!d.allowNull||d.keys&&-1===d.keys.indexOf(m)||d.notKeys&&-1!==d.notKeys.indexOf(m)||d.own&&!a.hasOwnProperty(m)||d.globalFilter&&!d.globalFilter(c,m,a)||d.filters&&d.filters[m]&&!d.filters[m](c,m,a)))switch(d.globalTransform&&(c=d.globalTransform(c,m,a)),d.transforms&&d.transforms[m]&&(c=d.transforms[m](c,m,a)),!1){case !(d.concat&&e(c)&&e(f)):n[m]=f.concat(c);
break;case !(d.deep&&F(c)&&!g(m,d)):f=F(f)?f:e(c)?[]:{};n[m]=r(d,f,[c]);break;default:n[m]=c}return n}}({});m=function(d){var e,F,g;F={};for(e in d)g=d[e],F[e]=g;return F};d=function(d){if(d)return"object"!==typeof d||Array.isArray(d)?[].concat(d):Object.keys(d)};g=function(d){var e;e=d.target?function(){var d;d=1<=arguments.length?p.call(arguments,0):[];return r(e.options,e.options.target,d)}:function(){var d,g;g=arguments[0];d=2<=arguments.length?p.call(arguments,1):[];return r(e.options,g,d)};
e.options=d;Object.defineProperties(e,z);return e};z={deep:{get:function(){var d;d=m(this.options);d.deep=!0;return g(d)}},own:{get:function(){var d;d=m(this.options);d.own=!0;return g(d)}},allowNull:{get:function(){var d;d=m(this.options);d.allowNull=!0;return g(d)}},concat:{get:function(){var d;d=m(this.options);d.concat=!0;return g(d)}},clone:{get:function(){var d;d=m(this.options);d.target={};return g(d)}},notDeep:{get:function(){var e;e=m(this.options);return function(p){e.notDeep=d(p);return g(e)}}},
keys:{get:function(){var e;e=m(this.options);return function(p){e.keys=d(p);return g(e)}}},notKeys:{get:function(){var e;e=m(this.options);return function(p){e.notKeys=d(p);return g(e)}}},transform:{get:function(){var d;d=m(this.options);return function(e){"function"===typeof e?d.globalTransform=e:e&&"object"===typeof e&&(d.transforms=e);return g(d)}}},filter:{get:function(){var d;d=m(this.options);return function(e){"function"===typeof e?d.globalFilter=e:e&&"object"===typeof e&&(d.filters=e);return g(d)}}}};
return e=g({})}}(this)({});null!=("undefined"!==typeof r&&null!==r?r.exports:void 0)?r.exports=e:"function"===typeof define&&define.amd?define(["smart-extend"],function(){return e}):window.extend=e})();return r.exports};H[4]=function(e){var r;return r=e={defined:function(e){return void 0!==e},array:function(e){return e instanceof Array},object:function(e){return"object"===typeof e&&e},objectPlain:function(e){return r.object(e)&&"[object Object]"===Object.prototype.toString.call(e)},string:function(e){return"string"===
typeof e},number:function(e){return"number"===typeof e},"function":function(e){return"function"===typeof e},iterable:function(e){return r.object(e)&&r.number(e.length)}}};return Q};H=H({},{},{});return function(){var X,G,M,Q,e,r,p,g,O,A,S,u,z,d,m,F,C,Y,w,T,n,U,I,K;e=function(b){return function(a){var b={exports:a};(function(){var a,c,d,e,h,g,n,m,r,y,p,z,u,B,w,F,E,C,A,G,J;a=function(a){var c={exports:a};(function(){var a,b,l,v,d,f,e,k;v=["webkit","moz","ms","o"];f="backgroundPositionX backgroundPositionY blockSize borderWidth columnRuleWidth cx cy fontSize gridColumnGap gridRowGap height inlineSize lineHeight minBlockSize minHeight minInlineSize minWidth maxHeight maxWidth outlineOffset outlineWidth perspective shapeMargin strokeDashoffset strokeWidth textIndent width wordSpacing top bottom left right x y".split(" ");
["margin","padding","border","borderRadius"].forEach(function(a){var c,b,l,v,d;f.push(a);v=["Top","Bottom","Left","Right"];d=[];b=0;for(l=v.length;b<l;b++)c=v[b],d.push(f.push(a+c));return d});k=document.createElement("div").style;a=/^\d+(?:[a-z]|\%)+$/i;b=/\d+$/;l=/\s/;e={includes:function(a,c){return a&&-1!==a.indexOf(c)},isIterable:function(a){return a&&"object"===typeof a&&"number"===typeof a.length&&!a.nodeType},isPropSupported:function(a){return"undefined"!==typeof k[a]},toTitleCase:function(a){return a[0].toUpperCase()+
a.slice(1)},normalizeProperty:function(a){var c,b,l;if(this.isPropSupported(a))return a;l=this.toTitleCase(a);a=0;for(c=v.length;a<c;a++)if(b=v[a],b=""+b+l,this.isPropSupported(b))return b},normalizeValue:function(c,v){this.includes(f,c)&&null!==v&&(v=""+v,!b.test(v)||a.test(v)||l.test(v)||(v+="px"));return v}};d=function(a,c,b){var l,v,f;if(e.isIterable(a))for(l=0,v=a.length;l<v;l++)f=a[l],d(f,c,b);else if("object"===typeof c)for(l in c)b=c[l],d(a,l,b);else{c=e.normalizeProperty(c);if("undefined"===
typeof b)return getComputedStyle(a)[c];c&&(a.style[c]=e.normalizeValue(c,b))}};d.version="1.0.5";return null!=("undefined"!==typeof c&&null!==c?c.exports:void 0)?c.exports=d:"function"===typeof define&&define.amd?define(["quickdom"],function(){return d}):this.Css=d})();return c.exports}.call(this,{});y=H(3);m="className href selected type name id checked".split(" ");B={includes:function(a,c){return a&&-1!==a.indexOf(c)},removeItem:function(a,c){var b;b=a.indexOf(c);-1!==b&&a.splice(b,1);return a},
normalizeGivenEl:function(a){switch(!1){case !c.domNode(a):return e(a);case !c.string(a):return e.text(a);default:return a}}};c=H(4);c=y.clone(c,{domDoc:function(a){return a&&9===a.nodeType},domEl:function(a){return a&&1===a.nodeType},domText:function(a){return a&&3===a.nodeType},domNode:function(a){return c.domEl(a)||c.domText(a)},quickDomEl:function(a){return a instanceof h},template:function(a){return a instanceof g}});h=function(a,c){this.type=a;this.options=c;this.el=this.options.existing||("text"===
this.type?document.createTextNode(this.options.text):"*"===this.type[0]?document.createElementNS("http://www.w3.org/2000/svg",this.type.slice(1)):document.createElement(this.type));"text"===this.type&&(this.append=this.prepend=this.attr=function(){});this._parent=null;this._state=[];this._children=[];this._childRefs={};this._insertedCallbacks=[];this._eventCallbacks={__refs:{}};this._normalizeOptions();this._applyOptions();this._attachStateEvents();return this.el._quickElement=this};Object.defineProperties(h.prototype,
{raw:{get:function(){return this.el}},0:{get:function(){return this.el}},css:{get:function(){return this.style}},replaceWith:{get:function(){return this.replace}}});h.prototype.parentsUntil=function(a){return u(this,a)};h.prototype.parentMatching=function(a){var b;if(c["function"](a))for(b=this.parent;b;){if(a(b))return b;b=b.parent}};Object.defineProperties(h.prototype,{children:{get:function(){var a,c,b,d;if(this.el.childNodes.length!==this._children.length)for(this._children.length=0,d=this.el.childNodes,
c=0,b=d.length;c<b;c++)a=d[c],4>a.nodeType&&this._children.push(e(a));return this._children}},parent:{get:function(){this._parent&&this._parent.el===this.el.parentNode||c.domDoc(this.el.parentNode)||(this._parent=e(this.el.parentNode));return this._parent}},parents:{get:function(){return u(this)}},next:{get:function(){return e(this.el.nextSibling)}},prev:{get:function(){return e(this.el.previousSibling)}},nextAll:{get:function(){var a,c;c=[];for(a=e(this.el.nextSibling);a;)c.push(a),a=a.next;return c}},
prevAll:{get:function(){var a,c;c=[];for(a=e(this.el.previousSibling);a;)c.push(a),a=a.prev;return c}},siblings:{get:function(){return this.prevAll.reverse().concat(this.nextAll)}}});u=function(a,b){var l,d;c["function"](b)||(b=void 0);d=[];for(l=a.parent;l;)d.push(l),l=l.parent,b&&b(l)&&(l=null);return d};h.prototype._normalizeOptions=function(){var a;null==(a=this.options).style&&(a.style={});this.options.styleShared={};this.options["class"]&&(this.options.className=this.options["class"]);this.options.url&&
(this.options.href=this.options.url);null==(a=this.options).relatedInstance&&(a.relatedInstance=this);null==(a=this.options).unpassableStates&&(a.unpassableStates=[]);null==(a=this.options).passStateToChildren&&(a.passStateToChildren=!0);this.options.stateTriggers=y.deep({hover:{on:"mouseenter",off:"mouseleave"},focus:{on:"focus",off:"blur"}},this.options.stateTriggers);this._normalizeStyle();return this};h.prototype._normalizeStyle=function(){var a,c,b,d,f;c=Object.keys(this.options.style);b=c.filter(function(a){return"$"===
a[0]});d=B.removeItem(b.slice(),"$base");this.providedStates=b.map(function(a){return a.slice(1)});!B.includes(b,"$base")&&c.length&&(b.length?(c=c.filter(function(a){return"$"!==a[0]}),this.options.style.$base=y.clone.keys(c)(this.options.style)):this.options.style={$base:this.options.style});a=function(c){return function(b,l){var d,f,v,e,k,t,h;v=Object.keys(b).filter(function(a){return"$"===a[0]});if(v.length){c.hasSharedStateStyle=!0;null==c._stateShared&&(c._stateShared=[]);k=[];d=0;for(e=v.length;d<
e;d++)f=v[d],t=l.concat(f.slice(1)),h=t.join("+"),c.options.styleShared[h]=c.options.style["$"+h]=b[f],a(b[f],t),k.push(delete b[f]);return k}}}(this);c=0;for(b=d.length;c<b;c++)f=d[c],a(this.options.style[f],[f.slice(1)]);return this};h.prototype._applyOptions=function(){var a,c,b,d;(b=this.options.id||this.options.ref)&&this.attr("data-ref",this.ref=b);this.options.id&&(this.el.id=this.options.id);this.options.className&&(this.el.className=this.options.className);this.options.href&&(this.el.href=
this.options.href);this.options.type&&(this.el.type=this.options.type);this.options.name&&(this.el.name=this.options.name);this.options.value&&(this.el.value=this.options.value);this.options.selected&&(this.el.selected=this.options.selected);this.options.checked&&(this.el.checked=this.options.checked);if(this.options.props)for(c in d=this.options.props,d)b=d[c],this.prop(c,b);if(this.options.attrs)for(c in d=this.options.attrs,d)b=d[c],this.attr(c,b);if(this.options.styleAfterInsert)this.onInserted(a=
function(c){return function(){var b;b=c.parents.slice(-1)[0];return b.raw===document.documentElement?c.style(y.clone.apply(y,[c.options.style.$base].concat(slice.call(c._getStateStyles(c._getActiveStates()))))):b.onInserted(a)}}(this));else this.style(this.options.style.$base);Object.defineProperty(this,"_parent",{set:function(a){var c,b,l;if(a)for(delete this._parent,this._parent=a,l=this._insertedCallbacks,c=0,b=l.length;c<b;c++)a=l[c],a(this)}});return this};h.prototype._attachStateEvents=function(){var a,
b,d,f;b=this.options.stateTriggers;a=function(a){return function(b,l){var d,f;f=c.string(l)?l:l.on;c.object(l)&&(d=l.off);a._listenTo(f,function(){return a.state(b,!0)});if(d)return a._listenTo(d,function(){return a.state(b,!1)})}}(this);for(d in b)f=b[d],a(d,f);return this};A=/\s+/;h.prototype.on=function(a,b){var l,d;c.string(a)&&c["function"](b)&&(d=a.split("."),l=d[1],a=d[0],a.split(A).forEach(function(a){return function(c){a._eventCallbacks[c]||(a._eventCallbacks[c]=[],a._listenTo(c,function(b){var l,
d,f,v;v=a._eventCallbacks[c];d=0;for(f=v.length;d<f;d++)l=v[d],l.call(a.el,b)}));l&&(a._eventCallbacks.__refs[l]=b);return a._eventCallbacks[c].push(b)}}(this)));return this};h.prototype.off=function(a,b){var l,d;if(c.string(a))d=a.split("."),l=d[1],a=d[0],a.split(A).forEach(function(a){return function(d){if(a._eventCallbacks[d]){null==b&&(b=a._eventCallbacks.__refs[l]);if(c["function"](b))return B.removeItem(a._eventCallbacks[d],b);if(!l)return a._eventCallbacks[d].length=0}}}(this));else for(d in this._eventCallbacks)this.off(d);
return this};h.prototype.emit=function(a,b,d){var l;null==b&&(b=!0);null==d&&(d=!0);a&&c.string(a)&&(l=document.createEvent("Event"),l.initEvent(a,b,d),this.el.dispatchEvent(l));return this};h.prototype.onInserted=function(a,b){null==b&&(b=!0);if(c["function"](a))return this._parent?b&&a(this):this._insertedCallbacks.push(a),this};h.prototype._listenTo=function(a,b){this.el[this.el.addEventListener?"addEventListener":"attachEvent"](this.el.addEventListener?a:"on"+a,b);return this};h.prototype.updateOptions=
function(a){c.object(a)&&(this.options=a,this._normalizeOptions(),this._applyOptions(this.options));return this};h.prototype.state=function(a,b,d){var l,f,e,v,k,h,x,L,g;if(1===arguments.length)return B.includes(this._state,a);if(this._statePipeTarget&&d!==this)return this._statePipeTarget.state(a,b,this),this;if(c.string(a)){"$"===a[0]&&(a=a.slice(1));e=!!b;if("base"===a)return this;f=this._getActiveStates(a,!1);l=this._getStateStyles(f);this.state(a)!==e&&(this.options.style["$"+a]&&(k=this.options.style["$"+
a],g=this.providedStates.indexOf(a),f=f.filter(function(a){return function(b){return a.providedStates.indexOf(b)>g}}(this)),h=this._getStateStyles(f)),e?(this._state.push(a),k&&this.style(y.clone.keys(k).apply(null,[k].concat(slice.call(h))))):(B.removeItem(this._state,a),k&&(v=y.clone.keys(k).apply(null,[this.options.style.$base].concat(slice.call(l))),k=y.transform(function(){return null}).clone(k),this.style(y(k,v)))));if(this.hasSharedStateStyle)for(x=Object.keys(this.options.styleShared),x=x.filter(function(b){return B.includes(b,
a)}),f=0,h=x.length;f<h;f++)if(L=x[f],v=L.split("+"),k=v.length===v.filter(function(b){return function(c){return c===a||b.state(c)}}(this)).length)k=this.options.styleShared[L],e?(B.includes(this._stateShared,L)||this._stateShared.push(L),v=this.options.styleShared[B.removeItem(v,a).join("+")],this.style(y.clone(v,k))):(B.removeItem(this._stateShared,L),v=y.clone.keys(k).apply(null,[this.options.style.$base].concat(slice.call(l))),k=y.transform(function(){return null}).clone(k),this.style(y(k,v)));
if(this.options.passStateToChildren&&!B.includes(this.options.unpassableStates,a))for(f=this._children,e=0,k=f.length;e<k;e++)l=f[e],l.state(a,b,d||this);return this}};h.prototype.resetState=function(){var a,b,c,d;d=this._state.slice();b=0;for(c=d.length;b<c;b++)a=d[b],this.state(a,!1);return this};h.prototype.pipeState=function(a){var b,l,d,f;if(a){if(a=B.normalizeGivenEl(a),c.quickDomEl(a)&&a!==this)for(this._statePipeTarget=a,f=this._state,l=0,d=f.length;l<d;l++)b=f[l],a.state(b,!0)}else!1===a&&
delete this._statePipeTarget;return this};h.prototype.style=function(){var b,d;if("text"!==this.type){b=arguments;if(c.string(b[0])){if(d=a(this.el,b[0],b[1]),!c.defined(b[1]))return d}else c.object(b[0])&&a(this.el,y.allowNull.transform(function(a){return function(b){return"function"===typeof b?b.call(a,a.options.relatedInstance):b}}(this)).clone(b[0]));return this}};h.prototype.styleSafe=function(a,b){var l,d;if("text"!==this.type)return l=arguments,d=this.style(a),c.string(d)?(b&&(d=0),d||this.el.style[l[0]]||
this.options.style.$base[l[0]]||""):this};h.prototype._getActiveStates=function(a,b){var c;null==b&&(b=!0);c=this.providedStates.filter(function(b){return function(c){return B.includes(b._state,c)&&c!==a}}(this));return b&&this.hasSharedStateStyle?c.concat(this._stateShared):c};h.prototype._getStateStyles=function(a){return a.map(function(a){return function(b){return a.options.style["$"+b]}}(this))};Object.defineProperty(h.prototype,"rect",{get:function(){return this.el.getBoundingClientRect()}});
h.prototype.attr=function(a,b){switch(b){case void 0:return this.el.getAttribute(a);case null:return this.el.removeAttribute(a);default:return this.el.setAttribute(a,b),this}};h.prototype.prop=function(a,b){switch(b){case void 0:return this.el[a];default:return this.el[a]=b,this}};h.prototype.toTemplate=function(){return e.template(this)};h.prototype.clone=function(){var a,b,c,d,f,e,k;c=this.el.cloneNode(!1);c=y.clone(this.options,{existing:c});c=new h(this.type,c);e=this._state;b=0;for(f=e.length;b<
f;b++)a=e[b],c.state(a,!0);e=this.children;b=0;for(f=e.length;b<f;b++)a=e[b],c.append(a.clone());k=this._eventCallbacks;for(d in k)for(b=k[d],f=0,e=b.length;f<e;f++)a=b[f],c.on(d,a);return c};h.prototype.append=function(a){var b;a&&(a=B.normalizeGivenEl(a),c.quickDomEl(a)&&((b=a.parent)&&b._removeChild(a),this._children.push(a),this.el.appendChild(a.el),a.parent));return this};h.prototype.appendTo=function(a){a&&(a=B.normalizeGivenEl(a),c.quickDomEl(a)&&a.append(this));return this};h.prototype.prepend=
function(a){var b;a&&(a=B.normalizeGivenEl(a),c.quickDomEl(a)&&((b=a.parent)&&b._removeChild(a),this._children.unshift(a),this.el.insertBefore(a.el,this.el.firstChild),a.parent));return this};h.prototype.prependTo=function(a){a&&(a=B.normalizeGivenEl(a),c.quickDomEl(a)&&a.prepend(this));return this};h.prototype.html=function(a){if(!c.defined(a))return this.el.innerHTML;this.el.innerHTML=a;return this};h.prototype.text=function(a){if(!c.defined(a))return this.el.textContent;this.el.textContent=a;return this};
h.prototype.after=function(a){var b;a&&this.parent&&(a=B.normalizeGivenEl(a),c.quickDomEl(a)&&(b=this.parent._children.indexOf(this),this.parent._children.splice(b+1,0,a),this.el.parentNode.insertBefore(a.el,this.el.nextSibling),a.parent));return this};h.prototype.insertAfter=function(a){a&&(a=B.normalizeGivenEl(a),c.quickDomEl(a)&&a.after(this));return this};h.prototype.before=function(a){var b;a&&this.parent&&(a=B.normalizeGivenEl(a),c.quickDomEl(a)&&(b=this.parent._children.indexOf(this),this.parent._children.splice(b,
0,a),this.el.parentNode.insertBefore(a.el,this.el),a.parent));return this};h.prototype.insertBefore=function(a){a&&(a=B.normalizeGivenEl(a),c.quickDomEl(a)&&a.before(this));return this};h.prototype.detach=function(){var a;null!=(a=this.parent)&&a._removeChild(this);return this};h.prototype.remove=function(){var a;this.detach();this.resetState();for(a in this._eventCallbacks)this._eventCallbacks[a].length=0;return this};h.prototype.empty=function(){var a,b,c,d;d=this.children.slice();b=0;for(c=d.length;b<
c;b++)a=d[b],this._removeChild(a);return this};h.prototype.wrap=function(a){var b;a&&(a=B.normalizeGivenEl(a),b=this.parent,c.quickDomEl(a)&&a!==this&&a!==this.parent&&(b&&b._removeChild(this,a.parent?void 0:a),a.append(this)));return this};h.prototype.unwrap=function(){var a,b,c,d;if(b=this.parent)if(c=e.batch(b.children),d=b.next,a=b.parent)b.detach(),d?c.insertBefore(d):c.appendTo(a);return this};h.prototype.replace=function(a){var b;a&&(a=B.normalizeGivenEl(a),c.quickDomEl(a)&&a!==this&&(a.detach(),
null!=(b=this.parent)&&b._removeChild(this,a)));return this};h.prototype._removeChild=function(a,b){var c;c=this._children.indexOf(a);-1!==c&&(b?(this.el.replaceChild(b.el,a.el),this._children.splice(c,1,b)):(this.el.removeChild(a.el),this._children.splice(c,1)));return this};n={type:"window",el:window,raw:window,_eventCallbacks:{__refs:{}}};n.on=h.prototype.on;n.off=h.prototype.off;n.emit=h.prototype.emit;n._listenTo=h.prototype._listenTo;e=function(){var a,b,d,f,k;a=1<=arguments.length?slice.call(arguments,
0):[];switch(!1){case !c.template(a[0]):return a[0].spawn();case !c.quickDomEl(a[0]):return a[1]?a[0].updateOptions(a[1]):a[0];case !(c.domNode(a[0])||c.domDoc(a[0])):if(a[0]._quickElement)return a[0]._quickElement;d=a[0].nodeName.toLowerCase().replace("#","");b=a[1]||{};b.existing=a[0];return new h(d,b);case a[0]!==window:return n;case !c.string(a[0]):d=a[0].toLowerCase();b="text"===d?c.object(a[1])?a[1]:{text:a[1]||""}:c.object(a[1])?a[1]:{};a=a.slice(2);d=new h(d,b);f=0;for(k=a.length;f<k;f++)b=
a[f],c.string(b)&&(b=e.text(b)),c.template(b)&&(b=e(b)),c.quickDomEl(b)&&b.appendTo(d);return d}};e.template=function(a){return new g(a,!0)};d=function(a,b){this.elements=a;this.returnResults=b;this.elements=this.elements.map(function(a){return e(a)});return this};d.prototype.reverse=function(){this.elements=this.elements.reverse();return this};d.prototype["return"]=function(a){return a?(this.returnResults=!0,this):this.lastResults};Object.keys(h.prototype).concat("css","replaceWith").forEach(function(a){return d.prototype[a]=
function(){var b,c;c=this.lastResults=function(){var c,d,f,e;f=this.elements;e=[];c=0;for(d=f.length;c<d;c++)b=f[c],e.push(b[a].apply(b,arguments));return e}.apply(this,arguments);return this.returnResults?c:this}});e.batch=function(a,b){if(!c.iterable(a))throw Error("Batch: expected an iterable, got "+String(a));if(!a.length)throw Error("Batch: expected a non-empty element collection");return new d(a,b)};r={type:"div",options:{},children:[]};g=function(a,b){this._config=b?C(a):a;return this};Object.keys(r).forEach(function(a){return Object.defineProperty(g.prototype,
a,{get:function(){return this._config[a]}})});g.prototype.spawn=function(a,b){var c;c=p(this._config,a,b);return e.apply(null,[c.type,c.options].concat(slice.call(c.children)))};g.prototype.extend=function(a,b){return new g(p(this._config,a,b))};p=function(a,b,d){var f,e,k,h,l;d&&(f={options:function(a){return y(a,d)}});c.array(b)&&(b=C(b,!1));f=y.deep.notKeys("children").notDeep("relatedInstance").transform(f).clone(a,b);a=a.children||[];h=(null!=b?b.children:void 0)||[];f.children=[];k=e=0;for(l=
Math.max(a.length,h.length);0<=l?e<l:e>l;k=0<=l?++e:--e)b=a[k],k=h[k],c.array(k)&&(k=C(k,!1)),c.string(k)&&(k={type:"text",options:{text:k}}),b?f.children.push(b.extend(k,d)):f.children.push(new g(y.deep.clone(r,k)));return f};C=function(a,b){var d;switch(!1){case !c.array(a):d={};if(c.string(a[0]))d.type=a[0];else throw Error(E+" string for 'type', got '"+String(a[0])+"'");if(1<a.length&&!c.object(a[1])&&null!==a[1])throw Error(E+" object for 'options', got '"+String(a[1])+"'");d.options=a[1]?y.deep.clone(a[1]):
null;d.children=a.slice(2);!1!==b&&(d.children=d.children.map(e.template));return d;case !(c.string(a)||c.domText(a)):return{type:"text",options:{text:a.textContent||a}};case !c.domEl(a):return{type:a.nodeName.toLowerCase(),options:y.clone.keys(m)(a),children:[].map.call(a.childNodes,e.template)};case !c.quickDomEl(a):return{type:a.type,options:y.clone.deep.notKeys("relatedInstance")(a.options),children:a.children.map(e.template)};case !c.template(a):return p(a._config);default:throw Error(E+" (array || string || domEl || quickDomEl || template), got "+
String(a));}};E="Template Parse Error: expected";J="link:a anchor:a a text div span h1 h2 h3 h4 h5 h6 header footer section button br ul ol li fieldset input textarea select option form frame hr iframe img picture main nav meta object pre style table tbody th tr td tfoot video".split(" ");z=function(a){var b,c;b=c=a;B.includes(a,":")&&(a=a.split(":"),b=a[0],c=a[1]);return e[b]=function(){return e.apply(null,[c].concat(slice.call(arguments)))}};w=0;for(F=J.length;w<F;w++)G=J[w],z(G);e.version="1.0.17";
return null!=("undefined"!==typeof b&&null!==b?b.exports:void 0)?b.exports=e:"function"===typeof define&&define.amd?define(["quickdom"],function(){return e}):this.Dom=e})();return b.exports}}(this)({});U=function(b){"use strict";var a=[],c=[];return b=function(b,d){if(b===d)return 0;var f=b.length,e=d.length;if(0===f)return e;if(0===e)return f;for(var k,g,n,m,p=0,r=0;p<f;)c[p]=b.charCodeAt(p),a[p]=++p;for(;r<e;)for(k=d.charCodeAt(r),n=r++,g=r,p=0;p<f;p++)m=k===c[p]?n:n+1,n=a[p],g=a[p]=n>g?m>g?g+1:
m:m>n?n+1:m;return g}}.call(this,{});w=H(3);g=H(4);d=function(b){var a={exports:b};(function(){var b,d,e,x,g,h,n,m,p,r,y,u,z,w,B,C,F,E,A,H,G,J,l,v,L,t,O,I,M,Q,K,V,S,T,U,X,ba,ea,Y,P,Z,ka,fa,la,ca,da,ga,ha,ma,ia,ja,na,R,D,aa,oa,W,pa;Q=0;G="push pop shift unshift splice reverse sort".split(" ");S={};J={};ga=["{{","}}"];R=Object.create({silent:!1},{placeholder:{get:function(){return ga},set:function(a){t.isArray(a)&&2===a.length&&(ga=a,ja())}}});K={delay:!1,throttle:!1,simpleSelector:!1,promiseTransforms:!1,
dispatchEvents:!1,sendArrayCopies:!1,updateEvenIfSame:!1,updateOnBind:!0};V=Object.defineProperty;fa=Object.getOwnPropertyDescriptor;v=null;L=function(){var a;v||(a=v=document.createEvent("Event"),a.initEvent("change",!0,!1),a._sb=!0);return v};ma=!("className"in Element.prototype)||!fa(Element.prototype,"className").get;pa="innerWidth innerHeight outerWidth outerHeight scrollX scrollY pageXOffset pageYOffset screenX screenY screenLeft screenTop".split(" ");na=function(a,b){return this.updateAllSubs(b||
this)};Y=function(){return""+ ++Q};P=function(){return Object.create(null)};Z=function(a,b){return function(c,q,d){return E(c,q,d,a,b)}};ka=function(a,c){return a.selfUpdater||(a.selfUpdater=new b(function(){return c?a.setValue(a.fetchDirectValue(),a,!0):a.updateAllSubs(a)},"Func",{}))};D=function(a,b){return a&&-1!==a.indexOf(b)};t={isDefined:function(a){return void 0!==a},isArray:function(a){return a instanceof Array},isObject:function(a){return"object"===typeof a&&a},isString:function(a){return"string"===
typeof a},isNumber:function(a){return"number"===typeof a},isFunction:function(a){return"function"===typeof a},isBindingInterface:function(a){return a instanceof d},isBinding:function(a){return a instanceof b},isIterable:function(a){return t.isObject(a)&&t.isNumber(a.length)},isDom:function(a){return a.nodeName&&1===a.nodeType},isDomInput:function(a){a=a.nodeName;return"INPUT"===a||"TEXTAREA"===a||"SELECT"===a},isDomRadio:function(a){return"radio"===a.type},isDomCheckbox:function(a){return"checkbox"===
a.type},isElCollection:function(a){return a instanceof NodeList||a instanceof HTMLCollection||t.isDefined(jQuery)&&a instanceof jQuery},domElsAreSame:function(a){var b;b=a[0].type;return[].filter.call(a,function(a){return a.type===b}).length===a.length}};ea=function(a,b,c){var q;if(q=fa(a,b))return c&&(q.configurable=!0),q;if(a=Object.getPrototypeOf(a))return ea(a,b,!0)};I=function(a,b,c){var q,d,f,N,e,qa;a.origDescriptor||(a.origDescriptor=ea(b,a.property));c?G.forEach(function(c){return V(b,c,{configurable:!0,
value:function(){var q;q=Array.prototype[c].apply(b,arguments);a.updateAllSubs(a);return q}})}):"Proxy"===a.type?(d=a.origFn=a.value,a.value={result:null,args:null},t.isFunction(d)&&(qa=[].slice,q=f=function(){var c;c=qa.call(arguments);a.value.args=c=a.selfTransform?a.selfTransform(c):c;a.value.result=c=d.apply(b,c);a.updateAllSubs(a);return c},V(b,a.property,{configurable:a.isLiveProp=!0,get:function(){return q},set:function(b){t.isFunction(b)?b!==d&&(b!==f&&(d=a.origFn=b),q!==f&&(q=f)):q=b}}))):
D(a.type,"DOM")||a.object===window&&D(pa,a.property)||(c=a.origDescriptor||S,c.get&&(a.origGetter=c.get.bind(b)),c.set&&(a.origSetter=c.set.bind(b)),e=(e=c.configurable)&&b.constructor!==CSSStyleDeclaration,ma&&a.isDom&&a.property in b.cloneNode(!1)&&(a.origDescriptor=e=!1,a.isLiveProp=!0,a.origGetter=function(){return a.object[a.property]},a.origSetter=function(b){return a.object[a.property]=b}),e&&(e="Array"===a.type,N=!a.origSetter&&!e,V(b,a.property,{configurable:a.isLiveProp=!0,enumerable:c.enumerable,
get:a.origGetter||function(){return a.value},set:function(b){a.setValue(b,a,N)}}),e&&I(a,b[a.property],!0)))};M=function(a,b,c){var q,d;if(c){d=[];a=0;for(c=G.length;a<c;a++)q=G[a],d.push(delete b[q]);return d}c=a.origDescriptor;c.set||c.get||(c.value=a.origFn||a.value);return V(b,a.property,c)};O=function(a){var b,c;b=P();for(c in a)b[c]=a[c];return b};ba=function(a,b){var c,q,d,f;f=Object.keys(b);c=0;for(d=f.length;c<d;c++)q=f[c],a[q]=b[q]};l={get:function(a,b,c,d){if(b)return J[a._sb_ID];if(d&&
a[0]._sb_map&&(b=J[a[0]._sb_map[c]],b.groupBinding))return b.groupBinding;if(a._sb_map&&a._sb_map[c])return J[a._sb_map[c]]},set:function(a,b){var c,q;b?V(a.object,"_sb_ID",{configurable:!0,value:a.ID}):(q=a.selector,a.object._sb_map?a.object._sb_map[q]=a.ID:(c={},c[q]=a.ID,V(a.object,"_sb_map",{configurable:!0,value:c})))}};U=/[.*+?^${}()|[\]\\]/g;ca=da=null;ja=function(){var a,b,c;c=R.placeholder[0].replace(U,"\\$&");a=R.placeholder[1].replace(U,"\\$&");b="[^"+a+"]+";ca=new RegExp(c+"("+b+")"+a,
"g");da=new RegExp(""+c+b+a,"g")};ja();H=function(a,b,c){var q,d,f,e,N;N="";d=f=0;for(e=a.length;f<e;d=++f)q=a[d],N+=q,c[d]&&(N+=b[c[d]]);return N};A=function(a,b,c){null==a[c]&&(a[c]=[]);a[c].push(b)};ia=function(a,b){var c,q,d,f,e,N,k,h,x,g,l;c=Array.prototype.slice.call(a.childNodes);d=0;for(e=c.length;d<e;d++)if(x=c[d],3!==x.nodeType)ia(x,b);else if(x.textContent.match(da))if(l=x.textContent.split(ca),3===l.length&&""===l[0]+l[2])A(b,x,l[1]);else{k=document.createDocumentFragment();q=f=0;for(N=
l.length;f<N;q=++f)g=l[q],h=k.appendChild(document.createTextNode(g)),q%2&&A(b,h,g);x.parentNode.replaceChild(k,x)}};aa=function(a){throw Error("SimplyBind: "+(T[a]||a));};W=function(a,b){var c,d;R.silent||(c=la(b),d=T[a],console.warn("SimplyBind: "+(d+("\n\n"+c))))};oa=function(a){aa("Invalid argument/s ("+a+")",!0)};la=function(a){return(Error().stack||"").split("\n").slice(a+3).join("\n")};T={invalidParamName:"SimplyBind() and .to() only accept a function, an array, a bound object, a string, or a number.",
fnOnly:"Only functions are allowed for .transform/.condition/All()",badEventArg:"Invalid argument number in .ofEvent()",emptyList:"Empty collection provided",onlyOneDOMElement:"You can only pass a single DOM element to a binding",mixedElList:"'checked' of Mixed list of element cannot be bound"};E=function(a,b,c,f,e){if(!a&&0!==a||!(t.isString(a)||t.isNumber(a)||t.isFunction(a)||a instanceof Array))t.isBindingInterface(a)||aa("invalidParamName");!t.isObject(a)||a instanceof Array?(b=new d(b),b.saveOptions=
c,b.isSub=f,b.completeCallback=e,a=t.isFunction(a)?b.setObject(a,!0):b.setProperty(a)):a=e?e(a):a.selfClone();return a};E.version="1.14.4";E.settings=R;E.defaultOptions=K;E.unBindAll=function(a,b){var c,d,q;if(a&&(t.isObject(a)||t.isFunction(a))&&(t.isIterable(a)&&!a._sb_ID&&a[0]&&t.isDom(a[0])&&(a=a[0]),q=a._sb_map,a._sb_ID&&J[a._sb_ID].removeAllSubs(b),q))for(d in q)c=q[d],J[c].removeAllSubs(b)};b=function(a,b,c){ba(this,c);this.optionsDefault=this.saveOptions?this.options:K;this.type=b;this.object=
a;this.ID=Y();this.subs=[];this.subsMeta=P();this.pubsMap=P();this.attachedEvents=[];"Proxy"===this.type&&(this.setValue=na);this.isMultiChoice&&(this.choices=P(),this.object.forEach(function(a){return function(b){var c;c=a.choices[b.value]=E("checked").of(b)._;c.addSub(a);c.subsMeta[a.ID].transformFn=function(){return c};c.groupBinding=a}}(this)));"Event"===this.type||"Func"===this.type&&this.isSub||("Pholder"===this.type?(b=this.descriptor&&!D(this.descriptor,"multi")?this.descriptor+":"+this.property:
this.property,a=this.parentBinding=E(b).of(a)._,a.scanForPholders(),this.value=a.pholderValues[this.pholder],a.textNodes&&(this.textNodes=a.textNodes[this.pholder])):(this.value=a=this.fetchDirectValue(),"ObjectProp"!==this.type||t.isDefined(a)||(this.object[this.property]=a),I(this,this.object)));this.attachEvents();return J[this.ID]=this};b.prototype={addSub:function(a,b,c,d){var q,f,e,k;if(a.isMulti)for(e=a.bindings,a=0,f=e.length;a<f;a++)k=e[a],this.addSub(k,b,c,d);else if(this.subsMeta[a.ID])q=
!0;else{a.pubsMap[this.ID]=this;this.subs.unshift(a);f=this.subsMeta[a.ID]=P();f.updateOnce=c;f.opts=O(b);if(d||"Event"===this.type||"Proxy"===this.type||"Array"===this.type)f.opts.updateEvenIfSame=!0;f.valueRef="Func"===a.type?"valuePassed":"value"}return q},removeSub:function(a,b){var c,d,q,f;if(a.isMulti)for(q=a.bindings,c=0,d=q.length;c<d;c++)f=q[c],this.removeSub(f,b);else this.subsMeta[a.ID]&&(this.subs.splice(this.subs.indexOf(a),1),delete this.subsMeta[a.ID],delete a.pubsMap[this.ID]),b&&
(a.removeSub(this),delete this.pubsMap[a.ID]);0===this.subs.length&&0===Object.keys(this.pubsMap).length&&this.destroy()},removeAllSubs:function(a){var b,c,d,q;d=this.subs.slice();b=0;for(c=d.length;b<c;b++)q=d[b],this.removeSub(q,a)},destroy:function(){var a,b,c,d;delete J[this.ID];this.removePollInterval();if("Event"===this.type)for(d=this.attachedEvents,b=0,c=d.length;b<c;b++)a=d[b],this.unRegisterEvent(a,this.customEventMethod.listen);else"Func"===this.type&&delete this.object._sb_ID;this.isLiveProp&&
this.origDescriptor&&M(this,this.object);"Array"===this.type&&M(this,this.value,!0);this.object._sb_map&&(delete this.object._sb_map[this.selector],0===Object.keys(this.object._sb_map).length&&delete this.object._sb_map)},fetchDirectValue:function(){var a,b,c,d,f;f=this.type;switch(!1){case "Func"!==f:return this.object();case "DOMAttr"!==f:return this.object.getAttribute(this.property)||"";case !this.isMultiChoice:d=[];c=this.choices;for(b in c)if(a=c[b],a.object.checked){if("DOMRadio"===f)return b;
d.push(b)}return d;default:return this.object[this.property]}},setValue:function(a,b,c,d){var f,q,e,k;b||(b=this);this.selfTransform&&(a=this.selfTransform(a));if(!c)switch(this.type){case "ObjectProp":this.isLiveProp?this.isDomInput?d?a!==this.origGetter()&&(f=this.object.selectionStart,this.origSetter(a),f&&this.object.setSelectionRange(f,f)):(this.origSetter(a),R.dispatchEvents&&this.object.dispatchEvent(L())):this.origSetter&&this.origSetter(a):a!==this.value&&(this.object[this.property]=a);break;
case "Pholder":d=this.parentBinding;d.pholderValues[this.pholder]=a;f=H(d.pholderContexts,d.pholderValues,d.pholderIndexMap);if(this.textNodes&&a!==this.value)for(e=this.textNodes,q=0,c=e.length;q<c;q++)k=e[q],k.textContent=a;"textContent"!==this.property&&d.setValue(f,b);break;case "Array":a!==this.value&&(t.isArray(a)||(a=Array.prototype.concat(a)),M(this,this.value,!0),I(this,a=a.slice(),!0));break;case "Func":f=this.valuePassed;this.valuePassed=a;a=this.object(a,f);break;case "Event":this.isEmitter=
!0;this.emitEvent(a);this.isEmitter=!1;break;case "DOMRadio":if(this.isMultiChoice)if(d=t.isBinding(a)?a:this.choices[a])for(q in a=d.object.value,f=this.choices,f)c=f[q],c.setValue(c.ID===d.ID,b);else a=this.value;else{a=!!a;if(a===this.value)return;this.object.checked!==a&&(this.object.checked=a);a&&R.dispatchEvents&&this.object.dispatchEvent(L())}break;case "DOMCheckbox":if(this.isMultiChoice){q=!t.isBinding(a);a=[].concat(a);c=d=0;for(e=a.length;d<e;c=++d)k=a[c],a[c]=t.isBinding(k)?k:this.choices[k];
e=[];k=this.choices;for(f in k)c=k[f],d=q?D(a,c):c.value,c.setValue(d,b),d&&e.push(f);a=e}else{a=!!a;if(a===this.value)return;this.object.checked!==a&&(this.object.checked=a,R.dispatchEvents&&this.object.dispatchEvent(L()))}break;case "DOMAttr":this.object.setAttribute(this.property,a)}this.value=a;this.updateAllSubs(b)},updateAllSubs:function(a){var b,c;if(c=(b=this.subs).length)for(;c--;)this.updateSub(b[c],a)},updateSub:function(a,b,c){var d,f,e;if(!(b===a||b!==this&&b.subsMeta[a.ID])){d=this.subsMeta[a.ID];
if(d.opts.throttle){c=+new Date;f=c-d.lastUpdate;if(f<d.opts.throttle)return clearTimeout(d.updateTimer),d.updateTimer=setTimeout(function(c){return function(){return c.updateSub(a,b)}}(this),d.opts.throttle-f);d.lastUpdate=c}else if(d.opts.delay&&!c)return setTimeout(function(c){return function(){return c.updateSub(a,b,!0)}}(this),d.opts.delay);c="Array"===this.type&&d.opts.sendArrayCopies?this.value.slice():this.value;f=a[d.valueRef];c=(e=d.transformFn)?e(c,f,a.object):c;c===f&&!d.opts.updateEvenIfSame||
d.conditionFn&&!d.conditionFn(c,f,a.object)||(d.opts.promiseTransforms&&c&&t.isFunction(c.then)?c.then(function(c){a.setValue(c,b)}):a.setValue(c,b),d.updateOnce&&this.removeSub(a))}},addModifierFn:function(a,b,c,d){var f,e,q,k,h;if(t.isFunction(c)){e=0;for(q=b.length;e<q;e++)k=b[e],h=k._||k,h.isMulti?this.addModifierFn(a,h.bindings,c,d):(k=this.subsMeta[h.ID],k[a]=c,d=d&&!k.updateOnce,this.pubsMap[h.ID]&&((f=h.subsMeta[this.ID])[a]||(f[a]=c)),!d&&"Func"!==this.type||"transformFn"!==a||this.updateSub(h,
this));return!0}return W("fnOnly",2)},setSelfTransform:function(a,b){this.selfTransform=a;b&&this.setValue(this.value)},scanForPholders:function(){var a;this.pholderValues||(this.pholderValues=P(),this.pholderIndexMap=P(),this.pholderContexts=[],t.isString(this.value)&&(this.pholderContexts=this.value.split(da),a=0,this.value=this.value.replace(ca,function(b){return function(c,d){b.pholderIndexMap[a++]=d;return b.pholderValues[d]=d}}(this))),this.isDom&&"textContent"===this.property&&ia(this.object,
this.textNodes=P()))},addPollInterval:function(a){if("Event"!==this.type)return this.removePollInterval(),this.pollInterval=setInterval(function(a){return function(){var b;b=a.fetchDirectValue();return a.setValue(b)}}(this),a)},removePollInterval:function(){clearInterval(this.pollInterval);return this.pollInterval=null},addUpdateListener:function(a,b){this.object.addEventListener(a,function(a){return function(c){c._sb||(c=a.selfTransform&&a.isDomInput,a.setValue(a.object[b],null,!c,!0))}}(this),!1)},
attachEvents:function(){this.eventName?this.registerEvent(this.eventName,this.customEventMethod.listen):this.isDomInput?(this.addUpdateListener("input","value"),this.addUpdateListener("change","value")):this.isMultiChoice||"DOMRadio"!==this.type&&"DOMCheckbox"!==this.type||this.addUpdateListener("change","checked")},registerEvent:function(a,b){this.attachedEvents.push(a);this.invokeEventMethod(a,b||"addEventListener","addEventListener")},unRegisterEvent:function(a,b){this.attachedEvents.splice(this.attachedEvents.indexOf(a),
1);this.invokeEventMethod(a,b||"removeEventListener","removeEventListener")},invokeEventMethod:function(a,b,c){var d;d=this.object;if(this.isDom&&t.isDefined(jQuery)&&"on"===b||"off"===b)d=jQuery(this.object);d[b]||(b=c);this.eventHandler||(this.eventHandler=X.bind(this));if("function"===typeof d[b])d[b](a,this.eventHandler)},emitEvent:function(a){var b,c;c=this.object;b=this.customEventMethod.emit||"dispatchEvent";this.isDom&&t.isDefined(jQuery)&&"trigger"===b&&(c=jQuery(this.object));c[b]||(b="dispatchEvent");
if("dispatchEvent"===b)return this.eventObject||(this.eventObject=document.createEvent("Event"),this.eventObject.initEvent(this.eventName,!0,!0)),this.eventObject.bindingData=a,c[b](this.eventObject);c[b](this.eventName,a)}};X=function(){this.isEmitter||this.setValue(arguments[this.property],null,!0)};d=function(a,b){var c;if(b)ba(this,b),this.stage=1;else for(c in this.stage=0,this.subs=[],this.optionsPassed=a||(a={}),this.options={},K)this.options[c]=null!=a[c]?a[c]:K[c];return this};e={selfClone:function(){return new d(null,
this)},defineMainProps:function(a){this._=a;return Object.defineProperties(this,{value:{get:function(){return a.value}},original:{get:function(){return a.objects||a.object}},subscribers:{get:function(){return a.subs.slice().map(function(a){return a.object})}}})},createBinding:function(a,c,d,f){var e;this.object=a;if(e=l.get(a,f,this.selector,this.isMultiChoice))return this.patchCachedBinding(e);a=new b(a,c,d);l.set(a,f);return a},patchCachedBinding:function(a){var b,c,d,f;"ObjectProp"!==a.type||this.property in
this.object||I(a,this.object);if(this.saveOptions)for(c in d=this.optionsPassed,d)f=d[c],a.optionsDefault[c]=f;c=a.optionsDefault;for(b in c)f=c[b],this.options[b]=t.isDefined(this.optionsPassed[b])?this.optionsPassed[b]:f;return a},setProperty:function(a){var b;t.isNumber(a)&&(a=a.toString());this.selector=this.property=a;this.options.simpleSelector||(D(a,":")&&(b=a.split(":"),this.descriptor=b.slice(0,-1).join(":"),this.property=b[b.length-1]),D(a,".")&&(b=this.property.split("."),this.property=
b[0],this.pholder=b.slice(1).join(".")),D(this.descriptor,"event")&&(D(a,"#")?(b=this.property.split("#"),this.eventName=b[0],this.property=b[1]):(this.eventName=this.property,this.property=0),isNaN(parseInt(this.property))&&W("badEventArg",1),this.customEventMethod={listen:this.optionsPassed.listenMethod,emit:this.optionsPassed.emitMethod}));return this},setObject:function(a,b){var c,d,f,e;this.stage=1;e=(f=a!==window&&t.isIterable(a)&&!a.nodeType)?a[0]:a;if(!e)f&&t.isElCollection(a)&&aa("emptyList");
else if(this.isDom=t.isDom(e))if("checked"===this.property?(d=e&&t.isDomRadio(e),c=!d&&e&&t.isDomCheckbox(e)):"value"===this.property&&(this.isDomInput=t.isDomInput(e)),f&&!D(this.descriptor,"multi"))if(1===a.length)a=a[0];else if(!d&&!c||t.domElsAreSame(a))d||c?(this.isMultiChoice=!0,a=[].slice.call(a)):(a=a[0],W("onlyOneDOMElement",3));else return W("mixedElList",3);switch(!1){case !b:c="Func";break;case !this.pholder:c="Pholder";break;case !(D(this.descriptor,"array")&&t.isArray(a[this.property])):c=
"Array";break;case !D(this.descriptor,"event"):c="Event";break;case !D(this.descriptor,"func"):c="Proxy";break;case !d:c="DOMRadio";break;case !c:c="DOMCheckbox";break;case !D(this.descriptor,"attr"):c="DOMAttr";break;default:c="ObjectProp"}D(this.descriptor,"multi")?(a.length||aa("emptyList"),this.defineMainProps(new x(this,a,c))):this.defineMainProps(this.createBinding(a,c,this,b));D(this._.type,"Event")||D(this._.type,"Proxy")?this.options.updateOnBind=!1:D(this._.type,"Func")&&(this.options.updateOnBind=
!0);return this.completeCallback?this.completeCallback(this):this},addToPublisher:function(a){var b,c,d,f;a.stage=2;a.subs.push(this);b=a._.addSub(this._,a.options,a.updateOnce);if(a.updateOnce)delete a.updateOnce;else if(a.options.updateOnBind&&!b)if(this._.isMulti)for(f=this._.bindings,c=0,d=f.length;c<d;c++)b=f[c],a._.updateSub(b,a._);else a._.updateSub(this._,a._)}};d.prototype=Object.create(e,{of:{get:function(){if(!this.stage)return p}},set:{get:function(){if(this.stage)return y}},chainTo:{get:function(){if(2===
this.stage)return h}},transformSelf:{get:function(){if(1===this.stage)return C}},transform:{get:function(){if(2===this.stage)return w}},transformAll:{get:function(){if(2===this.stage)return B}},condition:{get:function(){if(2===this.stage)return n}},conditionAll:{get:function(){if(2===this.stage)return m}},bothWays:{get:function(){if(2===this.stage)return g}},unBind:{get:function(){if(2===this.stage)return F}},pollEvery:{get:function(){if(this.stage)return r}},stopPolling:{get:function(){if(this.stage)return z}},
setOption:{get:function(){if(2===this.stage)return u}},updateOn:{get:function(){var a;if(this.stage&&(a=this))return Z(!1,function(b){b._!==a._&&(a._.pubsMap[b._.ID]=b._,b._.addSub(ka(a._,!0),b.options,!1,!0));return a})}},removeUpdater:{get:function(){var a,b;if(this.stage&&(b=this)&&(a=this._.selfUpdater))return Z(!1,function(c){c._.subsMeta[a.ID]&&(delete b._.pubsMap[c._.ID],c._.removeSub(a))})}},to:{get:function(){var a;if(1===this.stage&&(a=this))return Z(!0,function(b){b._!==a._&&b.addToPublisher(a);
return a})}},and:{get:function(){var a,b;b=this.selfClone();if(2===this.stage)return b;if(1===this.stage)return b._.isMulti||(a=b._,b._=b._=new x(b),b._.addBinding(a)),Z(!1,function(a){b._.addBinding(a._);return b})}},once:{get:function(){var a;if(1===this.stage)return a=this.selfClone(),a.updateOnce=!0,a}},update:{get:function(){return this.set}},twoWay:{get:function(){return this.bothWays}},pipe:{get:function(){return this.chainTo}}});p=function(a){t.isObject(a)||t.isFunction(a)||oa(a);t.isBindingInterface(a)&&
(a=a.object);this.stage=1;return this.setObject(a)};h=function(a,b,c){return E(this.subs[this.subs.length-1]).to(a,b,c)};y=function(a){this._.setValue(a);return this};C=function(a){t.isFunction(a)?this._.setSelfTransform(a,this.options.updateOnBind):W("fnOnly",1);return this};w=function(a){this._.addModifierFn("transformFn",this.subs.slice(-1),a,this.options.updateOnBind);return this};B=function(a){this._.addModifierFn("transformFn",this.subs,a,this.options.updateOnBind);return this};n=function(a){this._.addModifierFn("conditionFn",
this.subs.slice(-1),a);return this};m=function(a){this._.addModifierFn("conditionFn",this.subs,a);return this};g=function(a){var b,c,d,f,e,k;d=this.subs[this.subs.length-1];k=d._;c=this._.isMulti?this._.bindings:[this._];k.addSub(this._,d.options);d=0;for(f=c.length;d<f;d++)b=c[d],e=b.subsMeta[k.ID].transformFn,b=b.subsMeta[k.ID].conditionFn,(e||a)&&(e=t.isFunction(a)?a:e)&&!1!==a&&(k.subsMeta[this._.ID].transformFn=e),b&&(k.subsMeta[this._.ID].conditionFn=b);return this};F=function(a){var b,c,d,
f;d=this.subs;b=0;for(c=d.length;b<c;b++)f=d[b],this._.removeSub(f._,a);return this};r=function(a){this._.addPollInterval(a);return this};z=function(){this._.removePollInterval();return this};u=function(a,b){this._.subsMeta[this.subs[this.subs.length-1]._.ID].opts[a]=b;return this};x=function(a,b,c){var d,f,e;a.selector=a.selector.slice(6);ba(this,this["interface"]=a);this.isMulti=!0;this.bindings=d=[];if(b)for(a=0,f=b.length;a<f;a++)e=b[a],this.addBinding(e,c);return Object.defineProperties(this,
{type:{get:function(){return d.map(function(a){return a.type})}},value:{get:function(){return d.map(function(a){return a.value})}}})};ha=x.prototype=Object.create(e);Object.keys(b.prototype).forEach(function(a){return ha[a]=function(b,c,d,f){var e,k,h,x;x=this.bindings;k=0;for(h=x.length;k<h;k++)e=x[k],"updateSub"===a&&(c=e),e[a](b,c,d,f)}});ha.addBinding=function(a,b){this.bindings.push(b?this.createBinding(a,b,this["interface"]):a)};return null!=("undefined"!==typeof a&&null!==a?a.exports:void 0)?
a.exports=E:"function"===typeof define&&define.amd?define(["simplybind"],function(){return E}):this.SimplyBind=E})();return a.exports}.call(this,{});A=function(b){var a;g.object(b)||(b={});null==b.type&&(b.type="text");C.appended||C();a=Object.create(p[b.type].prototype);return p.call(a,b)};A.registerField=function(b,a){var c,d,e,x;if(g.string(b)&&g.object(a)){e=Object.create(p.prototype);for(d in a)c=a[d],d="_"===d[0]?d.slice(1):d,n.includes(S,d)&&"validate"!==d&&(d="_"+d),e[d]=c;c=0;for(d=S.length;c<
d;c++)if(x=S[c],!e["_"+x]||e[x])throw Error("Field Registration: '"+x+"' is required in order to register the field");return p[b]=e}};Object.defineProperty(A,"fields",{get:function(){return w.clone.own.notKeys("instances")(p)}});null==this.console&&(this.console={});null==console.log&&(console.log=function(){});null==console.warn&&(console.warn=console.log);S=["_construct","_createElements","_attachBindings","_validate"];u=null!=document.createElement("div").style.animation?"":"-webkit-";F="@"+u+
"keyframes checkmarkAnimateSuccessTip { 0%, 54% { width: 0; left: 0px; top: 3px } 70% { width: 14px; left: -2px; top: 8px } 84% { width: 5px; left: 5px; top: 10px } 100% { width: 8px; left: 3px; top: 10px } } @"+u+"keyframes checkmarkAnimateSuccessLong { 0%, 65% { width: 0; right: 12px; top: 12px } 84% { width: 14px; right: 0px; top: 7px } 100% { width: 12px; right: 2px; top: 8px } } @"+u+"keyframes checkmarkAnimateError { 0%, 65% { "+u+"transform: scale(0.4); opacity: 0 } 84% { "+u+"transform: scale(1.15) } 100% { "+
u+"transform: scale(1) } } @"+u+"keyframes checkmarkRotatePlaceholder { 0%, 5% { "+u+"transform: rotate(-45deg) } 12%, 100% { "+u+"transform: rotate(-405deg) } } @"+u+"keyframes fieldErrorShake { 0%, 50% { "+u+"transform: translateX(-10px) } 25%, 75% { "+u+"transform: translateX(10px) } 100% { "+u+"transform: translateX(0px) } }";C=function(){var b;b=document.createElement("style");b.innerHTML=F;document.body.appendChild(b);return C.appended=b};u={checkmark:e.template(["*svg",{attrs:{width:"12px",
height:"12px",viewBox:"5 7 12 12",tabindex:-1,focusable:!1},style:{width:"9px",height:"9px"}},["*polyline",{attrs:{"stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"7 13.8888889 9.66666667 17 15 9",tabindex:-1,focusable:!1}}]]),angleDown:e.template(["*svg",{attrs:{width:"1792px",height:"1792px",viewBox:"0 0 1792 1792",tabindex:-1,focusable:!1},style:{width:"100%",height:"100%",outline:"none"}},["*path",{attrs:{tabindex:-1,focusable:!1,d:"M1395 736q0 13-10 23l-466 466q-10 10-23 10t-23-10l-466-466q-10-10-10-23t10-23l50-50q10-10 23-10t23 10l393 393 393-393q10-10 23-10t23 10l50 50q10 10 10 23z"}}]]),
caretUp:e.template(["*svg",{attrs:{viewBox:"0 0 512 512",tabindex:-1,focusable:!1},style:{width:"100%",height:"100%"}},["*path",{attrs:{tabindex:-1,focusable:!1,d:"M402 347c0 5-2 10-5 13-4 4-8 6-13 6h-256c-5 0-9-2-13-6-3-3-5-8-5-13s2-9 5-12l128-128c4-4 8-6 13-6s9 2 13 6l128 128c3 3 5 7 5 12z"}}]]),caretDown:e.template(["*svg",{attrs:{viewBox:"0 0 512 512",tabindex:-1,focusable:!1},style:{width:"100%",height:"100%"}},["*path",{attrs:{tabindex:-1,focusable:!1,d:"M402 201c0 5-2 9-5 13l-128 128c-4 4-8 5-13 5s-9-1-13-5l-128-128c-3-4-5-8-5-13s2-9 5-13c4-3 8-5 13-5h256c5 0 9 2 13 5 3 4 5 8 5 13z"}}]])};
g.field=function(b){return b instanceof p};g.regex=function(b){return b instanceof RegExp};X=/^\d$/;G=/^[a-zA-Z]$/;M=/^[0-9\!#\$\%\*\+\/\=\?\^\{\|\}\(\)\~\-\.]$/;Q=/^[0-9A-Za-z\!#\$\%\&\'\*\+\/\=\?\^\_\`\{\|\}\(\)\~\-\ ]$/;n={includes:function(b,a){return b&&-1!==b.indexOf(a)},removeItem:function(b,a){var c;c=b.indexOf(a);if(-1!==c)return b.splice(c,1)},hexToRGBA:function(b,a){var c,d,e;"#"===b[0]&&(b=b.slice(1));e=parseInt(b.slice(0,2),16);d=parseInt(b.slice(2,4),16);c=parseInt(b.slice(4,6),16);
return"rgba("+e+", "+d+", "+c+", "+a+")"},unlockScroll:function(b){window._isLocked=!1;return e(window).off("wheel.lock")},lockScroll:function(b){if(!window._isLocked)return window._isLocked=!0,e(window).on("wheel.lock",function(a){if(a.target===b.raw||e(a.target).parentMatching(function(a){return a===b})){if(0<a.wheelDelta&&0===b.raw.scrollTop||0>a.wheelDelta&&b.raw.scrollHeight-b.raw.scrollTop===b.raw.clientHeight)return a.preventDefault()}else return a.preventDefault()})},fuzzyMatch:function(b,
a,c){var d,e,x,g,h;g=b.length;d=a.length;c||(b=b.toUpperCase(),a=a.toUpperCase());if(g>d)return!1;if(g===d)return b===a;for(x=c=e=0;x<g;)for(h=b[x++];c<d;)if(a[c++]===h){e++;break}return e===g},getIndexOfFirstDiff:function(b,a){var c,d;c=0;for(d=Math.max(b.length,a.length);c<d;){if(b[c]!==a[c])return c;c++}return null},testCondition:function(b){var a,c,d;if(!b||!b.target)throw Error("Invalid condition provided: "+JSON.stringify(b));if(!b.target.state.visible)return!1;a=function(){switch(!1){case !g.objectPlain(b.value):return b.value;
case !g.regex(b.value):return{$regex:b.value};case !("valid"===b.value&&!b.property||!g.defined(b.value)):return"valid";default:return{$eq:b.value}}}();if("valid"===a)return b.target.validate();d=function(){var a,c;c=b.property.split(".");switch(!1){case 1!==c.length:return b.target[b.property];case !g.defined(b.target[b.property]):return b.target[b.property];default:for(a=b.target;g.object(a);)a=a[c.pop()];return a}}();c=Object.keys(a);return c.filter(function(b){var c;c=a[b];switch(b){case "$eq":return d===
c;case "$ne":return d!==c;case "$gt":return d>c;case "$gte":return d>=c;case "$lt":return d<c;case "$lte":return d<=c;case "$ct":return n.includes(d,c);case "$nct":return!n.includes(d,c);case "$regex":return c.test(d);case "$nregex":return!c.test(d);case "$mask":return n.testMask(d,c);default:return!1}}).length===c.length},validateConditions:function(b){var a;if(b)return a=b.filter(function(a){return n.testCondition(a)}),a.length===b.length},initConditions:function(b,a,c){return setTimeout(function(f){return function(){a.forEach(function(a){var f;
if(f=g.string(a.target)?b.allFields[a.target]:g.field(a.target)?a.target:void 0)a.target=f;else return console.warn("Condition target not found for the provided ID '"+a.target+"'",b);a=g.array(f.value)?"array:value":"value";return d(a,{updateOnBind:!1}).of(f).and("visible").of(f.state).to(c)});return c()}}(this))}};T={fontFamily:"system-ui, sans-serif",templates:{},label:!1,alwaysShowHelp:!1,help:"",defaultValue:""};p=function(b){var a;this.settings=w.deep.clone.deep.transform({conditions:function(a){var b,
c,d;if(g.objectPlain(a)){b=[];for(c in a)d=a[c],b.push({target:c,value:d});return b}if(g.array(a))return a.map(function(a){return g.string(a)?{target:a}:a})},choices:function(a){var b,c,d;if(g.objectPlain(a)){c=[];for(b in a)d=a[b],c.push({label:b,value:d});return c}if(g.array(a))return a.map(function(a){return g.objectPlain(a)?a:{label:a,value:a}})},validWhenRegex:function(a){return g.string(a)?new RegExp(a):a}})(T,this._defaults,b);this.type=b.type;this.allFields=this.settings.fieldInstances||p.instances;
this.value=null!=this.settings.defaultValue?this.settings.defaultValue:null;this.ID=this.settings.ID||Y++ +"";this.els={};this._eventCallbacks={};this.state={valid:!0,visible:!0,disabled:!1,focused:!1,hovered:!1,filled:!1,interacted:!1,showError:!1,showHelp:!1,width:"100%"};null!=(a=this.settings.conditions)&&a.length&&(this.state.visible=!1,n.initConditions(this,this.settings.conditions,function(a){return function(){return a.validateConditions()}}(this)));this.allFields[this.ID]&&"undefined"!==typeof console&&
null!==console&&console.warn("Duplicate field IDs found: '"+this.ID+"'");this._construct();this._createElements();this._attachBindings();this.els.field.onInserted(function(a){return function(){return a.emit("inserted")}}(this));return this.allFields[this.ID]=this.els.field.raw._quickField=this};p.instances=Object.create(null);Y=0;Object.defineProperty(p.prototype,"valueRaw",{get:function(){return this.value}});p.prototype.appendTo=function(b){this.els.field.appendTo(b);return this};p.prototype.prependTo=
function(b){this.els.field.prependTo(b);return this};p.prototype.insertAfter=function(b){this.els.field.insertAfter(b);return this};p.prototype.insertBefore=function(b){this.els.field.insertBefore(b);return this};p.prototype.validateConditions=function(b){var a;b?a=!1:(b=this.settings.conditions,a=!0);b=n.validateConditions(b);return a?this.state.visible=b:b};p.prototype.on=function(b,a){var c;g.string(b)&&g["function"](a)&&(null==(c=this._eventCallbacks)[b]&&(c[b]=[]),this._eventCallbacks[b].push(a));
return this};p.prototype.off=function(b,a){this._eventCallbacks[b]&&(g["function"](a)?n.removeItem(this._eventCallbacks[b],a):this._eventCallbacks[b]={});return this};p.prototype.emit=function(){var b,a,c,d,e;a=arguments[0];b=2<=arguments.length?slice.call(arguments,1):[];if(this._eventCallbacks[a])for(e=this._eventCallbacks[a],c=0,d=e.length;c<d;c++)a=e[c],a.apply(null,[this].concat(slice.call(b)));return this};p.text=m=function(){return this};m.prototype=Object.create(p.prototype);m.prototype._templates=
{field:e.template(["div",{style:{position:"relative",display:"none",boxSizing:"border-box",fontFamily:function(b){return b.settings.fontFamily},$visible:{display:"inline-block"},$showError:{animation:"0.2s fieldErrorShake"}}}]),fieldInnerwrap:e.template(["div",{style:{position:"relative",height:"46px",backgroundColor:"white",borderWidth:"1px",borderStyle:"solid",borderColor:"#d3d3d3",borderRadius:"2px",boxSizing:"border-box",fontFamily:"inherit",transition:"border-color 0.2s",$focus:{borderColor:"#ff9c00"},
$showError:{borderColor:"#cc4820"},$disabled:{borderColor:"#d3d3d3",backgroundColor:"#d3d3d3"}}}]),label:e.template(["div",{style:{position:"absolute",zIndex:1,top:function(b){return parseFloat(b.els.fieldInnerwrap.raw.style.height)/6},left:function(b){var a;return parseFloat(null!=(a=b.els.icon)?a.styleSafe("width"):void 0)||0},padding:"0 12px",fontFamily:"inherit",fontSize:"11px",fontWeight:600,lineHeight:"1em",color:"#909090",opacity:0,transition:"opacity 0.2s, color 0.2s",whiteSpace:"nowrap",
cursor:"default",pointerEvents:"none",$filled:{opacity:1},$focus:{color:"#ff9c00"},$showError:{color:"#cc4820"}}}]),input:e.template(["input",{type:"text",style:{position:"relative",zIndex:3,display:"inline-block",verticalAlign:"top",width:function(b){var a;if(!b.settings.autoWidth)return a="",b.els.icon&&(a+=" -"+b.els.icon.raw.styleSafe("width",!0)),b.els.checkmark&&(a+=" -"+b.els.checkmark.styleSafe("width",!0)),"calc(100% + ("+(a||"0px")+"))"},height:function(){return this.parent.styleSafe("height")},
margin:"0",padding:"0 12px",backgroundColor:"transparent",appearance:"none",border:"none",outline:"none",fontFamily:"inherit",fontSize:"14px",lineHeight:function(){return this.parent.styleSafe("height")},color:"#181818",boxSizing:"border-box",whiteSpace:"nowrap",transform:"translateY(0)",transition:"transform 0.2s, -webkit-transform 0.2s",$filled:{$hasLabel:{transform:function(b){return"translateY("+parseFloat(b.els.fieldInnerwrap.style("height"))/8+"px)"}}},$showCheckmark:{padding:"0 44px 0 12px"}}}]),
placeholder:e.template(["div",{style:{position:"absolute",zIndex:2,top:"0px",left:function(b){var a;return(null!=(a=b.els.icon)?a.styleSafe("width"):void 0)||0},lineHeight:function(){return this.parent.styleSafe("height")},padding:function(b){return b.els.input.styleSafe("padding")},fontFamily:function(b){return b.els.input.styleSafe("fontFamily")},fontSize:function(b){return b.els.input.styleSafe("fontSize")},color:"#181818",opacity:.5,userSelect:"none",whiteSpace:"nowrap",transform:"translateY(0)",
transition:"transform 0.2s, -webkit-transform 0.2s",$filled:{visibility:"hidden",$hasLabel:{transform:function(b){return"translateY("+parseFloat(b.els.fieldInnerwrap.style("height"))/8+"px)"}}}}}]),help:e.template(["div",{style:{position:"absolute",top:function(b){return parseFloat(this.parent.styleSafe("height"))+4+"px"},left:"0px",fontFamily:"inherit",fontSize:"11px",color:"#909090",display:"none",$showError:{color:"#cc4820",display:"block"},$showHelp:{display:"block"}}}]),checkmark:e.template(["div",
{style:{position:"relative",zIndex:4,display:"none",width:"38px",height:"100%",paddingTop:function(){return parseFloat(this.parent.styleSafe("height"))/2-13},paddingRight:"12px",verticalAlign:"top",boxSizing:"border-box",$filled:{display:"inline-block"}}},["div",{style:{width:"20px",height:"20px",borderRadius:"50%",backgroundColor:"white",borderWidth:"3px",borderStyle:"solid",borderColor:"#72c322",transform:"scale(0.8)",$showError:{borderColor:"#cc4820"}}},["div",{style:{position:"absolute",top:"-4px",
left:"-10px",width:"15px",height:"30px",borderRadius:"30px 0 0 30px",backgroundColor:function(){return this.parent.raw.style.backgroundColor},transform:"rotate(-45deg)",transformOrigin:"15px 15px 0"}}],["div",{style:{position:"absolute",top:"-5px",left:"8px",width:"15px",height:"30px",borderRadius:"0 30px 30px 0",backgroundColor:function(){return this.parent.raw.style.backgroundColor},transform:"rotate(-45deg)",transformOrigin:"0 15px 0",$filled:{animation:"4.25s ease-in checkmarkRotatePlaceholder",
$invalid:{animation:""}}}}],["div",{style:{$filled:{$invalid:{position:"relative",zIndex:2,animation:"0.55s checkmarkAnimateError",transformOrigin:"50% 10px"}}}},["div",{style:{position:"absolute",zIndex:2,top:"10px",left:"3px",display:"block",width:"8px",height:"3px",borderRadius:"2px",backgroundColor:"#72c322",transform:"rotate(45deg)",$filled:{animation:"0.75s checkmarkAnimateSuccessTip"},$invalid:{backgroundColor:"#cc4820",left:"4px",top:"8px",width:"12px",$filled:{animation:""}}}}],["div",{style:{position:"absolute",
zIndex:2,top:"8px",right:"2px",display:"block",width:"12px",height:"3px",borderRadius:"2px",backgroundColor:"#72c322",transform:"rotate(-45deg)",$filled:{animation:"0.75s checkmarkAnimateSuccessLong"},$invalid:{backgroundColor:"#cc4820",top:"8px",left:"4px",right:"auto",$filled:{animation:""}}}}]],["div",{style:{position:"absolute",zIndex:2,top:"-4px",left:"-3px",width:"20px",height:"20px",borderRadius:"50%",borderWidth:"3px",borderStyle:"solid",borderColor:n.hexToRGBA("#72c322",.4),$invalid:{borderColor:n.hexToRGBA("#cc4820",
.4)}}}],["div",{style:{position:"absolute",zIndex:1,top:"-2px",left:"6px",width:"4px",height:"28px",backgroundColor:function(){return this.parent.raw.style.backgroundColor},transform:"rotate(-45deg)"}}]]])};m.prototype._defaults={mask:!1,maskPlaceholder:" ",maskGuide:!0,placeholder:!0,validWhenIsChoice:!1,validWhenRegex:!1,autoWidth:!1,checkmark:!0,keyboard:"text",dropdownOptions:{storeSelected:!1,lockScroll:!1},choices:null};m.prototype._construct=function(){this.state.typing=!1;this.cursor={prev:0,
current:0};this.helpMessage=this.settings.alwaysShowHelp?this.settings.help:"";if(!this.settings.mask){var b=this.settings,a;a:{switch(this.settings.keyboard){case "number":case "phone":case "tel":a="1+";break a;case "email":a="*+@*+.aa+";break a}a=void 0}b.mask=a}this.settings.mask&&(this.mask=new O(this.settings.mask,this.settings.maskPlaceholder,this.settings.maskGuide))};m.prototype._createElements=function(){var b,a;b={relatedInstance:this,styleAfterInsert:!0};this.els.field=this._templates.field.spawn(this.settings.templates.field,
b);this.els.fieldInnerwrap=this._templates.fieldInnerwrap.spawn(this.settings.templates.fieldInnerwrap,b).appendTo(this.els.field);this.els.label=this._templates.label.spawn(this.settings.templates.label,b).prependTo(this.els.field);this.els.input=this._templates.input.spawn(this.settings.templates.input,b);this.els.placeholder=this._templates.placeholder.spawn(this.settings.templates.placeholder,b);this.els.help=this._templates.help.spawn(this.settings.templates.help,b);this.settings.choices&&(this.dropdown=
new r(this.settings.choices,this),this.dropdown.appendTo(this.els.fieldInnerwrap));this.settings.icon&&(g.string(this.settings.icon)&&(a=this.settings.icon),this.els.icon=this._templates.icon.spawn(this.settings.templates.icon,b,a).insertBefore(this.els.label));this.settings.checkmark&&(this.els.checkmark=this._templates.checkmark.spawn(this.settings.templates.checkmark,b).appendTo(this.els.fieldInnerwrap),this.els.input.insertBefore(this.els.checkmark));this.els.help.appendTo(this.els.fieldInnerwrap);
this.els.input.parent||this.els.input.insertBefore(this.els.help);this.els.input.prop("type",function(){switch(this.settings.keyboard){case "number":case "tel":case "phone":return"tel";case "password":return"password";case "url":return"url";default:return"text"}}.call(this));this.els.placeholder.insertAfter(this.els.input);this.els.field.state("hasLabel",this.settings.label);this.els.fieldInnerwrap.raw._quickField=this.els.input.raw._quickField=this};m.prototype._attachBindings=function(){var b;b=
{listenMethod:"on"};d("visible").of(this.state).to(function(a){return function(b){return a.els.field.state("visible",b)}}(this));d("hovered").of(this.state).to(function(a){return function(b){return a.els.field.state("hover",b)}}(this));d("focused").of(this.state).to(function(a){return function(b){return a.els.field.state("focus",b)}}(this));d("filled").of(this.state).to(function(a){return function(b){return a.els.field.state("filled",b)}}(this));d("disabled").of(this.state).to(function(a){return function(b){return a.els.field.state("disabled",
b)}}(this));d("showError").of(this.state).to(function(a){return function(b){return a.els.field.state("showError",b)}}(this));d("showHelp").of(this.state).to(function(a){return function(b){return a.els.field.state("showHelp",b)}}(this));d("valid").of(this.state).to(function(a){return function(b){a.els.field.state("valid",b);return a.els.field.state("invalid",!b)}}(this));d("showError",{updateOnBind:!1}).of(this.state).to(function(a){return function(b,d){switch(!1){case !g.string(b):return a.els.help.text(b);
case !g.string(d):return a.els.help.text(a.helpMessage)}}}(this));d("label").of(this.settings).to("textContent").of(this.els.label.raw);d("placeholder").of(this.settings).to("textContent").of(this.els.placeholder.raw).transform(function(a){return function(b){switch(!1){case !(!0===b&&a.settings.label):return a.settings.label;case !g.string(b):return b;default:return""}}}(this));d("helpMessage").of(this).to("textContent").of(this.els.help.raw).condition(function(a){return function(){return!a.state.showError}}(this));
d("width",{updateEvenIfSame:!0}).of(this.state).to(function(a){return function(b){return(a.settings.autoWidth?a.els.input:a.els.field).style({width:b})}}(this));this.settings.autoWidth&&d("value",{updateEvenIfSame:!0,updateOnBind:!1}).of(this).to(function(a){return function(b){var c;b?(a.els.input.style("width",0),a.els.input.raw.scrollLeft=1E10,b=Math.max(a.els.input.raw.scrollLeft+a.els.input.raw.offsetWidth,a.els.input.raw.scrollWidth)+2,c="absolute"===a.els.label.styleSafe("position")?a.els.label.rect.width:
0):(b=a.els.placeholder.rect.width,c=0);return a.state.width=Math.max(b,c)+"px"}}(this)).updateOn("event:inserted",{listenMethod:"on"}).of(this);d("value").of(this.els.input.raw).transformSelf(function(a){return function(b){a.mask&&(a.mask.setValue(b),a.cursor.current=a.selection().start,b=a.mask.valueRaw?a.mask.value:"");return b}}(this)).to("value").of(this).bothWays();d("value").of(this).to("valueRaw").of(this).transform(function(a){return function(b){return a.mask?a.mask.valueRaw:b}}(this));d("valueRaw").of(this).to(function(a){return function(b){a.state.filled=
!!b;b&&(a.state.interacted=!0);a.state.valid=a.validate();return a.emit("input")}}(this));this.settings.mask&&d("value",{updateEvenIfSame:!0}).of(this.els.input.raw).to(function(a){return function(b){if(a.state.focused)return a._scheduleCursorReset()}}(this));this.dropdown&&(d("typing",{updateEvenIfSame:!0}).of(this.state).to(function(a){return function(b){if(b){if(a.valueRaw)return a.dropdown.isOpen=!0,d("event:click").of(document).once.to(function(){return a.dropdown.isOpen=!1}).condition(function(b){return!e(b.target).parentMatching(function(b){return b===
a.els.fieldInnerwrap})})}else return setTimeout(function(){return a.dropdown.isOpen=!1},300)}}(this)),d("valueRaw",{updateOnBind:!1}).of(this).to(function(a){return function(b){var c,d,e,g,h;g=a.dropdown.options;c=0;for(d=g.length;c<d;c++)e=g[c],h=b?n.fuzzyMatch(b,e.value):!0,e.visible!==h&&(e.visible=h);a.dropdown.isOpen&&!b&&(a.dropdown.isOpen=!1)}}(this)),this.dropdown.onSelected(function(a){return function(b){a.value=b.label;b.value!==b.label&&(a.valueRaw=b.value);a.dropdown.isOpen=!1;return a.selection(a.els.input.raw.value.length)}}(this)));
d("event:mouseenter",b).of(this.els.input).to(function(a){return function(){return a.state.hovered=!0}}(this));d("event:mouseleave",b).of(this.els.input).to(function(a){return function(){return a.state.hovered=!1}}(this));d("event:focus",b).of(this.els.input).to(function(a){return function(){a.state.focused=!0;if(a.state.disabled)return a.blur()}}(this));d("event:blur",b).of(this.els.input).to(function(a){return function(){return a.state.typing=a.state.focused=!1}}(this));d("event:input",b).of(this.els.input).to(function(a){return function(){return a.state.typing=
!0}}(this));d("event:keydown",b).of(this.els.input).to(function(a){return function(){return a.cursor.prev=a.selection().end}}(this))};m.prototype.validate=function(b){var a;null==b&&(b=this.value);switch(!1){case !(this.settings.validWhenRegex&&g.regex(this.settings.validWhenRegex)):return this.settings.validWhenRegex.test(b);case !(this.settings.validWhenIsChoice&&null!=(a=this.settings.choices)&&a.length):return a=this.settings.choices.filter(function(a){return a.value===b}),!!a.length;case !this.mask:return this.mask.validate(b);
default:return!!b}};m.prototype._scheduleCursorReset=function(){var b,a;n.getIndexOfFirstDiff(this.mask.value,this.mask.prev.value);b=this.cursor.current;a=this.mask.normalizeCursorPos(b,this.cursor.prev);a!==b&&this.selection(a)};m.prototype.selection=function(b){var a,c;g.object(b)?(c=b.start,a=b.end):c=b;if(null!=c){if(!a||a<c)a=c;this.els.input.raw.setSelectionRange(c,a)}else return{start:this.els.input.raw.selectionStart,end:this.els.input.raw.selectionEnd}};m.prototype.focus=function(){return this.els.input.raw.focus()};
m.prototype.blur=function(){return this.els.input.raw.blur()};p.select=z=function(){return this};z.prototype=Object.create(p.prototype);z.prototype._templates={field:e.template(["div",{style:w.clone(m.prototype._templates.field.options.style)}]),fieldInnerwrap:e.template(["div",{style:w.clone(m.prototype._templates.fieldInnerwrap.options.style)}]),label:e.template(["div",{style:w.clone(m.prototype._templates.label.options.style)}]),input:e.template(["div",{props:{tabIndex:0},style:w.clone(m.prototype._templates.input.options.style,
{userSelect:"none",overflow:"scroll"})}]),placeholder:e.template(["div",{style:w.clone(m.prototype._templates.placeholder.options.style)}]),caret:e.template(["div",{style:{position:"relative",zIndex:3,top:function(b){return parseFloat(b.els.input.style("height"))/2-8.5},display:"inline-block",width:"29px",height:"17px",paddingRight:"12px",boxSizing:"border-box",verticalAlign:"top",outline:"none",pointerEvents:"none"}},u.caretDown]),help:e.template(["div",{style:w.clone(m.prototype._templates.help.options.style)}])};
z.prototype._defaults={placeholder:!0,validWhenIsChoice:!1,validWhenRegex:!1,validWhenChoseMin:Infinity,autoWidth:!1,labelFilter:null,choices:[],multiple:!1,dropdownOptions:{}};z.prototype._construct=function(){var b;if(null==(b=this.settings.choices)||!b.length)throw Error("Choices were not provided for choice field '"+(this.settings.label||this.ID)+"'");this.settings.defaultValue||(this.value=this.settings.multiple?[]:null);this.state.showHelp=this.settings.alwaysShowHelp?this.settings.help:!1;
if(this.settings.dropdownOptions.multiple=this.settings.multiple)this.settings.dropdownOptions.help="Tip: press ESC to close this menu"};z.prototype._createElements=function(){var b;b={relatedInstance:this,styleAfterInsert:!0};this.els.field=this._templates.field.spawn(this.settings.templates.field,b);this.els.fieldInnerwrap=this._templates.fieldInnerwrap.spawn(this.settings.templates.fieldInnerwrap,b).appendTo(this.els.field);this.els.label=this._templates.label.spawn(this.settings.templates.label,
b).prependTo(this.els.field);this.els.input=this._templates.input.spawn(this.settings.templates.input,b).appendTo(this.els.fieldInnerwrap);this.els.placeholder=this._templates.placeholder.spawn(this.settings.templates.placeholder,b).insertBefore(this.els.input);this.els.help=this._templates.help.spawn(this.settings.templates.help,b).appendTo(this.els.fieldInnerwrap);this.els.caret=this._templates.caret.spawn(this.settings.templates.caret,b).appendTo(this.els.fieldInnerwrap);this.els.checkmark=this.els.caret;
this.dropdown=new r(this.settings.choices,this);this.dropdown.appendTo(this.els.fieldInnerwrap);this.settings.label&&(this.els.label.text(this.settings.label),this.els.field.state("hasLabel",!0));this.els.fieldInnerwrap.raw._quickField=this.els.input.raw._quickField=this};z.prototype._attachBindings=function(){var b;b={listenMethod:"on"};d("visible").of(this.state).to(function(a){return function(b){return a.els.field.state("visible",b)}}(this));d("hovered").of(this.state).to(function(a){return function(b){return a.els.field.state("hover",
b)}}(this));d("focused").of(this.state).to(function(a){return function(b){return a.els.field.state("focus",b)}}(this));d("filled").of(this.state).to(function(a){return function(b){return a.els.field.state("filled",b)}}(this));d("disabled").of(this.state).to(function(a){return function(b){return a.els.field.state("disabled",b)}}(this));d("showError").of(this.state).to(function(a){return function(b){return a.els.field.state("showError",b)}}(this));d("showHelp").of(this.state).to(function(a){return function(b){return a.els.field.state("showHelp",
b)}}(this));d("valid").of(this.state).to(function(a){return function(b){a.els.field.state("valid",b);return a.els.field.state("invalid",!b)}}(this));d("showHelp").of(this.state).to("textContent").of(this.els.help.raw).transform(function(a){return a?a:""}).condition(function(a){return function(){return!a.state.showError}}(this));d("showError",{updateOnBind:!1}).of(this.state).to(function(a){return function(b,d){switch(!1){case !g.string(b):return a.els.help.text(b);case !g.string(d):return a.els.help.text(a.state.showError)}}}(this));
d("placeholder").of(this.settings).to("textContent").of(this.els.placeholder.raw).transform(function(a){return function(b){switch(!1){case !(!0===b&&a.settings.label):return a.settings.label;case !g.string(b):return b;default:return""}}}(this));d("width",{updateEvenIfSame:!0}).of(this.state).to(function(a){return function(b){return(a.settings.autoWidth?a.els.input:a.els.field).style({width:b})}}(this));this.settings.autoWidth&&setTimeout(function(a){return function(){return d("valueLabel",{updateEvenIfSame:!0,
updateOnBind:!1}).of(a).to(function(b){var c;b?(a.els.input.style("width",0),b=a.els.input.raw.scrollWidth+2,c="absolute"===a.els.label.styleSafe("position")?a.els.label.rect.width:0):(b=a.els.placeholder.rect.width,c=0);return a.state.width=Math.max(b,c)+"px"}).updateOn("event:inserted",{listenMethod:"on"}).of(a)}}(this));d("array:selected",{updateOnBind:!1}).of(this.dropdown).to("value").of(this).transform(function(a){return function(b){return b?a.settings.multiple?b.map(function(a){return a.value}):
b.value:b}}(this));d("value").of(this).to("array:selected").of(this.dropdown).transform(function(a){return function(b){return a.settings.multiple?b?b.map(function(b){return a.dropdown.findOption(b)}).filter(function(a){return a}):[]:b?a.dropdown.findOption(b):null}}(this));d("value").of(this).to("valueLabel").of(this).transform(function(a){return function(b){switch(!1){case !a.settings.multiple:return b.map(a.dropdown.getLabelOfOption.bind(a.dropdown)).join(", ");case "string"===typeof b:return"";
default:return a.dropdown.getLabelOfOption(b)}}}(this));d("valueLabel").of(this).to("textContent").of(this.els.input.raw).transform(function(a){return function(b){return a.settings.labelFormat?a.settings.labelFormat(b):b}}(this)).and.to(function(a){return function(b){a.state.filled=!!b;b&&(a.state.interacted=!0);return a.state.valid=a.validate()}}(this));d("array:value",{updateOnBind:!1}).of(this).to(function(a){return function(){return a.emit("input")}}(this));d("event:click",b).of(this.els.input).to(function(a){return function(){var b,
f;if(!a.state.disabled)return a.dropdown.isOpen=!0,b=d("event:click").of(document).once.to(function(){return a.dropdown.isOpen=!1}).condition(function(b){return!e(b.target).parentMatching(function(b){return b===a.els.fieldInnerwrap})}),f=d("event:keydown").of(document).once.to(function(){return a.dropdown.isOpen=!1}).condition(function(a){return 27===a.keyCode}),d("isOpen",{updateOnBind:!1}).of(a.dropdown).once.to(function(){b.unBind();return f.unBind()}).condition(function(a){return!a})}}(this));
d("focused",{updateOnBind:!1}).of(this.state).to(function(a){return function(b){var c;return b?(c=[32,37,38,39,40],a.els.input.on("keydown.dropdownTrigger",function(b){var d;if(n.includes(c,b.keyCode)&&!a.dropdown.isOpen)return a.dropdown.isOpen=!0,null!=(d=a.dropdown.lastSelected)&&d.selected&&(a.dropdown.currentHighlighted=a.dropdown.lastSelected),b.preventDefault();if(9===b.keyCode&&a.dropdown.isOpen)return b.preventDefault()})):a.els.input.off("keydown.dropdownTrigger")}}(this));this.dropdown.onSelected(function(a){return function(b){if(!a.settings.multiple)return a.dropdown.isOpen=
!1}}(this));d("event:mouseenter",b).of(this.els.input).to(function(a){return function(){return a.state.hovered=!0}}(this));d("event:mouseleave",b).of(this.els.input).to(function(a){return function(){return a.state.hovered=!1}}(this));d("event:focus",b).of(this.els.input).to(function(a){return function(){a.state.focused=!0;if(a.state.disabled)return a.blur()}}(this));d("event:blur",b).of(this.els.input).to(function(a){return function(){return a.state.focused=!1}}(this))};z.prototype.validate=function(b){var a,
c;null==b&&(b=this.value);switch(!1){case !(this.settings.validWhenRegex&&g.regex(this.settings.validWhenRegex)):switch(!1){case !this.settings.multiple:return function(a){return function(){var c;if(0===b.length)return!1;c=b.filter(function(b){return a.settings.validWhenRegex.test(b)});return Infinity!==a.settings.validWhenChoseMin&&g.number(a.settings.validWhenChoseMin)?c.length>=a.settings.validWhenChoseMin:c.length===b.length}}(this)();default:return this.settings.validWhenRegex.test(b)}case !(this.settings.validWhenIsChoice&&
null!=(a=this.settings.choices)&&a.length):return a=this.settings.choices.filter(function(a){return a.value===b}),!!a.length;case !(this.settings.multiple&&-1>(c=this.settings.validWhenChoseMin)&&Infinity>c):return b.length>=this.settings.validWhenChoseMin;case !this.settings.multiple:return b.length;default:return!!b}};z.prototype.focus=function(){return this.els.input.raw.focus()};z.prototype.blur=function(){return this.els.input.raw.blur()};p.choice=z=function(){return this};z.prototype=Object.create(p.prototype);
z.prototype._templates={field:e.template(["div",{style:{position:"relative",display:"none",width:function(b){return b.state.width},boxSizing:"border-box",fontFamily:function(b){return b.settings.fontFamily},$visible:{$hasVisibleOptions:{display:"inline-block"}},$showError:{animation:"0.2s fieldErrorShake"}}}]),fieldInnerwrap:e.template(["div",{style:{position:"relative",boxSizing:"border-box",fontFamily:"inherit"}}]),label:e.template(["div",{style:{display:"none",marginBottom:"12px",fontFamily:"inherit",
fontSize:"13px",fontWeight:600,textAlign:"left",color:"#181818",cursor:"default",pointerEvents:"none",$hasLabel:{display:"block"},$focus:{color:"#ff9c00"},$showError:{color:"#cc4820"}}}]),choiceGroup:e.template(["div",{style:{marginBottom:function(b){return b.settings.spacing},userSelect:"none",fontSize:"0"}}]),choice:e.template(["div",{style:{position:"relative",display:"inline-block",width:function(b){return"calc((100% - "+b.settings.spacing*(b.settings.perGroup-1)+"px) / "+b.settings.perGroup+
")"},marginLeft:function(b){if(this.index)return"calc(100% - (100% - "+b.settings.spacing+"px))"},padding:"0 12px",borderRadius:"2px",backgroundColor:"white",fontFamily:"inherit",textAlign:"center",color:"#181818",boxSizing:"border-box",verticalAlign:"top",cursor:"pointer",$selected:{color:"#ff9c00"},$unavailable:{display:"none"}}},["div",{style:{position:"absolute",zIndex:2,top:"0",left:"0",width:"100%",height:"100%",borderWidth:"1px",borderStyle:"solid",borderColor:"#d3d3d3",borderRadius:"2px",
boxSizing:"border-box",$selected:{borderColor:"inherit",borderWidth:"2px"},$disabled:{backgroundColor:"#d3d3d3"}}}]]),choiceLabel:e.template(["div",{style:{position:"relative",display:"block",padding:"15px 0px",fontFamily:"inherit",fontSize:"14px",fontWeight:"500"}}]),choiceIcon:e.template(["div",{style:{position:"absolute",top:"50%",display:"block",fontSize:"20px",opacity:.16,transform:"translateY(-50%)"}}]),help:e.template(["div",{style:{marginTop:"10px",fontFamily:"inherit",fontSize:"11px",color:"#909090",
display:"none",$showError:{color:"#cc4820",display:"block"},$showHelp:{display:"block"}}}])};z.prototype._defaults={validWhenSelected:!1,validWhenIsChoice:!1,showSelectAll:!1,perGroup:7,spacing:8,choices:[]};z.prototype._construct=function(){var b;if(null==(b=this.settings.choices)||!b.length)throw Error("Choices were not provided for choice field '"+(this.settings.label||this.ID)+"'");this.settings.defaultValue||(this.value=this.settings.multiple?[]:null);this.lastSelected=null;this.visibleOptionsCount=
0;this.choices=this.settings.choices;this.settings.perGroup=Math.min(this.settings.perGroup,this.choices.length+(this.settings.multiple&&this.settings.showSelectAll?1:0))};z.prototype._createElements=function(){var b,a,c;a={relatedInstance:this,styleAfterInsert:!0};this.els.field=this._templates.field.spawn(this.settings.templates.field,a);this.els.fieldInnerwrap=this._templates.fieldInnerwrap.spawn(this.settings.templates.fieldInnerwrap,a).appendTo(this.els.field);this.els.label=this._templates.label.spawn(this.settings.templates.label,
a).prependTo(this.els.field);this.els.help=this._templates.help.spawn(this.settings.templates.help,a);this.settings.label&&(this.els.label.text(this.settings.label),this.els.field.state("hasLabel",!0));b=this.settings.choices;c=this.settings.perGroup;Array(Math.ceil(b.length/c)).fill().map(function(a,d){return b.slice(d*c,d*c+c)}).forEach(function(b){return function(c,d){var e;e=b._templates.choiceGroup.spawn(b.settings.templates.choiceGroup,a).appendTo(b.els.fieldInnerwrap);return c.forEach(function(c,
f){c.el=b._templates.choice.spawn(b.settings.templates.choice,a).appendTo(e);c.labelEl=b._templates.choiceLabel.spawn(b.settings.templates.choiceLabel,a).appendTo(c.el);c.icon&&(c.iconEl=b._templates.choiceIcon.spawn(b.settings.templates.choiceIcon,a).insertBefore(c.labelEl));c.el.index=f;c.el.totalIndex=f*d;c.el.prop("title",c.label);c.el.children[1].text(c.label);c.icon&&c.iconEl.append(c.label);c.visible=!0;c.selected=!1;return c.unavailable=!1})}}(this));this.els.help.appendTo(this.els.fieldInnerwrap);
this.els.fieldInnerwrap.raw._quickField=this};z.prototype._attachBindings=function(){var b;b={listenMethod:"on"};d("visible").of(this.state).to(function(a){return function(b){return a.els.field.state("visible",b)}}(this));d("hovered").of(this.state).to(function(a){return function(b){return a.els.field.state("hover",b)}}(this));d("filled").of(this.state).to(function(a){return function(b){return a.els.field.state("filled",b)}}(this));d("disabled").of(this.state).to(function(a){return function(b){return a.els.field.state("disabled",
b)}}(this));d("showError").of(this.state).to(function(a){return function(b){return a.els.field.state("showError",b)}}(this));d("showHelp").of(this.state).to(function(a){return function(b){return a.els.field.state("showHelp",b)}}(this));d("valid").of(this.state).to(function(a){return function(b){a.els.field.state("valid",b);return a.els.field.state("invalid",!b)}}(this));d("event:mouseenter",b).of(this.els.field).to(function(a){return function(){return a.state.hovered=!0}}(this));d("event:mouseleave",
b).of(this.els.field).to(function(a){return function(){return a.state.hovered=!1}}(this));d("width").of(this.state).to(function(a){return function(b){return a.els.field.style({width:b})}}(this));d("showError",{updateOnBind:!1}).of(this.state).to(function(a){return function(b,d){switch(!1){case !g.string(b):return a.els.help.text(b);case !g.string(d):return a.els.help.text(a.settings.help)}}}(this));d("visibleOptionsCount").of(this).to(function(a){return function(b){return a.els.field.state("hasVisibleOptions",
!!b)}}(this));d("value").of(this).to(function(a){return function(b){a.state.filled=!(null==b||!b.length);a.state.filled&&(a.state.interacted=!0);return a.state.valid=a.validate()}}(this));d("array:value",{updateOnBind:!1}).of(this).to(function(a){return function(){return a.emit("input")}}(this));d("lastSelected",{updateOnBind:!1,updateEvenIfSame:!0}).of(this).to(function(a){return function(b,d){if(a.settings.multiple){if(b.selected)return b.selected=!1,n.removeItem(a.value,b.value);b.selected=!0;
return a.value.push(b.value)}if(b!==d)return b.selected=!0,null!=d&&(d.selected=!1),a.value=b.value}}(this));this.choices.forEach(function(a){return function(b){var c;d("visible").of(b).to(function(a){return b.el.state("visible",a)}).and.to(function(b){return a.visibleOptionsCount+=b?1:-1});d("selected",{updateOnBind:!1}).of(b).to(function(a){return b.el.state("selected",a)});d("unavailable",{updateOnBind:!1}).of(b).to(function(a){return b.el.state("unavailable",a)}).and.to(function(){return a.lastSelected=
b}).condition(function(c){return c&&a.settings.multiple&&b.selected});d("event:click",{listenMethod:"on"}).of(b.el).to(function(){return a.lastSelected=b});if(null!=(c=b.conditions)&&c.length)return b.unavailable=!0,b.allFields=a.allFields,n.initConditions(b,b.conditions,function(){return b.unavailable=!n.validateConditions(b.conditions)})}}(this))};z.prototype.validate=function(b){var a;null==b&&(b=this.value);switch(!1){case "number"!==typeof this.settings.validWhenSelected:return(null!=b?b.length:
void 0)>=this.settings.validWhenSelected;case !this.settings.validWhenIsChoice:return a=this.choices.filter(function(a){return a.value===b}),!!a.length;default:return!(null==b||!b.length)}};r=function(b,a){this.options=b;this.field=a;this.isOpen=!1;this.settings=w.deep.clone.keys(this._defaults).filter(this._settingFilters)(this._defaults,this.field.settings.dropdownOptions);this.selected=this.settings.multiple?[]:null;this.currentHighlighted=this.lastSelected=null;this.visibleOptionsCount=0;this.visibleOptions=
[];this.els={};this._createElements();this._attachBindings();return this};r.prototype._templates={container:e.template(["div",{style:{position:"absolute",zIndex:10,overflow:"hidden",top:function(b){return"text"===b.field.type?this.parent.raw.style.height:"-7px"},left:function(){return 0>this.parent.rect.left-5?0:-5},display:"none",backgroundColor:"#f6f6f6",boxShadow:"0px 6px 10px "+n.hexToRGBA("000000",.32),borderWidth:"1px",borderStyle:"solid",borderColor:"#d1d1d1",borderRadius:"5px",boxSizing:"border-box",
padding:"4px 0",$isOpen:{$hasVisibleOptions:{display:"block"}}}}]),list:e.template(["div",{passStateToChildren:!1,style:{position:"relative",overflow:"scroll",overflowScrolling:"touch"}}]),option:e.template(["div",{style:{display:"none",fontSize:"0",color:"#000000",userSelect:"none",cursor:"pointer",$visible:{display:"block"},$hover:{color:"#ffffff",backgroundColor:"#4C96FF"}}},e.template(["div",{style:{display:"inline-block",verticalAlign:"top",width:"20px",lineHeight:"20px",fontSize:"13px",textAlign:"center",
color:"inherit",stroke:"currentColor",visibility:"hidden",$selected:{visibility:"visible"}}},u.checkmark]),e.template(["div",{style:{display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordWrap:"normal",maxWidth:function(){return"calc(100% - "+this.prev.raw.style.width+")"},paddingRight:"10px",lineHeight:"20px",fontSize:"11px",fontFamily:T.fontFamily,color:"inherit",boxSizing:"border-box"}}])]),scrollIndicatorUp:e.template(["div",{style:{position:"absolute",top:0,
left:0,display:"none",width:"100%",height:"20px",backgroundColor:"#f6f6f6",color:"#000000",textAlign:"center",$visible:{display:"block"}}},["div",{style:{position:"absolute",top:"50%",left:0,right:0,width:"15px",height:"15px",display:"block",margin:"0 auto",transform:"translateY(-50%)"}},u.caretUp]]),scrollIndicatorDown:e.template(["div",{style:{position:"absolute",bottom:0,left:0,display:"none",width:"100%",height:"20px",backgroundColor:"#f6f6f6",color:"#000000",textAlign:"center",$visible:{display:"block"}}},
["div",{style:{position:"absolute",top:"50%",left:0,right:0,width:"15px",height:"15px",display:"block",margin:"0 auto",transform:"translateY(-50%)"}},u.caretDown]]),help:e.template(["div",{style:{display:"none",borderTop:"2px solid rgba(0,0,0,0.05)",padding:"4px 12px 1px",color:"rgba(0,0,0,0.5)",fontWeight:"500",fontSize:"11px",userSelect:"none",$showHelp:{display:"block"}}}])};r.prototype._defaults={maxHeight:300,multiple:!1,storeSelected:!0,lockScroll:!0,help:"",templates:{}};r.prototype._settingFilters=
{maxHeight:function(b){return g.number(b)}};r.prototype._createElements=function(){var b;b={relatedInstance:this,styleAfterInsert:!0};this.els.container=this._templates.container.spawn(this.settings.templates.container,w({passStateToChildren:!1},b));this.els.list=this._templates.list.spawn(this.settings.templates.list,b).appendTo(this.els.container);this.els.help=this._templates.help.spawn(this.settings.templates.help,b).appendTo(this.els.container);this.els.scrollIndicatorUp=this._templates.scrollIndicatorUp.spawn(this.settings.templates.scrollIndicatorUp,
b).appendTo(this.els.container);this.els.scrollIndicatorDown=this._templates.scrollIndicatorDown.spawn(this.settings.templates.scrollIndicatorDown,b).appendTo(this.els.container);this.options.forEach(function(a){return function(c){c.el=a._templates.option.spawn({options:{props:{title:c.label}}},b).appendTo(a.els.list);c.el.children[1].text(c.label);c.visible=!0;c.selected=!1;return c.unavailable=!1}}(this))};r.prototype._attachBindings=function(){d("help").of(this.settings).to("textContent").of(this.els.help.raw).and.to(function(b){return function(a){return b.els.help.state("showHelp",
a)}}(this));d("visibleOptionsCount").of(this).to(function(b){return function(a){return b.els.container.state("hasVisibleOptions",!!a)}}(this));d("isOpen",{updateOnBind:!1}).of(this).to(function(b){return function(a){b.els.container.state("isOpen",a);a||(b.currentHighlighted=null);b.settings.lockScroll&&(a?n.lockScroll(b.els.list):n.unlockScroll());if(a)return b.list_setMaxHeight(),b.list_scrollToSelected()}}(this));d("lastSelected",{updateOnBind:!1,updateEvenIfSame:!0}).of(this).to(function(b){return function(a,
c){b.settings.storeSelected&&(b.settings.multiple?a.selected?(a.selected=!1,n.removeItem(b.selected,a)):(a.selected=!0,b.selected.push(a)):(a.selected=!0,a!==c&&null!=c&&(c.selected=!1),b.selected=a));return b.selectedCallback(a,c)}}(this));d("currentHighlighted").of(this).to(function(b){return function(a,b){b&&b.el.state("hover",!1);if(a)return a.el.state("hover",!0)}}(this));d("focused").of(this.field.state).to(function(b){return function(a){return a?b.field.els.input.on("keydown.dropdownNav",function(a){if(b.isOpen)switch(a.keyCode){case 38:return a.preventDefault(),
b.highlightPrev();case 40:return a.preventDefault(),b.highlightNext();case 13:return a.preventDefault(),b.selectHighlighted();case 27:return a.preventDefault(),b.isOpen=!1}}):b.field.els.input.off("keydown.dropdownNav")}}(this));d("scrollTop",{updateEvenIfSame:!0}).of(this.els.list.raw).to(function(b){return function(a){var c;c=b.els.list.raw.scrollHeight-b.els.list.raw.clientHeight>a;b.els.scrollIndicatorUp.state("visible",0<a);return b.els.scrollIndicatorDown.state("visible",c)}}(this)).condition(function(b){return function(){return b.isOpen&&
!b.settings.help&&b.els.list.raw.scrollHeight!==b.els.list.raw.clientHeight&&100<=b.els.list.raw.clientHeight}}(this)).updateOn("event:scroll").of(this.els.list.raw).updateOn("isOpen").of(this);this.els.scrollIndicatorUp.on("mouseenter",function(b){return function(){return b.list_startScrolling("up")}}(this));this.els.scrollIndicatorUp.on("mouseleave",function(b){return function(){return b.list_stopScrolling()}}(this));this.els.scrollIndicatorDown.on("mouseenter",function(b){return function(){return b.list_startScrolling("down")}}(this));
this.els.scrollIndicatorDown.on("mouseleave",function(b){return function(){return b.list_stopScrolling()}}(this));return this.options.forEach(function(b){return function(a,c){var e;a.index=c;d("visible").of(a).to(function(a){return b.visibleOptionsCount+=a?1:-1}).and.to(function(c){a.el.state("visible",c);return c?(b.visibleOptions.push(a),b.visibleOptions.sort(function(a,b){return a.index-b.index})):n.removeItem(b.visibleOptions,a)});d("selected",{updateOnBind:!1}).of(a).to(function(b){return a.el.state("selected",
b)});d("unavailable",{updateOnBind:!1}).of(a).to(function(b){return a.el.state("unavailable",b)}).and.to(function(){return b.lastSelected=a}).condition(function(c){return c&&b.settings.multiple&&a.selected});d("event:click",{listenMethod:"on"}).of(a.el).to(function(){return b.lastSelected=a});d("event:mouseenter",{listenMethod:"on"}).of(a.el).to(function(){return b.currentHighlighted=a});if(null!=(e=a.conditions)&&e.length)return a.unavailable=!0,a.allFields=b.field.allFields,n.initConditions(a,a.conditions,
function(){return a.unavailable=!n.validateConditions(a.conditions)})}}(this))};r.prototype.appendTo=function(b){return this.els.container.appendTo(b)};r.prototype.onSelected=function(b){return this.selectedCallback=b};r.prototype.findOption=function(b,a){var c;c=this.options.filter(function(c){return b===(a?c.label:c.value)});return this.settings.multiple?c:c[0]};r.prototype.getLabelOfOption=function(b){var a;return(null!=(a=this.options.filter(function(a){return b===a.value})[0])?a.label:void 0)||
""};r.prototype.highlightPrev=function(){var b;b=this.visibleOptions.indexOf(this.currentHighlighted);return 0<b?this.currentHighlighted=this.visibleOptions[b-1]:this.currentHighlighted=this.visibleOptions[this.visibleOptions.length-1]};r.prototype.highlightNext=function(){var b;b=this.visibleOptions.indexOf(this.currentHighlighted);return b<this.visibleOptions.length-1?this.currentHighlighted=this.visibleOptions[b+1]:this.currentHighlighted=this.visibleOptions[0]};r.prototype.selectHighlighted=function(){if(this.currentHighlighted)return this.lastSelected=
this.currentHighlighted};r.prototype.list_setMaxHeight=function(){var b,a,c,d;d=this.settings.maxHeight;if(b=this.els.container.parentMatching(function(a){a=a.style("overflowY");return"hidden"===a||"scroll"===a}))c=this.els.container.rect,a=b.rect,b=c.top+this.settings.maxHeight-a.bottom,c.top>=a.bottom?console.warn("The dropdown for element '"+this.field.ID+"' cannot be displayed as it's hidden by the parent overflow"):0<b&&(c=c.height-this.els.list.rect.height,d=b-c);this.els.list.style("maxHeight",
d);return this.els.list.style("minWidth",parseFloat(this.field.els.fieldInnerwrap.style("width"))+10)};r.prototype.list_scrollToSelected=function(){var b,a;if(this.selected&&!this.settings.multiple)return b=this.selected.el.raw.offsetTop,a=this.selected.el.raw.clientHeight,this.els.list.raw.scrollTop=b-3*a};r.prototype.list_startScrolling=function(b){return this.scrollIntervalID=setInterval(function(a){return function(){return a.els.list.raw.scrollTop+="up"===b?-20:20}}(this),50)};r.prototype.list_stopScrolling=
function(){return clearInterval(this.scrollIntervalID)};K="1#aA*^".split("");O=function(b,a,c){this.pattern=b;this.placeholder=a;this.guide=c;this.optionalsOffset=this.minRequiredCount=0;this.lastValid=null;this.lastInput="";this.valid=!1;this.valueStrict=this.valueRaw=this.value="";this.prev={};this.literals=[];this.optionals=[];this.repeatables=[];this._normalizePattern();this.setValue("");return this};O.prototype._normalizePattern=function(){var b,a,c,d,e,g,m,h;g="";for(b=e=h=d=0;h<this.pattern.length;){m=
this.pattern[h];switch(!1){case !a:a=!1;this.literals.push(h-e);g+=m;0===d&&b++;break;case "\\"!==m:a=!0;e++;break;case "["!==m:c=!0;e++;break;case "]"!==m:c=!1;e++;break;case "+"!==m:e++;break;default:n.includes(K,m)?c?this.optionals.push(h-e):d++:(this.literals.push(h-e),0===d&&b++),"+"===this.pattern[h+1]&&this.repeatables.push(h-e),g+=m}h++}this.minRequiredCount=d;this.firstNonLiteral=b;return this.pattern=g};O.prototype.setValue=function(b){var a,c,d,e,g,m,h,p,r,u,z,y,w,C,A,B;c=n.getIndexOfFirstDiff(this.value,
b);a=U(this.value,b);(g=1===b.length&&0===this.valueRaw.length?!1:this.value.length>b.length)||(p=b.slice(c,c+a));y=z=u="";C=this.pattern.length;e=A=0;if(!(!a&&this.value||g&&n.includes(this.literals,c-this.optionalsOffset)&&c-this.optionalsOffset>this.firstNonLiteral)){for(;A<C;){B=A;w=this.pattern[A];d=b[e];m=n.includes(this.literals,A);h=n.includes(this.optionals,A);c=n.includes(this.repeatables,A);if(b&&!d&&!this.guide)break;switch(!1){case !m:u+=w;y+=w;w===d?n.includes(K,w)&&!g||a>=this.literals.length&&
1<a&&this.valueRaw.length||e++:1===a&&b[e+1]===w&&(e+=2);A++;break;case !n.includes(K,w):if(m=d&&I(d,w)){if("A"===w||"^"===w)d=d.toUpperCase();u+=d;z+=d;if(!h&&!c||r!==A)y+=d;r=b[e+1]&&I(b[e+1],w);e++;r&&c||A++;c&&!r&&n.includes(this.literals,A)&&b[e]!==this.pattern[A]&&e++}else 1!==a||!I(b[e+1],w)||g?(A++,!h&&this.guide&&(u+=this.placeholder,y+=this.placeholder)):h&&e++,h||e++;break;default:debugger}r=B}this.prev.value=this.value;this.prev.valueRaw=this.valueRaw;this.prev.valueStrict=this.valueStrict;
this.value=u;this.valueRaw=z;this.valueStrict=y;p&&(this.lastInput=p);this.optionalsOffset=U(u,y);this.valid=this.validate(b,!0)}};O.prototype.validate=function(b,a){var c,d,e,m,p,h,r,u;if(!g.string(b)||b.length<this.minRequiredCount)return!1;r=this.pattern.length;for(d=u=0;u<r;)switch(h=this.pattern[u],c=b[d],e=n.includes(this.literals,u),m=n.includes(this.optionals,u),p=n.includes(this.repeatables,u),!1){case !e:u++;h===c&&null!=b[d+1]&&d++;break;case !n.includes(K,h):if(c=c&&I(c,h))m=b[d+1]&&I(b[d+
1],h),d++,m&&p||u++;else if(m)u++;else return a&&(this.lastValid=0>d-1?null:d-1),!1}a&&(this.lastValid=d);return!0};O.prototype.normalizeCursorPos=function(b,a){var c,d,e,g,m,h;e=a>b;b<=this.firstNonLiteral&&(c=1<=this.firstNonLiteral-b&&!e||1===this.firstNonLiteral?1:0,b=this.firstNonLiteral+c);g=0;m=this.value.slice(0,b);h=this.valueStrict.slice(0,b);c=n.getIndexOfFirstDiff(this.value,this.prev.value);for(d=0;d<b;)m[d]!==h[d-g]&&g++,d++;if(e){if(b===this.firstNonLiteral)return b;if(n.includes(this.literals,
b-1)||this.value[b-1]===this.placeholder)return b-(0===g?1:0)}else{if(null===c)return n.includes(this.literals,b-g-1)&&h[b-g-1]===this.lastInput?b:Math.max(b-1,this.firstNonLiteral);if(n.includes(this.repeatables,b-g)||n.includes(this.repeatables,c-g))return b;if(n.includes(this.literals,b-g))return b+(0===g?1:0);if(n.includes(this.literals,c-1)&&c===b)return b+1}return b};I=function(b,a){switch(a){case "1":return X.test(b);case "#":return M.test(b);case "a":case "A":return G.test(b);case "*":case "^":return Q.test(b);
default:return!1}};A.SVG=u;A.version="1.0.3";return null!=("undefined"!==typeof module&&null!==module?module.exports:void 0)?module.exports=A:"function"===typeof define&&define.amd?define(["quickfield"],function(){return A}):this.Field=A}()}})(this)();
